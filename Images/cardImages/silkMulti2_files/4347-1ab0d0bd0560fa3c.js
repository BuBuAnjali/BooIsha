"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4347],{57126:function(e,t,s){s.d(t,{u:function(){return c}});var l=s(27573),a=s(68255),n=s(3287),r=s(95415),i=s(74104),o=s(7609);let c=e=>{let{isSoundOn:t,toggleSound:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:(0,a.cn)("absolute left-2 top-2 z-10 flex size-6 items-center justify-center rounded-full bg-neutral-black/[0.34] group-hover:hidden "),children:(0,l.jsx)(r.y,{className:"text-neutral-white"})}),(0,l.jsx)(o.zx,{size:"none",variant:"none",onClick:e=>{e.stopPropagation(),s()},className:"absolute left-2 top-2 z-10 hidden size-6 items-center justify-center rounded-full bg-neutral-black/[0.34] group-hover:flex hover:bg-neutral-black/[0.45]",children:t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.e,{className:"text-neutral-white"}),(0,l.jsx)("span",{className:"sr-only",children:"Mute Sound"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.n,{className:"text-neutral-white"}),(0,l.jsx)("span",{className:"sr-only",children:"Unmute Sound"})]})})]})}},56928:function(e,t,s){s.d(t,{Z:function(){return l}});let l={MY_CREATIONS:"My Creations",TILE:"tile",SIDEBAR:"sidebar"}},50360:function(e,t,s){s.d(t,{Z:function(){return i}});var l=s(27573);s(7653);var a=s(65833),n=s(31311),r=s(74497);let i=()=>(0,r.Sy)(n.qO).map((e,t)=>(0,l.jsx)("div",{className:"mb-1 break-inside-avoid",children:(0,l.jsx)(a.A,{variant:"v1",roundness:"sm",className:"w-full",style:{aspectRatio:e}})},"user_video_masonry_skeleton_".concat(t)))},28740:function(e,t,s){s.d(t,{f:function(){return n}});var l=s(27573);s(7653);var a=s(68255);let n=e=>{let{children:t,className:s}=e;return(0,l.jsx)("div",{className:(0,a.cn)("w-full columns-1 justify-center gap-1 tablet:columns-2 laptop:columns-3 desktop:columns-4 desktop-lg:columns-5",s),children:t})}},45666:function(e,t,s){s.d(t,{Y:function(){return r}});var l=s(27573),a=s(68255),n=s(32348);let r=e=>{let{className:t,children:s,virtualizedContainerRef:r,...i}=e;return(0,l.jsxs)("div",{className:(0,a.cn)("flex size-full flex-col items-stretch",t),children:[(0,l.jsx)(n.N,{virtualizedContainerRef:r,...i,children:s}),(0,l.jsx)("div",{className:"h-32 w-full shrink-0"})]})}},78354:function(e,t,s){s.d(t,{m:function(){return r}});var l=s(27573),a=s(28740),n=s(50360);let r=()=>(0,l.jsx)(a.f,{className:"tablet:columns-3 laptop:columns-3 desktop:columns-3 desktop-lg:columns-3",children:(0,l.jsx)(n.Z,{})})},40577:function(e,t,s){s.d(t,{G:function(){return _}});var l=s(27573),a=s(7653),n=s(10665),r=s(24752),i=s(7609),o=s(6847),c=s(27185),d=s(14671),u=s(78851),x=s(38783),m=s(48354),p=s(3742),h=s(14955),f=s(75398),v=s(67728),g=s(57518);let _=e=>{let{uuid:t,settings:s,thumbnail:_,aspectRatio:N}=e,j=(0,p.XG)(),[w,b]=(0,a.useState)(!1),{handleTextToVideoGeneration:E,isLoadingTextToVideoGeneration:y,cancelTextToVideoGenerationRequest:k}=(0,u.i)(),S=(0,x.c)(),I=(0,f.z)(e=>e.setShouldFetchVideoStatus),{mutate:T,isLoading:O}=(0,m.N)(),z=(0,m.N)(),{width:A,height:C}=(0,g.W)({aspectRatio:N}),R=async()=>{b(!0);let e=null;try{e=await (0,v.NP)(_)}catch(t){(0,r.H)(t),e=null}b(!1);let l={style_id:S.model.model_id,aspect_ratio:S.aspect_ratio,prompt:S.prompt,variation:h.c.TEXT_TO_VIDEO,...s};e&&(l.file=e,l.variation=h.c.IMAGE_TO_VIDEO),E({data:l,onSuccess:()=>{I(!0),z.mutate(t,{onError:e=>{(0,r.H)(e),d.Am.error("Something went wrong while deleting your failed video generation. please delete it manually!")}})}})};return(0,l.jsxs)("div",{className:"relative flex w-full flex-col items-center justify-center rounded bg-neutral-white p-2 dark:bg-neutral-91",style:{aspectRatio:"".concat(A,"/").concat(C)},children:[(0,l.jsx)(i.zx,{size:"icon-sm",onClick:()=>{T(t,{onSuccess:()=>{j(),d.Am.success("Your video is deleted successfully")},onError:()=>{d.Am.error("Something went wrong while deleting your video. please try again")}})},variant:"ghost-secondary",disabled:O,className:"absolute right-2 top-2 size-8",children:O?(0,l.jsx)(c.Spinner,{className:"size-[18px]"}):(0,l.jsx)(n.XHJ,{className:"size-[18px] stroke-[2]"})}),(0,l.jsxs)("div",{className:"mb-3 text-center",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-neutral-101 dark:text-neutral-white",children:"Processing failed"}),(0,l.jsx)("p",{className:"text-xs text-neutral-71 dark:text-neutral-31",children:"Something went wrong. Tokens will be reverted in 8 hrs."})]}),(0,l.jsxs)(o.D,{className:"min-w-[70px]",isLoading:w||y,children:[(0,l.jsx)(o.D.Button,{size:"sm",btnText:"Retry",variant:"secondary",onClick:R,disabled:w||y||z.isLoading}),(0,l.jsx)(o.D.Cancel,{handleCancel:k})]})]})}},59141:function(e,t,s){s.d(t,{S:function(){return r}});var l=s(27573),a=s(27185),n=s(57518);let r=e=>{let{aspectRatio:t}=e,{width:s,height:r}=(0,n.W)({aspectRatio:t});return(0,l.jsxs)("div",{className:"flex w-full flex-col items-center justify-center rounded-xl bg-neutral-21 dark:bg-neutral-91",style:{aspectRatio:"".concat(s,"/").concat(r)},children:[(0,l.jsx)(a.Spinner,{className:"mb-3 mt-0 size-12 border-4 border-primary-61"}),(0,l.jsxs)("div",{className:"text-center ",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-neutral-101 dark:text-neutral-white",children:"Video in progress"}),(0,l.jsx)("p",{className:"text-xs text-neutral-71 dark:text-neutral-31",children:"This usually takes 3-5 minutes"})]})]})}},75649:function(e,t,s){s.d(t,{f:function(){return C}});var l=s(7653),a=s(62351),n=s(33757),r=s(59483),i=s(32138),o=s(45608),c=s(50499),d=s(90244),u=s(93330),x=s(41225),m=s(35350),p=s(75555),h=s(58414),f=s(71133);let v=()=>{let{aggregator:e}=(0,h.O)(),{page:t,source:s,userStatus:a,userPlan:n,userPlanPeriod:r,email:i,id:v,tokenRemaining:g}=(0,m.T)(),{generationTool:_}=(0,f.I)(),{studioName:N}=(0,p.p)();return{handleLogExportVideoEvent:(0,l.useCallback)((l,m,p)=>{var h;let f=Number(localStorage.getItem(x.F.GEN_TILL_EXPORT)),j=(0,c.G)(m),w=Number(null!==(h=localStorage.getItem(x.F.TOKENS_CONSUMED))&&void 0!==h?h:0);e.log(d.H0.export.withProperties({email:i,user_account_status:a,user_plan_period:r,user_plan:n,app_name:o.i.IMAGINE,distinct_id:v,page_name:t,source:s,tokens_remaining:g,feature:u.L.AI_VIDEO_GENERATED,file_type:null!=p?p:"mp4",gen_till_export:f,model_used:l,prompt_text:j.promptText1,prompt_text_2:j.promptText2,prompt_text_3:j.promptText3,tool_name:_,studio_name:N,tokens_till_export:w})),localStorage.removeItem(x.F.GEN_TILL_EXPORT),localStorage.removeItem(x.F.TOKENS_CONSUMED)},[_,N,e,i,v,t,s,g,n,r,a])}};var g=s(30142),_=s(33764),N=s(21865),j=s(94904),w=s(14671),b=s(54375),E=s(80317),y=s(21741),k=s(28821);let S=e=>{let{videoUrl:t,prompt:s,onDownload:a}=e,n=(0,j.useUserStoreContext)()(e=>e.user),{download:r}=(0,E.dY)(),{incrementExports:i}=(0,y.X)();return{downloadVideo:(0,l.useCallback)(async()=>{try{let e=await (0,b.mD)(t);r(t,(0,k.o)({name:[null==n?void 0:n.name,s,t],extension:null==e?void 0:e.ext}),0,{},{onSuccess:()=>{null==a||a(),i("video")}})}catch(e){(0,b.H)(e),e instanceof Error&&w.Am.error(e.message)}},[t,null==n?void 0:n.name,s,a,r,i])}};var I=s(66266),T=s(36962),O=s(94290),z=s(84474),A=s(57518);let C=e=>{var t,s;let{video:o,forceAbort:c}=e,[d,u]=(0,l.useState)(!0),[x,m]=(0,l.useState)(!1),{isVideoLoading:p,refCallback:h}=(0,r.w)({videoUrl:(0,z.q6)(o.url.generation),forceAbort:c||d}),{promptToBeUsed:f,handleUsePrompt:j,handleRecreateClick:w,handleDeleteVideo:E}=(0,_.b)(o),{videoHasSound:y,handleAddSound:k,isAddingSound:C}=(0,g.J)(o),{isSoundOn:R,toggleSound:D}=(0,O.N)(),{width:V,height:P}=(0,A.W)({aspectRatio:null!==(s=null===(t=o.settings.video_params)||void 0===t?void 0:t.aspect_ratio)&&void 0!==s?s:o.settings.aspect_ratio}),G=(0,N.vP)(o),{textToVideo:U}=(0,T.Td)()(e=>e.defaultSettings),M=U.modelListId,F=(0,i.Kb)(G?Number(G):M),L=(0,n.X)({announcementFlag:a.o.HAS_SEEN_EXPORT_ANNOUNCEMENT,variant:I.Z.EXPORT}),{handleLogExportVideoEvent:X}=v(),q=(0,l.useCallback)(async()=>{L();let e=await (0,b.mD)((0,z.q6)(o.url.generation));X(F.name,f,null==e?void 0:e.ext)},[f,L,X,o.url.generation,F]),{downloadVideo:K}=S({videoUrl:(0,z.q6)(o.url.generation),prompt:o.settings.prompt,onDownload:q});return{width:V,height:P,isSoundOn:R,isHovering:x,setIsHovering:m,isLoading:d,setIsLoading:u,isVideoLoading:p,refCallback:h,videoHasSound:y,toggleSound:D,handleUsePrompt:j,handleRecreateClick:w,handleAddSound:k,downloadVideo:K,isAddingSound:C,handleDeleteVideo:E}}},48812:function(e,t,s){s.d(t,{q:function(){return C}});var l=s(27573),a=s(50294),n=s(88146),r=s(8699),i=s(68255),o=s(73173),c=s(10665),d=s(7609),u=s(46793),x=s(27185),m=s(14671),p=s(51788),h=s(41225),f=s(42636),v=s(56928),g=s(30142),_=s(33764),N=s(14955),j=s(84474),w=s(26685);let b={text_to_video:"Text to Video",image_to_video:"Image to Video",video_to_audio:"Video to Audio"},E=e=>{let{aspectRatio:t,model:s,variation:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col items-start gap-2 self-stretch",children:[(0,l.jsx)("h4",{className:"font-medium text-neutral-101 dark:text-neutral-white",children:"Settings"}),(0,l.jsxs)("div",{className:"flex flex-wrap items-start gap-6 self-stretch text-sm",children:[s&&(0,l.jsxs)("div",{className:"flex w-[120px] flex-col items-start gap-1",children:[(0,l.jsx)("h6",{className:"text-neutral-61 dark:text-neutral-41",children:"Model"}),(0,l.jsx)("span",{className:"text-neutral-101 dark:text-neutral-white",children:s.name})]}),t&&(0,l.jsxs)("div",{className:"flex w-[120px] flex-col items-start gap-1",children:[(0,l.jsx)("h6",{className:"text-neutral-61 dark:text-neutral-41",children:"Aspect Ratio"}),(0,l.jsx)("span",{className:"text-neutral-101 dark:text-neutral-white",children:t})]}),a&&(0,l.jsxs)("div",{className:"flex w-[120px] flex-col items-start gap-1",children:[(0,l.jsx)("h6",{className:"text-neutral-61 dark:text-neutral-41",children:"Variation"}),(0,l.jsx)("span",{className:"text-neutral-101 dark:text-neutral-white",children:b[a]})]})]})]})};var y=s(94904),k=s(70571),S=s(92425),I=s(80317),T=s(21741),O=s(28821),z=s(54375);let A=e=>{let{modelUsed:t,uuid:s,prompt:a,downloadUrl:n,handleDelete:r,onDownload:i}=e,o=(0,y.useUserStoreContext)()(e=>e.user),{download:d}=(0,I.dY)(),{incrementExports:u}=(0,T.X)(),x=async()=>{let e=await (0,z.mD)(n);d(n,(0,O.o)({name:[null==o?void 0:o.name,a,s],extension:null==e?void 0:e.ext}),0,{},{onSuccess:()=>{null==i||i(t,a),u("video")}})};return(0,l.jsxs)("div",{className:"flex items-center justify-between self-stretch border-b border-neutral-11 py-3 pl-3 pr-2 dark:border-neutral-81",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(S.Y,{className:"size-8"}),(0,l.jsx)("h4",{className:"font-medium text-neutral-101 dark:text-neutral-white",children:null==o?void 0:o.name})]}),(0,l.jsxs)(k.z$,{children:[(0,l.jsx)(k.pm,{className:"w-fit bg-neutral-white p-[7px]",lightVariant:"light-v1",darkVariant:"dark-v1",size:"sm",children:(0,l.jsx)(c.Oqj,{className:"size-[18px] rotate-90"})}),(0,l.jsxs)(k.Yy,{align:"end",children:[(0,l.jsxs)(k.KK,{onClick:x,children:[(0,l.jsx)(c.r74,{className:"size-5 text-neutral-61 dark:text-neutral-31"}),(0,l.jsx)("div",{children:"Download"})]}),(0,l.jsxs)(k.KK,{onClick:r,children:[(0,l.jsx)(c.XHJ,{className:"size-5 text-neutral-61 dark:text-neutral-31"}),(0,l.jsx)("div",{children:"Delete"})]})]})]})]})},C=e=>{let{videos:t,onDownload:s,promptToBeUsed:b,closeModal:y,hasReferenceImage:k,aspectRatio:S,model:I,handleUsePrompt:T,handleUseImage:O,handleRecreateClick:z,handleAddSound:C,isAddingSound:R,isRecreating:D,currentVideoIndex:V,setCurrentVideoIndex:P,variation:G}=e,[,U]=(0,r.m9)(),M=t[V],{videoHasSound:F}=(0,g.J)(M),{uuid:L,url:X}=M,{handleDeleteVideo:q}=(0,_.b)(M);return(0,l.jsxs)("div",{className:"flex flex-1 items-center self-stretch",children:[(0,l.jsx)("div",{className:"flex flex-1 items-center gap-3 self-stretch px-4 py-16",children:(0,l.jsx)(w.i,{getId:e=>"".concat(e.id),getVideoPoster:e=>(0,j.q6)(e.url.thumbnail),getVideoUrl:e=>(0,j.q6)(e.url.generation),getVideoAspectRatio:e=>{var t,s,l;return null!==(l=null!==(s=null===(t=e.settings.video_params)||void 0===t?void 0:t.aspect_ratio)&&void 0!==s?s:e.settings.aspect_ratio)&&void 0!==l?l:""},videoHasSound:F,videos:t,currentVideoIndex:V,setCurrentVideoIndex:P})}),(0,l.jsx)("div",{className:"flex flex-col items-start justify-center self-stretch py-16 pr-4",children:(0,l.jsxs)("div",{className:"flex w-[309px] flex-1 flex-col items-end overflow-y-auto rounded-[18px] bg-neutral-white dark:bg-neutral-91",children:[(0,l.jsx)(A,{modelUsed:I.name,uuid:L,prompt:b,downloadUrl:(0,j.q6)(X.generation),handleDelete:()=>q(()=>y()),onDownload:s}),(0,l.jsxs)("div",{className:(0,i.cn)("scrollbar-v2-no-track flex h-full max-h-[calc(100vh-16px-64px-57px-184px-64px)] flex-1 flex-col items-center gap-6 self-stretch overflow-y-auto p-4",{"max-h-[calc(100vh-16px-64px-57px-184px-64px-16px-72px)]":!F}),children:[(0,l.jsxs)("div",{className:"flex flex-col items-start gap-3 self-stretch text-neutral-101 dark:text-neutral-white",children:[b&&(0,l.jsxs)("div",{className:"flex flex-col items-start gap-2 self-stretch",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between self-stretch",children:[(0,l.jsx)("h4",{className:"font-medium",children:"Prompt"}),(0,l.jsx)(d.zx,{variant:"ghost-secondary",size:"icon-sm",onClick:()=>{b&&(U(b),m.Am.success("Prompt copied to clipboard"))},children:(0,l.jsx)(c.kdO,{className:"size-[18px]"})})]}),(0,l.jsx)(p.c,{prompt:b,className:"max-h-[min(250px,calc(100vh-16px-64px-57px-16px-32px-8px-12px-20px-24px-76px-184px-64px-16px))]"})]}),G===N.c.IMAGE_TO_VIDEO&&k&&(0,l.jsxs)("div",{className:"flex flex-col items-start gap-2 self-stretch",children:[(0,l.jsx)("h4",{className:"font-medium",children:"Reference Image"}),(0,l.jsx)("div",{className:"relative h-[120px] w-full rounded-[10px] bg-neutral-11 dark:bg-neutral-81",children:(0,l.jsx)(a.default,{src:(0,j.q6)(X.thumbnail),className:"object-contain",alt:"Reference Image",fill:!0})})]})]}),(0,l.jsx)(E,{aspectRatio:S,model:I,variation:G})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4 self-stretch py-4",children:[(0,l.jsxs)("div",{className:"flex flex-col items-start gap-2 self-stretch px-4",children:[(0,l.jsx)("h6",{className:"self-stretch font-medium text-neutral-black dark:text-neutral-white",children:"Quick Actions"}),(0,l.jsx)("div",{className:"",children:(0,l.jsx)(d.zx,{size:"none",variant:"secondary",className:"flex h-[68.5px] w-[89px] flex-col gap-2 rounded-lg py-2",asChild:!0,children:(0,l.jsxs)(n.default,{href:"".concat(f.H7.VIDEO_EDITOR,"?video=").concat(encodeURIComponent((0,j.q6)(X.generation))),onClick:()=>{localStorage.setItem(h.F.VIDEO_EDITOR_ENTRY_SOURCE,v.Z.MY_CREATIONS)},children:[(0,l.jsx)("div",{className:"flex size-6 shrink-0 items-center justify-center",children:(0,l.jsx)(o.dY,{className:"size-5"})}),(0,l.jsx)("span",{className:"text-xs font-semibold",children:"Edit"})]})})})]}),!F&&(0,l.jsxs)("div",{className:"flex flex-col items-start gap-2 self-stretch px-4",children:[(0,l.jsx)("h6",{className:"self-stretch font-medium text-neutral-black dark:text-neutral-white",children:"Enhancement"}),(0,l.jsx)("div",{className:"flex items-center justify-stretch self-stretch",children:(0,l.jsx)(d.zx,{variant:"outline-secondary",size:"md",className:"flex flex-1 gap-2",onClick:C,children:R?(0,l.jsx)(x.Spinner,{className:"size-5"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.nYG,{}),(0,l.jsx)("p",{children:"Add Sound"})]})})})]}),(0,l.jsxs)("div",{className:"flex flex-col items-start gap-2 self-stretch px-4",children:[(0,l.jsx)("h6",{className:"self-stretch font-medium text-neutral-101 dark:text-neutral-white",children:"Use"}),(0,l.jsxs)("div",{className:"flex items-center justify-stretch gap-3 self-stretch",children:[(0,l.jsx)(d.zx,{variant:"outline-secondary",size:"md",className:"flex-1",onClick:T,children:"Prompt"}),(0,l.jsx)(d.zx,{variant:"outline-secondary",size:"md",className:"flex-1",onClick:O,children:"Image"})]})]}),(0,l.jsx)(u.i,{variant:"v2"}),(0,l.jsx)(d.zx,{variant:"primary",size:"xl",className:"w-[calc(100%-32px)]",onClick:z,children:D?(0,l.jsx)(x.Spinner,{className:"size-5"}):"Recreate"})]})]})})]})}},27948:function(e,t,s){s.d(t,{l:function(){return n}});var l=s(30142),a=s(33764);let n=e=>{let{video:t,modalSettings:s}=e;return{...(0,a.b)(t,s),...(0,l.J)(t,s)}}},93264:function(e,t,s){s.d(t,{E:function(){return o}});var l=s(30629),a=s(78293),n=s(66910);let r=(e,t)=>{let s=new FormData;return s.append("id",e),s.append("prompt",t),s.append("variation","video_to_audio"),s},i=async(e,t)=>{let s=r(e,t);return a.p.post("".concat(n.TG.VIDEO_SOUND),{body:s},{throwOnError:!0})},o=function(){let{options:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.useMutation)({mutationFn:async e=>{let{videoUuid:t,videoPrompt:s}=e;return i(t,s)},...e})}},90883:function(e,t,s){s.d(t,{l:function(){return p}});var l=s(45608),a=s(94904),n=s(50499),r=s(90244),i=s(93330),o=s(41225),c=s(76820),d=s(35350),u=s(75555),x=s(71133),m=s(58414);let p=()=>{let e=(0,a.useUserStoreContext)()(e=>e.user),{data:t}=(0,c.jE)(),{aggregator:s}=(0,m.O)(),{generationTool:p}=(0,x.I)(),{studioName:h}=(0,u.p)(),{page:f,source:v,userStatus:g,userPlan:_,userPlanPeriod:N}=(0,d.T)();return(a,c)=>{var d;let u=Number(localStorage.getItem(o.F.GEN_TILL_EXPORT)),x=(0,n.G)(null!=c?c:""),m=Number(null!==(d=localStorage.getItem(o.F.TOKENS_CONSUMED))&&void 0!==d?d:0);s.log(r.H0.export.withProperties({export_all:!1,page_name:f,user_account_status:g,user_plan:_,user_plan_period:N,feature:i.L.AI_VIDEO_GENERATED,app_name:l.i.IMAGINE,email:null==e?void 0:e.email,distinct_id:null==e?void 0:e.id,source:v,tokens_remaining:null==t?void 0:t.total,gen_till_export:u,model_used:a,prompt_text:x.promptText1,prompt_text_2:x.promptText2,prompt_text_3:x.promptText3,tool_name:p,studio_name:h,tokens_till_export:m})),localStorage.removeItem(o.F.GEN_TILL_EXPORT),localStorage.removeItem(o.F.TOKENS_CONSUMED)}}},30142:function(e,t,s){s.d(t,{J:function(){return u}});var l=s(41179),a=s(7653),n=s(14671),r=s(32138),i=s(68988),o=s(93264),c=s(45902),d=s(21865);let u=(e,t)=>{var s;let u=(0,l.useQueryClient)(),[x,m]=(0,a.useState)(!1),{vagErrorHandler:p}=(0,c.a)(),{mutateAsync:h}=(0,o.E)(),f=(0,d.nX)(e),v=(0,d.jr)(e),g=(0,r.Kb)(null!==(s=Number(e.settings.style_id))&&void 0!==s?s:0).default_audio_support;return{videoHasSound:v||g,isAddingSound:x,handleAddSound:async()=>{m(!0);try{await h({videoUuid:e.uuid,videoPrompt:f}),u.invalidateQueries({queryKey:[i.lk.VIDEO_GENERATED]}),t?t.setCurrentVideoIndex(0):n.Am.success("Your request to add sound has been successfully received.",{duration:2e3})}catch(e){p(e)}finally{m(!1)}}}}},33764:function(e,t,s){s.d(t,{b:function(){return f}});var l=s(7653),a=s(72987),n=s(14671),r=s(65535),i=s(13697),o=s(32138),c=s(38783),d=s(48354),u=s(3742),x=s(36962),m=s(84474),p=s(67728),h=s(21865);let f=(e,t)=>{var s;let{uuid:f,url:v}=e,g=(0,m.q6)(v.thumbnail),_=(0,m.q6)(v.generation),N=(0,h.vP)(e),{textToVideo:j}=(0,x.Td)()(e=>e.defaultSettings),w=j.modelListId,b=(0,o.Kb)(N?Number(N):w),E=(0,o.Kb)(null!==(s=b.fallback_model_id)&&void 0!==s?s:w),y={uuid:f,image:g,video:_},[k,S]=(0,l.useState)(!1),I=(0,l.useMemo)(()=>b.archived?E:b,[b,E]),T=(0,c.c)(),{formHook:O}=(0,i.G)(),z=I.is_image_guidance_disabled,A=(0,h.nX)(e),C=async()=>{S(!0);let s=new URLSearchParams(window.location.search),l={...T,model:I,prompt:e.settings.prompt,enhance_prompt:!!e.settings.is_enhance,aspect_ratio:e.settings.aspect_ratio};s.set(a.u.RECREATE,"true"),s.set(a.u.GENERATE,"true"),e.settings.aspect_ratio&&s.set(r.l$.ASPECT_RATIO,e.settings.aspect_ratio),O.reset({...l,recreate:!0});try{if(!z){let e=await fetch(g).then(e=>e.blob()),t=(0,p.RJ)(e);if(!t)throw Error("Fallback to default");s.set(a.u.IMAGE,t)}window.history.replaceState({},"","".concat(window.location.pathname,"?").concat(s.toString()))}catch(e){O.reset(l)}finally{S(!1),null==t||t.closeModal()}},R=async()=>{try{if(y.image){let e=await fetch(y.image).then(e=>e.blob()),t=(0,p.RJ)(e);if(!t)throw Error("Fallback to default");let s=new URLSearchParams(window.location.search);s.set(a.u.IMAGE,t),window.history.replaceState({},"","".concat(window.location.pathname,"?").concat(s.toString()))}null==t||t.closeModal()}catch(e){n.Am.error("An error occurred")}},D=(0,u.XG)(),{mutate:V}=(0,d.N)();return{isPopulatingFormData:k,isImageGuidanceDisabled:z,modelUsed:b,modelToUse:I,videoProps:y,promptToBeUsed:A,handleRecreateClick:C,handleUsePrompt:()=>{A&&(O.setValue("prompt",A),O.setValue("should_focus",!0)),null==t||t.closeModal()},handleUseImage:R,handleDeleteVideo:t=>{V(e.uuid,{onSuccess:()=>{D(),null==t||t(),n.Am.success("Your video is deleted successfully")},onError:()=>{n.Am.error("Something went wrong while deleting your video. please try again")}})}}}},21865:function(e,t,s){s.d(t,{jr:function(){return a},nX:function(){return l},vP:function(){return n}});let l=e=>{var t,s;return null!==(s=null!==(t=e.settings.enhanced_prompt)&&void 0!==t?t:e.settings.prompt)&&void 0!==s?s:""},a=e=>!!(e.settings.background_audio&&"true"===e.settings.background_audio),n=e=>{var t,s;return null!==(s=null===(t=e.settings.video_params)||void 0===t?void 0:t.style_id)&&void 0!==s?s:e.settings.style_id}}}]);