"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5150],{14664:function(e,t,r){r.d(t,{c:function(){return o}});var a=r(27573),s=r(68255),n=r(10665),l=r(7609),i=r(19454);let o=e=>{let{open:t,onOpenChange:r,title:o,description:c,showIcon:d=!0,iconProps:u={},onConfirm:m,onCancel:p=()=>{},cancelButtonText:g="Cancel",confirmButtonText:x="Continue"}=e,{className:f,...h}=u;return(0,a.jsx)(i.$E,{open:t,onOpenChange:r,children:(0,a.jsx)(i.Yk,{className:"size-full max-h-[min(calc(100vh-432px),160px)]  max-w-[min(calc(100vw-490px),460px)]",children:(0,a.jsxs)(i.DQ,{className:"flex flex-1 flex-col items-center justify-between p-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 self-stretch",children:[d&&(0,a.jsx)(n.zMQ,{className:(0,s.cn)("size-12 text-warning-61",f),...h}),(o||c)&&(0,a.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[o&&(0,a.jsx)("h3",{className:"font-semibold text-neutral-101 dark:text-neutral-white",children:o}),c&&(0,a.jsx)("p",{className:"text-sm text-neutral-71 dark:text-neutral-31",children:c})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 self-stretch",children:[(0,a.jsx)(l.zx,{size:"md",variant:"outline-secondary",className:"w-[120px]",onClick:p,children:g}),(0,a.jsx)(l.zx,{size:"md",variant:"primary",className:"w-[120px]",onClick:m,children:x})]})]})})})}},23937:function(e,t,r){r.d(t,{s:function(){return p}});var a=r(27573),s=r(10665),n=r(46793),l=r(7609),i=r(91968),o=r(7653),c=r(8699),d=r(36962),u=r(54375);let m=()=>{let e=(0,d.Td)()(e=>e.feedbackButtonConfig),t=(0,c.O_)(),r=(0,o.useRef)("");return{shouldShowFeedbackButton:(0,o.useMemo)(()=>!!t&&e.some(e=>{let{path:t,tallyId:a}=e;return!!(0,u.$O)(window.location.pathname,t,!0)&&(r.current=a,!0)}),[e,t]),openTallyPopup:()=>window.Tally.openPopup(r.current,{width:1024,autoClose:0,layout:"modal",overlay:!0})}},p=()=>{let{shouldShowFeedbackButton:e}=m(),{handleFeedbackOpen:t,feedbackButtonRef:r}=(0,i.p)();return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.zx,{ref:r,type:"button",variant:"secondary",size:"xs",className:"gap-2",onClick:t,children:[(0,a.jsx)(s.eLy,{className:"size-5"}),"Feedback"]}),(0,a.jsx)(n.i,{orientation:"vertical",variant:"v3",className:"hidden h-5 w-[1.5px] rounded-full group-data-[variant=v2]:block"})]}):null}},17515:function(e,t,r){r.d(t,{TextToVideoDropzoneBox:function(){return h}});var a=r(27573),s=r(7653),n=r(14664),l=r(41225),i=r(82721),o=r(61504),c=r(45902),d=r(37250),u=r(45432),m=r(85479),p=r(44687),g=r(68255),x=r(10665);let f=e=>{let{onDrop:t}=e,{setShowDropzone:r,showDropzone:s}=(0,d.D)(),{getRootProps:n,getInputProps:l,isDragActive:i}=(0,p.uI)({onDrop:t,noClick:!0}),o=()=>{r(!1)};return(0,a.jsxs)("div",{tabIndex:0,role:"button",...n(),className:(0,g.cn)("fixed inset-0 -z-10 flex items-center justify-center bg-slate-400 transition-all",{"z-50 bg-[#353535CC] dark:bg-[#353535CC]":i||s}),onClick:o,onMouseLeave:o,onKeyDown:o,children:[(0,a.jsx)("input",{...l()}),(i||s)&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,a.jsx)(x.c22,{}),(0,a.jsx)("h1",{className:"text-[32px] font-bold text-white",children:(0,a.jsx)("span",{children:"Drop image anywhere"})})]})]})},h=()=>{let{handleDropImage:e}=(0,i.R)(),{vagErrorHandler:t}=(0,c.a)(),{showDropzone:r,setPreviewAreaDisplayState:p,setShowDropzone:g,hasGeneratedPreviews:x}=(0,d.D)(),h=(0,o.d)(),v=(0,m.R)(e=>e.resetCollectionStore),b=(0,s.useRef)([]),_=(0,s.useCallback)(r=>{if(x){b.current=r,h.openModal();return}e({files:r,onError:e=>{t(e),g(!1)},onSuccess:()=>{g(!1)}})},[h,e,x,g,t]);return(0,a.jsxs)("div",{className:"z-[99]",children:[r&&(0,a.jsx)(f,{onDrop:_}),(0,a.jsx)(n.c,{title:"Discard Previews",description:"Are you sure you want to discard the previews?",open:h.isModalOpen,onOpenChange:h.setIsModalOpen,onCancel:()=>{h.closeModal()},onConfirm:()=>{v(),localStorage.removeItem(l.F.TEXT_TO_VIDEO_CHOSEN_PREVIEW_INDEX),p(u.E.NO_IMAGE),h.closeModal(),e({files:b.current,onError:e=>{t(e),g(!1)},onSuccess:()=>{g(!1)}}),b.current=[]}})]})}},82721:function(e,t,r){r.d(t,{A:function(){return v},R:function(){return b}});var a=r(27573),s=r(7653),n=r(81695),l=r(8699),i=r(72987),o=r(14671),c=r(10899),d=r(27688),u=r(4369),m=r(67728),p=r(97994),g=r(93800),x=r(14935);let f=e=>{let{selectedAspectRatio:t,supportedAspectRatios:r,onUploadImage:a,onCropImage:f,defaultBaseImage:h,supportedFileTypes:v=c.Em,dimensionRestrictions:b=x._,onDeleteImage:_=()=>{},onSearchParamsImageUpload:j=()=>{},...N}=e,[E,y]=(0,s.useState)(),[w,C]=(0,s.useState)(null!=h?h:null),I=null!=t?t:r[0],{aspect:S}=(0,p.i)({selectedAspectRatio:I,selectedFile:w,setCrop:y}),T=!(null==E?void 0:E.width)&&!(null==E?void 0:E.height),k=(0,n.useSearchParams)(),P=(0,l.O_)(),{loadImageAndComputeClosestAspectRatio:O}=(0,g.k)(),R=(0,s.useCallback)(e=>{C(e),a(e)},[a]),z=(0,s.useCallback)(()=>{let e=document.createElement("input");e.type="file",e.accept=v,e.style.display="none";let t=async t=>{var r;if(null===(r=e.files)||void 0===r?void 0:r.length){if(null===t.target)return;let r=e.files[0];if(r.size>d.Tb){o.ZP.error("File size is too large. Max file size is ".concat(d.Tb/1024/1024," MB"));return}let s=await (0,m.z0)(r);C(s),a(s)}else document.body.removeChild(e)};e.addEventListener("change",t),document.body.appendChild(e),e.click(),document.body.removeChild(e)},[a,v]),A=(0,s.useCallback)(async()=>{if(!E||!w)return;let e=await (0,m.cA)(E,w,S);await (0,m.X4)(e,b),f({image:w,croppedImage:e,aspectRatio:I})},[S,I,E,b,f,w]),V=(0,s.useCallback)(async()=>{if(!E||!w)return null;let e=await (0,m.cA)(E,w,S);return await (0,m.X4)(e,b),e},[S,E,b,w]),D=(0,s.useCallback)(()=>{C(null),y(void 0),_()},[_]),G=(0,s.useCallback)(async e=>{let{files:t,onSuccess:r=()=>{},onError:s=()=>{}}=e;if(t&&t.length>0){var n;if(t.length>1){s(Error("Please upload a single image"));return}let e=t[0];if(!e.type.startsWith("image/")){s(Error("Invalid file type. Please upload an image."));return}if(e.size>d.Tb){s(Error("File size is too large. Max file size is ".concat(d.Tb/1024/1024,"MB.")));return}let l=e instanceof DataTransferItem?null===(n=e.webkitGetAsEntry)||void 0===n?void 0:n.call(e):null;if(null==l?void 0:l.isDirectory){s(Error("Please upload an Image file"));return}let i=await (0,m.z0)(e);C(i),a(i),r()}else s(Error("No files provided"))},[a]);return(0,s.useEffect)(()=>{(async()=>{try{if(!w||!N.shouldEstimateClosestAspectRatio)return;let e=await O({image:w,aspectRatios:r.map(u.q)});N.onUpdateAspectRatio(e.value)}catch(e){}})()},[w,N.shouldEstimateClosestAspectRatio]),(0,s.useEffect)(()=>{(async()=>{let e=new URLSearchParams(k);try{let t=e.get(i.u.IMAGE);if(!t)return;let r=await (0,m.WW)(t);C(r),j(r)}catch(t){o.ZP.error("Failed to load image from search params"),e.delete(i.u.IMAGE),window.history.replaceState({},"","".concat(window.location.pathname,"?").concat(e.toString()))}})()},[j,k]),{crop:E,setCrop:y,isClient:P,aspect:S,baseImage:w,handleUploadImage:z,handleAddImageWithValidations:A,handleGetCroppedImageWithValidations:V,handleDeleteImage:D,handleDropImage:G,dimensionRestrictions:b,handleSetSelectedImage:R,hasNoSelection:T}},h=(0,s.createContext)(void 0),v=e=>{let{children:t,...r}=e,n=f({...r}),l=(0,s.useMemo)(()=>n,[n]);return(0,a.jsx)(h.Provider,{value:l,children:t})},b=()=>{let e=(0,s.useContext)(h);if(void 0===e)throw Error("useImageCropperContext must be used within an ImageCropperProvider");return e}},59504:function(e,t,r){r.d(t,{R:function(){return o},Y3:function(){return c}});var a=r(27573),s=r(7653),n=r(57582);let l=e=>(0,n.Ue)(t=>({userCampaignBasedFlags:e,updateFlagStatus:(e,r)=>t(t=>({userCampaignBasedFlags:t.userCampaignBasedFlags.map(t=>t.user_flag===e?{...t,status:r}:t)}))})),i=(0,s.createContext)(null),o=e=>{let{initialValues:t,children:r}=e,n=(0,s.useMemo)(()=>l(t),[t]),o=n(e=>e.userCampaignBasedFlags),c=n(e=>e.updateFlagStatus),d=(0,s.useMemo)(()=>({userCampaignBasedFlags:o,updateFlagStatus:c}),[o,c]);return(0,a.jsx)(i.Provider,{value:d,children:r})},c=()=>{let e=(0,s.useContext)(i);if(!e)throw Error("useUserCampaignBasedFlags must be used within a UserCampaignBasedFlagsProvider");return e}},91968:function(e,t,r){r.d(t,{B:function(){return g},p:function(){return x}});var a=r(27573),s=r(52083),n=r(7653),l=r(94904),i=r(64711);let o={PRODUCT_NAME:"free",TOKENS:0};var c=r(76820),d=r(94183),u=r(13498);let m=(0,n.createContext)(null),p=i.v.USERBACK_ACCESS_TOKEN,g=e=>{var t,r;let{children:i}=e,[g,x]=(0,n.useState)(null),[f,h]=(0,n.useState)(!1),v=(0,n.useRef)(null),b=(0,l.useUserStoreContext)()(e=>e.user),_=(0,d.y)(),j=(0,c.jE)(),N=null!==(r=null===(t=j.data)||void 0===t?void 0:t.total)&&void 0!==r?r:0;(0,n.useEffect)(()=>((async()=>{x(await (0,s.Z)(p,{autohide:!1}))})(),()=>{null==g||g.close()}),[g]),(0,n.useEffect)(()=>{if(j.isLoading&&!f)return;let e=()=>{if(v.current){let e=document.querySelector("div.userback-controls"),t=v.current.getBoundingClientRect();if(0===t.width||0===t.height||!e)return!1;let r=e.getBoundingClientRect(),a=window.innerWidth-t.right-210,s=t.height+t.top+r.height/2+3,n="userback-alignment-style",l=document.getElementById(n);return l||((l=document.createElement("style")).id=n,document.head.appendChild(l)),l.textContent="\n          #userback_button_container[modal=true][isopen=true] .userback-controls {\n            right: ".concat(a,"px !important;\n            top: ").concat(s,"px !important;\n            left: auto !important;\n          }\n        "),!0}return!1};return(()=>{if(e()){window.addEventListener("resize",e);return}let t=()=>{e()?window.addEventListener("resize",e):requestAnimationFrame(t)};requestAnimationFrame(t)})(),()=>{window.removeEventListener("resize",e)}},[j.isLoading,f]),(0,n.useEffect)(()=>{let e=e=>{let t=e.target,r=document.querySelector("#userback_button_container");(null==r?void 0:r.contains(t))&&(null==g||g.close(),h(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[g]);let E=(0,n.useCallback)(()=>{if(g){if(b){var e,t,r,a;let s,n,l,i,c;let d=(0,u.Ub)();d&&([s,n,l,i,c]=d),g.identify(b.id,{name:b.name,email:b.email,currentStatus:_.currentStatus?_.currentStatus:"",isSubscriptionActive:_.isSubscriptionActive?"true":"false",isPendingUpgrade:_.isPendingUpgrade?"true":"false",isPendingDowngrade:_.isPendingDowngrade?"true":"false",productName:(null===(t=_.subscribedPriceItem)||void 0===t?void 0:null===(e=t.StripeProduct)||void 0===e?void 0:e.name)?null===(a=_.subscribedPriceItem)||void 0===a?void 0:null===(r=a.StripeProduct)||void 0===r?void 0:r.name:o.PRODUCT_NAME,tokens:null!=N?N:o.TOKENS,billingInterval:_.billingInterval?_.billingInterval:"",isStripeFailed:_.isStripeFailed?"true":"false",isStripeCanceled:_.isStripeCanceled?"true":"false",userPersona:(null==s?void 0:s.answers)?String(s.answers):"",initialGoal:(null==n?void 0:n.answers)?String(n.answers):"",cadence:(null==l?void 0:l.answers)?String(l.answers):"",mediaType:(null==i?void 0:i.answers)?String(i.answers):"",members:(null==c?void 0:c.answers)?String(c.answers):""})}g.open(),h(!0)}},[g,b,_,N]),y=(0,n.useMemo)(()=>({userback:g,handleFeedbackOpen:E,feedbackButtonRef:v,setIsUserbackFormVisible:h}),[g,E]);return(0,a.jsx)(m.Provider,{value:y,children:i})},x=()=>{let e=(0,n.useContext)(m);if(!e)throw Error("useUserback must be used within a UserbackProvider");return e}},94309:function(e,t,r){r.d(t,{$:function(){return d}});var a=r(27573),s=r(26066),n=r(81695),l=r(23903),i=r(7609),o=r(16105),c=r(57872);let d=()=>{let e=(0,n.usePathname)(),t=(0,c.w)();return(0,a.jsx)(i.zx,{variant:"secondary-color",size:"xs",onClick:()=>{let r=null==e?void 0:e.split("/")[1];s.Z.set(l.y.SIGN_UP_CTA,"".concat(r,"-").concat(o._P.SIGNIN_BUTTON)),t({pathname:e})},children:"Sign in"})}},48287:function(e,t,r){r.d(t,{F:function(){return c}});var a=r(27573),s=r(10665),n=r(94904),l=r(7609),i=r(94309),o=r(94183);let c=e=>{let{onUpgradeClick:t=()=>{}}=e,{isSubscribedToUnlimitedPlan:r}=(0,o.y)(),c=(0,n.useUserStoreContext)()(e=>e.user);return r?null:c?(0,a.jsxs)(l.zx,{size:"xs",variant:"secondary-color",className:"gap-2",onClick:t,children:[(0,a.jsx)(s.CEn,{className:"size-5"})," Upgrade"]}):(0,a.jsx)(i.$,{})}},27688:function(e,t,r){var a,s,n,l,i,o,c,d;r.d(t,{$5:function(){return l},Cs:function(){return s},Kz:function(){return m},Tb:function(){return p},U9:function(){return n},gs:function(){return a},nC:function(){return u}}),(i=a||(a={})).UPLOAD="upload",i.GENERATE="generate";let u=[{label:"Upload Image",value:"upload"},{label:"Generate Image",value:"generate"}];(o=s||(s={})).DRAGGABLE="draggable",o.DRAGGING="dragging",o.ERROR="error",o.LOADING="loading",o.UPLOADED="uploaded";let m=10,p=10485760;(c=n||(n={})).DEFAULT="default",c.LOADING="loading",c.ERROR="error",c.GENERATED="generated",(d=l||(l={})).INSPIRATION="inspiration",d.UPLOAD="upload",d.GENERATE="generate"},35117:function(e,t,r){r.d(t,{o:function(){return p}});var a=r(7653),s=r(83057),n=r(61504),l=r(73868),i=r(3742),o=r(64932),c=r(47495),d=r(84474),u=r(68887),m=r(82561);let p=()=>{var e;let t=(0,i.wE)({enabled:!0}),r=(0,i.XG)(),p=(0,a.useRef)(!1),g=(0,u.z)(t.data,e=>e.assets),x=(0,d.Nj)(g),{data:f,isFetching:h}=(0,o.I)({refetchInterval:s.mR,enabled:x}),{hasStatusChanged:v}=(0,l.M)({processingAssets:f,isFetching:h}),b=(0,n.d)(!1),[_,j]=(0,a.useState)(-1),{filteredFinishedVideos:N,filteredFinishedVideosIndexMap:E}=(0,a.useMemo)(()=>{let e=g.filter(e=>{let{code:t,settings:r}=e;return t===c._.FINISHED||"true"===r.background_audio&&(t===c._.PROCESSING||t===c._.PENDING)});return{filteredFinishedVideos:e,filteredFinishedVideosIndexMap:e.reduce((e,t,r)=>{let{uuid:a}=t;return e.set(a,r)},new Map)}},[g]);return(0,a.useEffect)(()=>{g&&v&&!p.current&&(p.current=!0,r())},[r,g,v]),{videos:g,filteredFinishedVideos:N,filteredFinishedVideosIndexMap:E,getAllVideosStatusQuery:t,modalHandler:b,currentVideoIndex:_,setCurrentVideoIndex:j,pendingVideosCount:null!==(e=null==f?void 0:f.length)&&void 0!==e?e:0,updateProcessingVideosCache:(e,t)=>{var r;let a=(0,m.bH)(t),s=[...null!==(r=null==e?void 0:e.assets)&&void 0!==r?r:[],a];return{...e,assets:s}}}}},99076:function(e,t,r){r.d(t,{q:function(){return h}});var a=r(94904),s=r(90244),n=r(41225),l=r(65535),i=r(57872),o=r(99319),c=r(45902),d=r(60839),u=r(37250),m=r(45432),p=r(58414),g=r(66910),x=r(85479),f=r(39016);let h=()=>{let{mutateAsync:e,isLoading:t}=(0,d.L)(f.j.TEXT_TO_IMAGE),r=(0,o.O)("textToImageVideoGen"),{setPreviewAreaDisplayState:h}=(0,u.D)(),v=(0,i.w)(),b=(0,a.useUserStoreContext)()(e=>e.user),{aggregator:_}=(0,p.O)(),j=(0,x.R)(e=>e.completeImageGenerationLoadingOnGivenCollection),N=(0,x.R)(e=>e.completeImageGenerationWithErrorOnGivenCollection),E=(0,x.R)(e=>e.addImageToGivenCollectionWithLoading),y=(0,x.R)(e=>e.createCollectionWithSettings),w=(0,x.R)(e=>e.resetCollectionStore),C=(0,x.R)(e=>e.setImageLoadingOnGivenCollection),{vagErrorHandler:I}=(0,c.a)(),S=async(t,r)=>{let a=E(r,void 0);try{var l,i;let o=await e({data:t,isPremium:!0});if(!o)throw Error("Processing stopped");_.log(s.H0.sync_generated.withProperties({tokens_consumed:Number(null!==(l=o.cost)&&void 0!==l?l:0),distinct_id:null==b?void 0:b.id,email:null==b?void 0:b.email}));let c=localStorage.getItem(n.F.TOKENS_CONSUMED);localStorage.setItem(n.F.TOKENS_CONSUMED,String(Number(null!==(i=o.cost)&&void 0!==i?i:0)+Number(c))),j({image:o,imageId:a.imageId,collectionId:r})}catch(e){N({imageId:a.imageId,collectionId:r}),I(e)}},T=async(e,t)=>{await Promise.all(Array.from({length:e.num_images}).map(async(r,a)=>{await S(e,t),await new Promise(e=>setTimeout(e,1e4*a))}))};return{handleGeneratePreviewImages:async e=>{if(!b){v({searchParams:{[l.l$.GENERATE_PREVIEW]:"true"}});return}let t=(0,g.SN)(e.prompt,e.style.tag),a={...r,aspect_ratio:e.aspect_ratio,prompt:null!=t?t:e.prompt};w(),localStorage.removeItem(n.F.TEXT_TO_VIDEO_CHOSEN_PREVIEW_INDEX),h(m.E.GENERATION_PREVIEW);let{collectionId:s}=y(a);T(a,s)},isLoadingPreviewImages:t,handleVariatePreviewImages:async e=>{w(),localStorage.removeItem(n.F.TEXT_TO_VIDEO_CHOSEN_PREVIEW_INDEX);let{collectionId:t}=y(e.settings);T(e.settings,t)},handleSingleFailedImageRetry:async(t,a)=>{if(!t.images.find(e=>e.id===a))throw Error("Image not found");let l={...r,aspect_ratio:t.settings.aspect_ratio,prompt:t.settings.prompt};C(a,!0,t.id);try{var i,o;let r=await e({data:l,isPremium:!0});if(!r)throw Error("Processing stopped");_.log(s.H0.sync_generated.withProperties({tokens_consumed:Number(null!==(i=r.cost)&&void 0!==i?i:0),distinct_id:null==b?void 0:b.id,email:null==b?void 0:b.email}));let c=localStorage.getItem(n.F.TOKENS_CONSUMED);localStorage.setItem(n.F.TOKENS_CONSUMED,String(Number(null!==(o=r.cost)&&void 0!==o?o:0)+Number(c))),j({image:r,imageId:a,collectionId:t.id})}catch(e){N({imageId:a,collectionId:t.id}),I(e)}}}}},64932:function(e,t,r){r.d(t,{I:function(){return c}});var a=r(965);r(7653);var s=r(83057),n=r(94904),l=r(68988),i=r(47495),o=r(55364);let c=function(){let{enabled:e=!0,refetchInterval:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,n.useUserStoreContext)()(e=>e.user);return(0,a.useQuery)({queryKey:[l.lk.VIDEO_PROCESSING],queryFn:async()=>(await (0,o.Z)({status:i.l.PROCESSING})).data,select:e=>e.assets,enabled:!!r&&e,refetchInterval:t,staleTime:s.dV})}},44804:function(e,t,r){r.d(t,{C:function(){return _}});var a=r(27573),s=r(46793),n=r(23937),l=r(45699),i=r(90244),o=r(16105),c=r(11473),d=r(41225),u=r(43456),m=r(48287),p=r(75186),g=r(35350),x=r(2516),f=r(94183),h=r(21624),v=r(58414),b=r(14507);let _=e=>{let{triggerVariant:t}=e,{aggregator:r}=(0,v.O)(),{page:_,source:j,userStatus:N,userPlan:E,userPlanPeriod:y}=(0,g.T)(),{setUpgradeModalParams:w}=(0,b.i)(e=>({setUpgradeModalParams:e.setUpgradeModalParams})),{shouldHideCreditUsage:C}=(0,x.G)(),{isSubscribedToUnlimitedPlan:I}=(0,f.y)(),S={page_name:_,source:j,user_account_status:N,user_plan:E,user_plan_period:y};return(0,a.jsxs)(h.j.Item,{className:"gap-2",variant:"v2",children:[(0,a.jsx)(n.s,{}),C&&(0,a.jsx)(p.L,{variant:"v2",trigger:c.U.UPGRADE_V2,triggerVariant:t}),(0,a.jsx)(m.F,{onUpgradeClick:()=>{w({isOpen:!0,upgradeablePlanNames:u.M}),localStorage.setItem(d.F.ADD_TO_CART_CTA,o.ZH.INSUFFICIENT_TOKEN),r.log(i.H0.click.withProperties({...S,trigger:c.U.UPGRADE_V2,variant:t}))}}),!I&&(0,a.jsx)(s.i,{orientation:"vertical",variant:"v3",className:"h-5 w-[1.5px] rounded-full"}),(0,a.jsx)(l.D,{dropdownMenuContentProps:{alignOffset:-8,sideOffset:16}})]})}},21110:function(e,t,r){r.d(t,{W:function(){return i}});var a=r(27573),s=r(93351),n=r(35238),l=r(13711);let i=e=>{let{controllerArgs:t,variants:r="v1"}=e,{field:i}=(0,s.bc)(t);return"v2"===r?(0,a.jsxs)("label",{htmlFor:"enhance-prompt",className:"flex cursor-pointer items-center justify-between bg-neutral-white px-3.5 py-2.5 dark:bg-neutral-81",children:[(0,a.jsx)("span",{className:"select-none text-sm",children:"Prompt enhancer"}),(0,a.jsx)(n.L,{id:"enhance-prompt",checked:i.value,onCheckedChange:i.onChange})]}):(0,a.jsxs)("div",{className:"flex items-center justify-between pb-4 pt-2",children:[(0,a.jsx)(l.n,{children:"Enhance Prompt"}),(0,a.jsx)(n.L,{checked:i.value,onCheckedChange:i.onChange})]})}},23576:function(e,t,r){r.d(t,{$:function(){return n}});var a=r(27573),s=r(68255);let n=e=>{let{shouldCollapse:t}=e;return(0,a.jsx)("div",{className:(0,s.cn)("pointer-events-none h-px w-[332px] shrink-0 opacity-0 transition-all duration-300",{"w-0":t})})}},29050:function(e,t,r){r.d(t,{ToolEditorLayoutBody:function(){return l}});var a=r(27573);r(7653);var s=r(22051),n=r(23576);let l=e=>{let{children:t,navbar:r,...l}=e;return(0,a.jsxs)("div",{className:"relative isolate flex size-full overflow-hidden transition-all duration-500",children:[l.hasSidebar&&(0,a.jsx)(n.$,{shouldCollapse:!l.isSidebarOpen}),(0,a.jsxs)("div",{className:"ml-auto flex size-full flex-col items-end gap-2 overflow-hidden pr-0.5 transition-all duration-500",children:[r,(0,a.jsx)("div",{className:"relative size-full overflow-hidden transition-all duration-500",children:(0,a.jsx)("div",{className:"flex size-full flex-col items-stretch overflow-y-auto overflow-x-hidden pb-32 transition-all duration-500",id:s.q.DASHBOARD_SCROLL_AREA,children:t})})]})]})}},6337:function(e,t,r){r.d(t,{$:function(){return h}});var a=r(27573),s=r(7653),n=r(68255),l=r(29050),i=r(80646),o=r(21624),c=r(23576),d=r(88146),u=r(10665),m=r(7609),p=r(46793),g=r(27044);let x=e=>{let{children:t}=e;return(0,a.jsxs)(g.GenericAccordionTrigger,{className:"flex items-center justify-start gap-2 px-0 py-2 text-base",children:[(0,a.jsx)("div",{className:"flex size-8 items-center justify-center",children:(0,a.jsx)(g.GenericAccordionTriggerIcon,{className:"size-8",children:(0,a.jsx)(u.v4q,{className:"size-[18px] cursor-pointer stroke-[1.5]"})})}),(0,a.jsx)("span",{className:"font-semibold",children:t})]})},f=s.forwardRef((e,t)=>{let{children:r,className:s,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)("relative flex h-full gap-4 overflow-hidden bg-neutral-11 dark:bg-neutral-101",s),...l,ref:t,children:r})});f.displayName="ToolEditorLayout.Root";let h={Root:f,Body:l.ToolEditorLayoutBody,Sidebar:{Root:e=>{let{children:t}=e,{isSidebarOpen:r}=(0,i.useSidebarContext)();return(0,a.jsx)("aside",{className:(0,n.cn)("text-to-image-sidebar absolute inset-y-4 left-4 z-50 flex h-[calc(100%-32px)] w-[var(--tool-sidebar-width)] shrink-0 flex-col items-start overflow-hidden rounded-2xl bg-neutral-white shadow-[0px_10px_20px_0px_rgba(0,0,0,0.08)] dark:bg-neutral-91",{"h-12 shadow-none":!r}),children:t})},Header:e=>{let{children:t,backHref:r}=e,{toggleSidebar:s}=(0,i.useSidebarContext)();return(0,a.jsxs)("div",{className:"flex w-full items-center justify-between rounded-2xl bg-neutral-white p-2 dark:bg-neutral-91",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.zx,{variant:"ghost-secondary",size:"icon-sm",asChild:!0,children:(0,a.jsx)(d.default,{href:r,prefetch:!0,children:(0,a.jsx)(u.V4d,{className:"size-[18px] rotate-180 stroke-[1.5]"})})}),(0,a.jsx)(p.i,{orientation:"vertical",className:"h-[18px] w-[1.5px] rounded-full "}),(0,a.jsx)("div",{className:"px-1",children:(0,a.jsx)("h1",{className:"font-semibold",children:t})})]}),(0,a.jsx)(m.zx,{variant:"ghost-secondary",size:"icon-sm",onClick:s,children:(0,a.jsx)(u.W5x,{className:"size-[18px] rotate-180 stroke-[1.5]"})})]})},Accordion:{Root:e=>{let{children:t,...r}=e;return(0,a.jsx)("div",{className:"scrollbar-v2--alt w-full overflow-y-auto overflow-x-hidden",children:(0,a.jsx)(g.GenericAccordion,{type:"multiple",className:"w-[316px] min-w-[316px]",...r,children:t})})},Item:e=>{let{children:t,value:r,title:s}=e;return(0,a.jsxs)(g.GenericAccordionItem,{value:r,className:"px-4 py-0 shadow-none",children:[(0,a.jsx)(x,{children:s}),(0,a.jsx)(g.GenericAccordionContent,{className:"mt-0",children:t})]})}}},Navbar:{Root:e=>{let{children:t}=e,{isSidebarOpen:r}=(0,i.useSidebarContext)();return(0,a.jsxs)(o.j.Root,{className:"sticky top-0 z-10 flex h-auto items-center bg-neutral-11/90 pb-2 pr-4 pt-4 backdrop-blur-[6px] transition-all duration-500 dark:bg-neutral-101/90",children:[(0,a.jsx)(c.$,{shouldCollapse:r}),t]})},Start:e=>{let{children:t}=e;return(0,a.jsx)(o.j.Start,{className:"gap-4",children:t})},End:e=>{let{children:t}=e;return(0,a.jsx)(o.j.End,{className:"gap-3",children:t})},RootWithoutSidebar:e=>{let{children:t}=e;return(0,a.jsx)(o.j.Root,{className:"sticky top-0 z-10 flex h-auto items-center bg-neutral-11/90 pb-2 pr-4 pt-4 backdrop-blur-[6px] transition-all duration-500 dark:bg-neutral-101/90",children:t})}}}},73478:function(e,t,r){r.d(t,{PersistTextToVideoValues:function(){return d}});var a=r(7653),s=r(93351),n=r(8699),l=r(13697),i=r(32138),o=r(61780),c=r(36962);let d=()=>{let e=(0,n.O_)(),{textToVideo:t}=(0,c.Td)()(e=>e.defaultSettings),r=(0,i.I4)(t.modelListId),{formHook:d}=(0,l.G)(),u=(0,s.qo)({control:d.control}),m=(0,o.ZO)()(e=>e.persistTextToVideoSetting);return(0,a.useEffect)(()=>{if(!e||!u)return;let t=u.model;m({...u,model:null!=t?t:r})},[u,r,m,e]),null}},15255:function(e,t,r){r.d(t,{TextToVideoImageCropperProvider:function(){return u}});var a=r(27573),s=r(7653),n=r(93351),l=r(82721),i=r(13697),o=r(33339),c=r(37250),d=r(45432);let u=e=>{let{children:t}=e,{formHook:r}=(0,i.G)(),u=(0,o.T)(r),{supportedAspectRatios:m,setPreviewAreaDisplayState:p,shouldGeneratePreview:g,isImageGuidanceDisabled:x}=(0,c.D)(),f=(0,n.qo)({control:r.control,name:"aspect_ratio"}),h=(0,s.useCallback)(e=>{u.current.setValue("image",e),u.current.setValue("generate_preview",!1),u.current.setValue("has_uploaded_custom_image",!0),p(d.E.IMAGE_CROPPER)},[u,p]),v=(0,s.useCallback)(e=>{u.current.setValue("croppedImage",e.croppedImage),u.current.setValue("image",e.image),u.current.setValue("aspect_ratio",e.aspectRatio)},[u]),b=(0,s.useCallback)(()=>{u.current.setValue("image",""),u.current.setValue("croppedImage",""),u.current.setValue("has_uploaded_custom_image",!1),!x&&g&&u.current.setValue("generate_preview",!0),p(d.E.NO_IMAGE)},[u,x,p,g]),_=(0,s.useCallback)(e=>{u.current.setValue("aspect_ratio",e)},[u]);return(0,a.jsx)(l.A,{supportedAspectRatios:m,selectedAspectRatio:f,onUploadImage:h,onSearchParamsImageUpload:h,onCropImage:v,onDeleteImage:b,shouldEstimateClosestAspectRatio:!0,onUpdateAspectRatio:_,children:t})}},45432:function(e,t,r){r.d(t,{E:function(){return a}});let a={IMAGE_CROPPER:"image-cropper",GENERATION_PREVIEW:"generation-preview",SELECTED_PREVIEW:"selected-preview",NO_IMAGE:"no-image"}},50402:function(e,t,r){r.d(t,{TextToVideoPromptBox:function(){return eF}});var a=r(27573),s=r(41179),n=r(26066),l=r(81695),i=r(7653),o=r(93351),c=r(23903),d=r(72987),u=r(23611),m=r(50499),p=r(81682),g=r(68255),x=r(7609),f=r(34297),h=r(27185);let v=e=>{let{promptFormHook:t,disabled:r=!1,onFocusComplete:s,previewComponent:n,shouldFocus:l,placeholder:c="What will you imagine?",showLoader:d=!1,tags:u,tools:m,generateCTA:v,tokenComponent:b=null}=e,_=(0,i.useRef)(null),j=(0,o.bc)({name:t.name,control:t.formHook.control}),N=(0,i.useCallback)(()=>{setTimeout(()=>{let e=document.activeElement===_.current;if(_.current&&!e){_.current.focus();let e=_.current.value.length;_.current.setSelectionRange(e,e),_.current.scrollTop=_.current.scrollHeight}},10)},[]),{ref:E,...y}=j.field;return(0,i.useEffect)(()=>{l&&(N(),null==s||s())},[l,N,s]),(0,a.jsx)("div",{role:"button",tabIndex:0,"aria-label":"prompt",onClick:e=>{var t;(null===(t=e.target)||void 0===t?void 0:t.dataset.eventId)!=="submit"&&N()},onKeyDown:()=>{},className:"block size-full cursor-text rounded-2xl bg-neutral-white p-4 shadow-[0px_12px_48px_0px_rgba(0,0,0,0.60)] backdrop-blur-[7px] transition-all duration-500 dark:bg-neutral-91/90",children:(0,a.jsxs)("div",{className:(0,g.cn)("flex size-full flex-col gap-2 transition-opacity duration-500",{"pointer-events-none opacity-30":r}),children:[n,(0,a.jsx)(p.Z,{disabled:r,maxLength:f.c,className:"scrollbar-v2--alt w-full resize-none border-none bg-transparent p-0 text-sm text-neutral-101 placeholder:text-neutral-61 placeholder:transition-colors placeholder:duration-500 focus:ring-0 dark:text-neutral-white dark:placeholder:text-neutral-51",onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey){var t,r;e.preventDefault(),null===(r=e.currentTarget)||void 0===r||null===(t=r.form)||void 0===t||t.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}},placeholder:c,onFocus:N,...y,ref:e=>{_.current=e,E(e)},maxRows:7}),(0,a.jsx)("div",{className:"flex h-5 items-center gap-1 px-2",children:u}),(0,a.jsxs)("div",{className:"flex h-9 gap-2",children:[(0,a.jsx)("div",{className:"flex w-full items-center gap-2",children:m}),b,null!=v?v:(0,a.jsx)(x.zx,{type:"submit",variant:"ai","data-event-id":"submit",size:"sm",className:"w-[122px] shrink-0",children:d?(0,a.jsx)(h.Spinner,{className:"size-4"}):"Generate"})]})]})})};var b=r(14671),_=r(13210),j=r(64711),N=r(90244),E=r(16105),y=r(41225),w=r(40747),C=r(32412),I=r(82721),S=r(13697),T=r(1963),k=r(99076),P=r(35117),O=r(33339),R=r(35350),z=r(80014),A=r(37950),V=r(78851),D=r(94183),G=r(68988),M=r(45902),L=r(58414),U=r(26393),F=r(74497),W=r(30743),H=r(37250),B=r(45432),X=r(85479),q=r(73173),K=r(10665),$=r(41477),Z=r(14664),Y=r(61504),Q=r(49590),J=r(99999);let ee=e=>{let{id:t,src:r,aspectRatio:s,isLoading:n=!1,isFailed:l=!1,onSelectImage:i,onRetrySingleImage:o}=e,{width:c,height:d}=(0,J.O)(s),u=d>c;return l&&!n?(0,a.jsxs)("button",{type:"button",className:"flex aspect-square w-full flex-col items-center justify-center gap-1.5 overflow-hidden rounded bg-surface-tertiary",onClick:o,"aria-label":"Retry image generation",children:[(0,a.jsx)(q.Oe,{className:"size-6 stroke-[1.5]"}),(0,a.jsx)("span",{className:"text-label-sm font-medium",children:"Try Again"})]}):(0,a.jsx)("div",{className:"group relative flex aspect-square w-full items-center justify-center overflow-hidden rounded bg-surface-tertiary",children:n?(0,a.jsx)(Q.S3,{variant:"spinner",className:"h-auto w-full bg-transparent dark:bg-transparent",style:{aspectRatio:"".concat(c,"/").concat(d)}}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{id:t,className:(0,g.cn)("group flex w-full shrink-0",{"h-full w-auto":u}),style:{aspectRatio:"".concat(c,"/").concat(d)},children:(0,a.jsx)("img",{alt:"Preview",src:r,className:"size-full object-contain"})}),(0,a.jsx)("button",{className:"absolute inset-0 z-0 flex items-center justify-center bg-black/50 opacity-0 transition-opacity duration-300 group-hover:opacity-100","aria-label":"Select Image",type:"button",onClick:i}),(0,a.jsx)("div",{className:"light",children:(0,a.jsx)($.z,{size:"sm",variant:"none",type:"button",className:"absolute left-1/2 top-1/2 z-10 -translate-x-1/2 -translate-y-1/2 border border-secondary text-neutral-white opacity-0 transition-opacity duration-300 group-hover:opacity-100 active:-translate-y-1/2",onClick:i,children:"Use image"})})]})})},et=e=>{let{collection:t}=e,{formHook:r}=(0,S.G)(),{resetCollectionStore:s,setSelectedImage:n,setSelectedCollection:l}=(0,X.R)(e=>({resetCollectionStore:e.resetCollectionStore,setSelectedImage:e.setSelectedImage,setSelectedCollection:e.setSelectedCollection})),i=(0,Y.d)(),{setPreviewAreaDisplayState:o}=(0,H.D)(),{handleVariatePreviewImages:c,handleSingleFailedImageRetry:d}=(0,k.q)(),u=(e,a)=>{null==l||l(t),null==n||n(e.id),o(B.E.SELECTED_PREVIEW),r.setValue("image",e.src),r.setValue("croppedImage",e.src),localStorage.setItem(y.F.TEXT_TO_VIDEO_CHOSEN_PREVIEW_INDEX,a.toString())};return(0,a.jsxs)("div",{className:"flex flex-col items-start justify-center gap-2 self-stretch",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between self-stretch",children:[(0,a.jsx)("h6",{className:"text-label-md font-medium text-secondary",children:"Choose an image to use as a reference for your video."}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)($.z,{size:"icon-sm",variant:"icon-ghost",type:"button",onClick:()=>{r.setValue("has_used_image_variation",!0),c(t)},"aria-label":"Variate",children:(0,a.jsx)(q.jS,{className:"size-4 stroke-[1.5]"})}),(0,a.jsx)($.z,{size:"icon-sm",variant:"icon-ghost",type:"button",onClick:i.openModal,"aria-label":"Close preview",children:(0,a.jsx)(K.aMB,{className:"size-4 stroke-[1.5]"})})]})]}),(0,a.jsx)("div",{className:"flex items-start justify-between gap-3 self-stretch rounded-lg bg-surface-secondary p-3",children:t.images.map((e,r)=>(0,a.jsx)(ee,{id:e.id,src:e.src,aspectRatio:t.settings.aspect_ratio,isLoading:e.isLoading,isFailed:e.isFailed,onSelectImage:()=>u(e,r+1),onRetrySingleImage:()=>{d(t,e.id)}},e.id))}),(0,a.jsx)(Z.c,{open:i.isModalOpen,onOpenChange:i.setIsModalOpen,title:"Discard Previews",description:"Are you sure you want to close? This will discard the current previews.",onCancel:()=>{i.closeModal()},onConfirm:()=>{s(),localStorage.removeItem(y.F.TEXT_TO_VIDEO_CHOSEN_PREVIEW_INDEX),o(B.E.NO_IMAGE),i.closeModal()}})]})};var er=r(68148),ea=r(43812),es=r(67728);let en={minWidth:10,minHeight:10},el=()=>{let{formHook:e}=(0,S.G)(),{isClient:t,crop:r,aspect:s,setCrop:n,handleDeleteImage:l}=(0,I.R)(),c=(0,o.qo)({control:e.control,name:"image"}),[d,u]=(0,i.useState)("");(0,i.useEffect)(()=>{let e="";return(async()=>{if(c){let t=await (0,es.ug)(c);u(e=(0,es.RJ)(t))}})(),()=>{URL.revokeObjectURL(e)}},[c]);let m=(0,ea.a)(e=>e.isProcessing);return c&&t?m?(0,a.jsxs)("div",{className:"pointer-events-none relative flex h-[257px] items-center justify-center self-stretch rounded-lg bg-surface-secondary",children:[(0,a.jsx)("img",{src:d,alt:"uploaded",className:"max-h-full"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:(0,a.jsx)(h.Spinner,{className:"size-6 text-neutral-white"})})]}):(0,a.jsxs)("div",{className:"relative flex h-[257px] items-center justify-center self-stretch rounded-lg bg-surface-secondary px-3",children:[(0,a.jsx)(er.ZP,{crop:r,aspect:s,keepSelection:!0,className:"max-h-[257px]",minWidth:en.minWidth,minHeight:en.minHeight,onChange:(e,t)=>n(t),children:(0,a.jsx)("img",{src:d,alt:"uploaded"})}),(0,a.jsx)(x.zx,{type:"button",size:"icon-md",variant:"ghost-secondary",className:"absolute right-2 top-2",onClick:l,"aria-label":"Delete image",children:(0,a.jsx)(K.aMB,{className:"size-[18px]"})})]}):null},ei=e=>{let{collection:t}=e,{width:r,height:s}=(0,J.O)(t.settings.aspect_ratio),n=(0,X.R)(e=>e.selectedImageId),l=(0,X.R)(e=>e.setSelectedImage),o=(0,X.R)(e=>e.resetCollectionStore),c=(0,Y.d)(),{formHookRef:d}=(0,S.G)(),{setPreviewAreaDisplayState:u}=(0,H.D)(),m=(0,i.useMemo)(()=>t.images.find(e=>e.id===n),[t.images,n]);return m?(0,a.jsxs)("div",{className:"relative flex h-[257px] items-center justify-center self-stretch rounded-lg bg-surface-secondary",children:[(0,a.jsx)($.z,{className:"absolute left-2 top-2 z-10",variant:"icon-ghost",size:"icon-sm",type:"button",onClick:()=>{u(B.E.GENERATION_PREVIEW),null==l||l(void 0)},"aria-label":"Back to generated images",children:(0,a.jsx)(K.Y4O,{className:"size-[18px]"})}),(0,a.jsx)($.z,{className:"absolute right-2 top-2 z-10",variant:"icon-ghost",size:"icon-sm",type:"button",onClick:c.openModal,"aria-label":"Discard previews",children:(0,a.jsx)(K.aMB,{className:"size-[18px]"})}),(0,a.jsx)("div",{className:"group flex h-full shrink-0",style:{aspectRatio:"".concat(r,"/").concat(s)},children:(0,a.jsx)("img",{alt:"Preview",src:m.src,className:"size-full object-contain"})}),(0,a.jsx)(Z.c,{open:c.isModalOpen,onOpenChange:c.setIsModalOpen,title:"Discard Selected Preview",description:"Are you sure you want to close? This will discard the current preview.",onCancel:()=>{c.closeModal()},onConfirm:()=>{o(),u(B.E.NO_IMAGE),d.current.setValue("croppedImage",null),d.current.setValue("image",null),c.closeModal()}})]}):null},eo=()=>{let{previewAreaDisplayState:e,isImageGuidanceDisabled:t,shouldGeneratePreview:r}=(0,H.D)(),s=(0,X.R)(e=>e.collections),{formHook:n}=(0,S.G)(),l=(0,O.T)(n),o=(0,i.useMemo)(()=>s[0],[s]);return((0,i.useEffect)(()=>{t?l.current.setValue("generate_preview",!1):r&&l.current.setValue("generate_preview",!0)},[t,r,l]),e===B.E.IMAGE_CROPPER)?(0,a.jsx)(el,{}):e===B.E.GENERATION_PREVIEW&&o?(0,a.jsx)(et,{collection:o}):e===B.E.SELECTED_PREVIEW&&o?(0,a.jsx)(ei,{collection:o}):null},ec=e=>{let{showLoader:t=!1,disabled:r=!1}=e,{formHook:s}=(0,S.G)(),{hasNoSelection:n}=(0,I.R)(),{previewAreaDisplayState:l,isImageGuidanceDisabled:c,promptBoxCtaLabel:d,setPromptBoxCtaLabel:u}=(0,H.D)(),m=!!(0,o.qo)({name:"generate_preview",control:s.control}),p=l===B.E.IMAGE_CROPPER&&n;return(0,i.useEffect)(()=>{c?u("Generate"):m?m&&l===B.E.SELECTED_PREVIEW?u("Generate"):u("Preview"):u("Generate")},[c,l,u,m]),(0,a.jsx)(x.zx,{type:"submit",variant:"ai","data-event-id":"submit",size:"sm",className:"w-[122px] shrink-0",disabled:r||t||p,children:t?(0,a.jsx)(h.Spinner,{className:"size-4"}):d})};var ed=r(51953);let eu=e=>-1===e.id,em=e=>({id:e.id,title:eu(e)?void 0:e.title}),ep=()=>{let{formHook:e}=(0,S.G)(),t=(0,o.qo)({control:e.control,name:"style"}),r=(0,o.qo)({control:e.control,name:"camera"}),s=(0,o.qo)({control:e.control,name:"lighting"}),n=(0,i.useMemo)(()=>[em({id:t.id,title:t.style_name}),em({id:r.id,title:r.title}),em({id:s.id,title:s.title})],[r.id,r.title,s.id,s.title,t.id,t.style_name]);return(0,a.jsx)(a.Fragment,{children:n.map(e=>{let{id:t,title:r}=e;return!!r&&(0,a.jsx)(ed.k,{tag:r},"effect-tag-".concat(t,"-").concat(r))})})};var eg=r(46793),ex=r(55964),ef=r(46329);let eh=()=>{let{isImageGuidanceDisabled:e,setPreviewAreaDisplayState:t,hasGeneratedPreviews:r}=(0,H.D)(),s=(0,Y.d)(),n=(0,X.R)(e=>e.resetCollectionStore),{handleUploadImage:l}=(0,I.R)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ef.fX,{content:"Image to Video not available for this model",genericTooltipProps:{open:!!e&&void 0},children:(0,a.jsx)(x.zx,{type:"button",variant:"secondary",size:"icon-lg",disabled:e,onClick:r?s.openModal:l,"aria-label":"Add Image",children:(0,a.jsx)(K.pOD,{className:"size-[18px] stroke-[1.5]"})})}),(0,a.jsx)(Z.c,{title:"Discard Previews",description:"This action will replace the image and remove the existing previews.",open:s.isModalOpen,onOpenChange:s.setIsModalOpen,onCancel:()=>{s.closeModal()},onConfirm:()=>{n(),localStorage.removeItem(y.F.TEXT_TO_VIDEO_CHOSEN_PREVIEW_INDEX),t(B.E.NO_IMAGE),s.closeModal(),l()}})]})};var ev=r(50294),eb=r(57545),e_=r(70571);r(43757);let ej=e=>{let{children:t,video:r,poster:s}=e;return r?(0,a.jsx)(ef.fX,{content:(0,a.jsx)("video",{src:r,poster:s,className:"size-full rounded-2xl object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}),genericTooltipContentProps:{side:"right",sideOffset:22,className:"p-0 rounded-2xl size-[150px] border-2 border-neutral-white bg-neutral-white dark:border-neutral-81 dark:bg-neutral-81"},children:t}):t},eN=e=>{let{children:t}=e;return(0,a.jsx)(e_.z$,{modal:!1,children:t})},eE=e=>{let{children:t}=e;return(0,a.jsx)(e_.NB,{onClick:e=>e.stopPropagation(),type:"button",variant:"secondary",size:"sm",children:t})},ey=e=>{let{children:t}=e;return(0,a.jsx)(e_.Yy,{className:"w-[236px] rounded-2xl border-none",align:"start",sideOffset:8,children:t})},ew=e=>{let{children:t}=e;return(0,a.jsx)(e_.oY,{className:"text-neutral-71 dark:text-neutral-41",onClick:e=>e.stopPropagation(),children:t})},eC=e=>{let{children:t}=e;return(0,a.jsx)(e_.l,{children:t})},eI=e=>{let{children:t}=e;return(0,a.jsx)(e_.Pv,{onClick:e=>e.stopPropagation(),children:t})},eS=e=>{let{children:t,marginMultiplier:r}=e;return(0,a.jsx)(e_.vU,{className:"rounded-2xl border-none",style:{marginBottom:"".concat(60+36*r,"px")},sideOffset:8,onClick:e=>e.stopPropagation(),children:t})},eT=e=>{let{children:t}=e;return(0,a.jsx)(e_.oY,{className:"text-neutral-71 dark:text-neutral-41",onClick:e=>e.stopPropagation(),children:t})},ek=e=>{let{controllerArgs:t,defaultEffect:r,effects:s,getId:n,getIsSettingSelected:l,getName:i,getThumb:c,getVideoThumb:d}=e,{field:u}=(0,o.bc)(t);return(0,a.jsx)(eb.x,{type:"auto",size:"sm",className:"flex max-h-[360px] w-full flex-col overflow-hidden",children:s.map(e=>{let t=l(e),s=-1===n(e);return(0,a.jsx)(ej,{video:null==d?void 0:d(e),poster:c(e),children:(0,a.jsxs)(e_.KK,{onClick:()=>{u.onChange(t&&null!=r?r:e)},children:[s?(0,a.jsx)(K.XZC,{className:"size-5 rotate-90 stroke-[1.5]"}):(0,a.jsx)("div",{className:"size-5 overflow-hidden rounded bg-neutral-11 dark:bg-neutral-81",children:(0,a.jsx)(ev.default,{width:20,height:20,src:c(e),alt:i(e),className:"size-full rounded object-cover"})}),(0,a.jsx)("span",{className:"text-sm",children:i(e)}),t&&(0,a.jsx)(K.YeD,{className:"my-auto ml-auto  size-5 shrink-0 stroke-[1.5]"})]})},e.id)})})},eP=()=>{let{formHook:e}=(0,S.G)(),{defaultStyle:t,styles:r}=(0,H.D)(),{field:s}=(0,o.bc)({name:"style",control:e.control});return(0,a.jsxs)(eC,{children:[(0,a.jsxs)(eI,{children:[(0,a.jsx)(K.khU,{className:"size-5"})," ",(0,a.jsx)("span",{className:"line-clamp-1",children:"Styles"})]}),(0,a.jsxs)(eS,{marginMultiplier:3,children:[(0,a.jsx)(eT,{children:"Styles"}),(0,a.jsx)(ek,{defaultEffect:t,effects:r,controllerArgs:{name:"style",control:e.control},getId:e=>e.id,getIsSettingSelected:e=>{var t;return(null===(t=s.value)||void 0===t?void 0:t.id)===e.id},getName:e=>e.style_name,getThumb:e=>e.style_thumb})]})]})},eO=e=>{let{controllerArgs:t,effects:r,title:s,renderIcon:n,marginMultiplier:l}=e,{field:i}=(0,o.bc)(t);return(0,a.jsxs)(eC,{children:[(0,a.jsxs)(eI,{children:[n({className:"size-5"})," ",(0,a.jsx)("span",{className:"line-clamp-1",children:s})]}),(0,a.jsxs)(eS,{marginMultiplier:l,children:[(0,a.jsx)(eT,{children:s}),(0,a.jsx)(ek,{effects:r,controllerArgs:t,getId:e=>e.id,getIsSettingSelected:e=>{var t;return(null===(t=i.value)||void 0===t?void 0:t.id)===e.id},getName:e=>e.title,getThumb:e=>e.img,getVideoThumb:e=>e.videoUrl})]})]})},eR=()=>{let{formHook:e}=(0,S.G)(),{textToVideoCameraEffects:t,textToVideoLightingEffects:r}=(0,H.D)();return(0,a.jsxs)(eN,{children:[(0,a.jsxs)(eE,{children:[(0,a.jsx)(K.dLu,{className:"size-5 stroke-[1.5]"}),(0,a.jsx)("span",{className:"ml-2 text-sm font-semibold",children:"Effects"})]}),(0,a.jsxs)(ey,{children:[(0,a.jsx)(ew,{children:"Effects"}),(0,a.jsx)(eP,{}),(0,a.jsx)(eO,{marginMultiplier:2,title:"Lighting",effects:r,controllerArgs:{name:"lighting",control:e.control},renderIcon:e=>(0,a.jsx)(K.f3L,{...e})}),(0,a.jsx)(eO,{marginMultiplier:1,title:"Camera motion",effects:t,controllerArgs:{name:"camera",control:e.control},renderIcon:e=>(0,a.jsx)(K.ljp,{...e})})]})]})};var ez=r(7220),eA=r(21110),eV=r(35238);let eD=e=>{let{controllerArgs:t}=e,{field:r}=(0,o.bc)(t),{isImageGuidanceDisabled:s,hasUploadedCustomImage:n,hasGeneratedPreviews:l}=(0,H.D)(),i=s||n;return(0,a.jsx)(ef.fX,{content:s?"Preview isn’t supported for the selected model.":"Preview isn’t supported when using a custom image.",genericTooltipProps:{open:!!i&&void 0},children:(0,a.jsx)("div",{className:"bg-neutral-white px-3.5 py-2.5 dark:bg-neutral-81",children:(0,a.jsxs)("label",{htmlFor:"generate-preview",className:(0,g.cn)("flex cursor-pointer items-center justify-between gap-2",{"pointer-events-none opacity-50":s||n||l}),children:[(0,a.jsx)("span",{className:"select-none text-sm",children:"Preview"}),(0,a.jsx)(eV.L,{id:"generate-preview",checked:r.value,onCheckedChange:r.onChange})]})})})},eG=()=>{let{formHook:e}=(0,S.G)(),{isEnhancedPromptEnabled:t}=(0,H.D)();return(0,a.jsxs)(e_.z$,{modal:!1,children:[(0,a.jsx)(ez.xz,{asChild:!0,children:(0,a.jsx)(x.zx,{type:"button",variant:"secondary",size:"icon-lg",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(K.ewm,{className:"size-[18px] stroke-[1.5]"})})}),(0,a.jsxs)(e_.Yy,{className:"w-[236px] rounded-2xl border-none",align:"start",sideOffset:8,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)(e_.oY,{children:"Settings"}),t&&(0,a.jsx)(eA.W,{controllerArgs:{name:"enhance_prompt",control:e.control},variants:"v2"}),(0,a.jsx)(eD,{controllerArgs:{name:"generate_preview",control:e.control}})]})]})},eM=()=>{let{formHook:e}=(0,S.G)(),{defaultModel:t,isEnhancedPromptEnabled:r,textToVideoModels:s,supportedAspectRatios:n,hasGeneratedPreviews:l}=(0,H.D)(),i=s.filter(e=>!e.archived);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eh,{}),(0,a.jsx)(eg.i,{orientation:"vertical",variant:"v3",className:"h-3 w-[1.5px] opacity-50"}),(0,a.jsx)(ex.kk,{variant:"dropdown",controllerArgs:{name:"model",control:e.control},settings:i,defaultSetting:t,contentProps:{className:"text-to-image-models"}}),(0,a.jsx)(ex.oM,{variant:"dropdown",aspectRatios:n,className:"pb-4",controllerArgs:{name:"aspect_ratio",control:e.control},isEnabled:!l}),(0,a.jsx)(eR,{}),r&&(0,a.jsx)(eG,{})]})};var eL=r(31311);let eU=()=>{let{videoCost:e,previewCost:t}=(0,A.G)(),{promptBoxCtaLabel:r}=(0,H.D)(),s="Preview"===r?(0,a.jsxs)("span",{children:["Creating will consume ",e," ",eL.cA.PLURAL," with the current settings.",(0,a.jsx)("br",{}),"Previewing will use an additional ",t," ",eL.cA.PLURAL,"."]}):"Creating will use ".concat(null!=e?e:0," ").concat(eL.cA.PLURAL," at current settings");return(0,a.jsx)(ef.fX,{content:s,radius:"sm",genericTooltipContentProps:{className:"max-w-none",sideOffset:6},arrowProps:{show:!0},children:(0,a.jsx)(x.zx,{size:"icon-lg",type:"button",variant:"outline-secondary",className:"shrink-0 active:translate-y-0",asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(K.NlG,{className:"size-5 stroke-[2]"})})})})},eF=()=>{var e;let t=(0,s.useQueryClient)(),{formHook:r}=(0,S.G)(),p=(0,O.T)(r),{aggregator:g}=(0,L.O)(),{page:x,source:f,userStatus:h,userPlan:X,userPlanPeriod:q,email:K,tokenRemaining:$,id:Z}=(0,R.T)(),{videoCost:Y}=(0,A.G)(),Q=(0,U.u)(e=>e.setIsOpen),{isLegacyUser:J}=(0,D.y)(),ee=(0,z.i)(),{handleTextToVideoGeneration:et,isLoadingTextToVideoGeneration:er}=(0,V.i)(),{handleGeneratePreviewImages:ea}=(0,k.q)(),{promptBoxCtaLabel:es,previewAreaDisplayState:en}=(0,H.D)(),{handleGetCroppedImageWithValidations:el}=(0,I.R)(),ei=(0,l.useSearchParams)(),{vagErrorHandler:ed}=(0,M.a)(),{pendingVideosCount:eu,updateProcessingVideosCache:em}=(0,P.o)(),eg=X===u.Sz.UNLIMITED,ex=(0,o.qo)({control:r.control,name:"should_focus"}),ef=(0,o.cl)({control:r.control}),eh=J?C.WP:null!==(e=null==ee?void 0:ee.max_concurrent_video_generations)&&void 0!==e?e:C.vT,ev=async function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var l,i;if(!e.prompt)throw Error("Please enter a prompt");if("Preview"===es){ea(e),r.reset({...e,has_used_image_variation:!1});return}if(e.image&&!e.croppedImage){let t=await el();e.croppedImage=t}if(eu>=eh){b.ZP.error("Current plan limits ".concat(eh," concurrent generations. ").concat(eg?"":"Upgrade to increase."),{renderCta:eg?void 0:e=>(0,a.jsx)(_.a,{...e}),id:w.G});return}ei.get(d.u.GENERATE)?n.Z.set(c.y.SIGN_UP_CTA,E._P.VIDEO_DASHBOARD_GENERATE_BUTTON):n.Z.set(c.y.SIGN_UP_CTA,E._P.TEXT_TO_VIDEO);let o=localStorage.getItem(y.F.TEXT_TO_VIDEO_CHOSEN_PREVIEW_INDEX),u=(0,m.G)(e.prompt),p={ai_bot_used:s,aspect_ratio:e.aspect_ratio,camera_used:e.camera.title,upload_image:e.has_uploaded_custom_image,email:K,enhance_prompt:e.enhance_prompt,lightning_used:e.lighting.title,model_used:e.model.name,page_name:x,prompt_text:u.promptText1,prompt_text_2:u.promptText2,prompt_text_3:u.promptText3,source:f,style_used:e.style.style_name,user_account_status:h,user_plan:X,user_plan_period:q,tokens_remaining:$-Y,video_generation_tool:null!==(l=ei.get(d.u.TOOL))&&void 0!==l?l:"text-to-video",recreate:e.recreate,random_prompt_used:e.random_prompt_clicked,preview_mode:null!==(i=e.generate_preview)&&void 0!==i&&i,chosen_image_index:null!=o?o:"N/A",image_regeneration:e.has_used_image_variation,distinct_id:Z};et({data:e,onSuccess:r=>{t.setQueryData([G.lk.VIDEO_PROCESSING],t=>t?em(t,e):{assets:[]});let a=0;Array.isArray(r)&&(a=r.reduce((e,t)=>{var r;return e+(null!==(r=t.cost)&&void 0!==r?r:0)},0)),g.log(N.H0.video_generated.withProperties({...p,processing_status:"Successful",tokens_consumed:a}));let s=localStorage.getItem(y.F.TOKENS_CONSUMED);localStorage.setItem(y.F.TOKENS_CONSUMED,String(Number(null!=a?a:0)+Number(s)))},onError:e=>{g.log(N.H0.video_generated.withProperties({...p,processing_status:"Failure",processing_error:(0,W.extractVagErrorMessage)(e)}))},onSettled:()=>{var e;let t=null!==(e=localStorage.getItem(y.F.GEN_TILL_EXPORT))&&void 0!==e?e:0;localStorage.setItem(y.F.GEN_TILL_EXPORT,String(Number(t)+1)),localStorage.removeItem(y.F.TEXT_TO_VIDEO_CHOSEN_PREVIEW_INDEX)}});let v=en===B.E.SELECTED_PREVIEW;r.reset({...e,recreate:!1,random_prompt_clicked:!1,has_used_image_variation:!1,croppedImage:v?e.croppedImage:null})}catch(e){ed(e)}};return(0,i.useEffect)(()=>{p.current.setValue("should_focus",!0)},[p]),(0,a.jsx)("div",{className:"pointer-events-none absolute bottom-0 left-0 right-4 z-10 flex w-full shrink-0 items-center justify-center",children:(0,a.jsxs)("div",{className:"z-[1] flex w-full max-w-[min(1099px,100vw)] shrink-0 items-end justify-center gap-3 px-6 pb-10 pr-10 pt-[77px] transition-all duration-500",children:[(0,a.jsx)("div",{className:"pointer-events-auto block size-full",children:(0,a.jsx)("form",{className:"block size-full",onSubmit:r.handleSubmit(e=>ev(e,!1)),children:(0,a.jsx)(v,{tags:(0,a.jsx)(ep,{}),previewComponent:(0,a.jsx)(eo,{}),promptFormHook:{formHook:r,name:"prompt"},tokenComponent:(0,a.jsx)(eU,{}),placeholder:"Describe your video...",shouldFocus:ex,onFocusComplete:()=>{r.setValue("should_focus",!1)},tools:(0,a.jsx)(eM,{}),generateCTA:(0,a.jsx)(ec,{showLoader:er,disabled:en===B.E.GENERATION_PREVIEW&&!ef.isDirty})})})}),(0,a.jsx)(T.X,{handleGenerateImage:e=>{r.setValue("prompt",e),ev(r.getValues(),!0),Q(!1)},credits:0,botCtaProps:{className:"dark:bg-neutral-91/90 dark:backdrop-blur-[7px]",tooltipProps:{lightAssetUrl:(0,F.As)("/assets/images/imagine-bot/imagine-bot-text-to-video-light.webp",j.v.ASSETS_CDN),darkAssetUrl:(0,F.As)("/assets/images/imagine-bot/imagine-bot-text-to-video-dark.webp",j.v.ASSETS_CDN)}}})]})})}},63887:function(e,t,r){r.d(t,{TextToVideoTokenUsageConsentModal:function(){return V}});var a=r(27573),s=r(7653),n=r(93950),l=r(24162),i=r(82633),o=r(94098),c=r(41477),d=r(9950),u=r(50499),m=r(90244),p=r(41225),g=r(82721),x=r(13697),f=r(33339),h=r(35350),v=r(37950),b=r(78851),_=r(58414),j=r(36962),N=r(30743),E=r(50294),y=r(39101),w=r(72987),C=r(73173),I=r(32138),S=r(89953);let T=e=>{let{id:t,handleSaveUserPreferenceFlag:r}=e,n=(0,I.I4)(t),{formHookRef:l}=(0,x.G)(),[,i]=(0,y.v1)(w.u.GENERATE,y.AE),{setIsOpen:u}=(0,o.I)(),{computeTextToVideoModelCost:m}=(0,S.k)(),p=m(n),g=(0,s.useCallback)(()=>{r(),l.current.setValue("model",n),i(!0),u(!1)},[r,l,i,n,u]);return(0,a.jsxs)(c.z,{variant:"secondary",className:"h-auto py-3.5",onClick:g,children:[n.svg?(0,a.jsx)("div",{className:"[&>svg]:!size-5",dangerouslySetInnerHTML:{__html:n.svg}}):(0,a.jsx)(E.default,{width:20,height:20,src:n.thumb,alt:n.name,className:"size-full rounded-lg object-cover"}),n.name.split(" ").slice(0,2).join(" "),(0,a.jsx)(d.Separator,{className:"h-3 shrink-0 bg-fill-tertiary-hover",orientation:"vertical"}),(0,a.jsxs)("div",{className:"flex items-center gap-x-1",children:[p," ",(0,a.jsx)(C.zQ,{})]})]})},k=e=>{let{handleSaveUserPreferenceFlag:t}=e,{handleTextToVideoGeneration:r}=(0,b.i)(),{formHookRef:n}=(0,x.G)(),{setIsOpen:l}=(0,o.I)(),{low_cost_model_ids:i}=(0,j.Td)()(e=>e.textToVideoTokenConsumptionConsentConfig),{handleGetCroppedImageWithValidations:E}=(0,g.R)(),y=(0,f.T)(E),{aggregator:w}=(0,_.O)(),{page:C,source:I,userStatus:S,userPlan:k,userPlanPeriod:P,email:O,tokenRemaining:R,id:z}=(0,h.T)(),{videoCost:A}=(0,v.G)(),V=(0,s.useCallback)(async()=>{var e;t();let a=null===(e=n.current)||void 0===e?void 0:e.getValues();if(a.image&&!a.croppedImage){let e=await y.current();a.croppedImage=e}let s=(0,u.G)(a.prompt),i={ai_bot_used:!1,aspect_ratio:a.aspect_ratio,camera_used:a.camera.title,upload_image:a.has_uploaded_custom_image,email:O,enhance_prompt:a.enhance_prompt,lightning_used:a.lighting.title,model_used:a.model.name,page_name:C,prompt_text:s.promptText1,prompt_text_2:s.promptText2,prompt_text_3:s.promptText3,source:I,style_used:a.style.style_name,user_account_status:S,user_plan:k,user_plan_period:P,tokens_remaining:R-A,video_generation_tool:"text-to-image",recreate:!1,inspiration_used:!1,distinct_id:z};r({data:a,bypassCreditConsumptionConsent:!0,onSuccess:e=>{let t=0;Array.isArray(e)&&(t=e.reduce((e,t)=>{var r;return e+(null!==(r=t.cost)&&void 0!==r?r:0)},0)),w.log(m.H0.video_generated.withProperties({...i,processing_status:"Successful",tokens_consumed:t}));let r=localStorage.getItem(p.F.TOKENS_CONSUMED);localStorage.setItem(p.F.TOKENS_CONSUMED,String(Number(null!=t?t:0)+Number(r)))},onError:e=>{w.log(m.H0.video_generated.withProperties({...i,processing_status:"Failure",processing_error:(0,N.extractVagErrorMessage)(e)}))}}),l(!1)},[t,n,O,C,I,S,k,P,R,A,z,r,l,y,w]);return(0,a.jsxs)("div",{className:"flex w-full flex-col gap-y-4",children:[(0,a.jsx)(c.z,{variant:"warning",size:"lg",onClick:V,children:"Proceed"}),(0,a.jsxs)("div",{className:"flex items-center gap-x-4 px-6 text-body-sm",children:[(0,a.jsx)(d.Separator,{className:"flex-1"}),(0,a.jsx)("span",{children:"or"}),(0,a.jsx)(d.Separator,{className:"flex-1"})]}),(0,a.jsx)("p",{className:"text-label-lg font-medium",children:"Create via low cost model"}),(0,a.jsx)("div",{className:"grid w-full grid-cols-2 gap-x-2 tablet:gap-x-4",children:i.map(e=>(0,a.jsx)(T,{id:e,handleSaveUserPreferenceFlag:t},e))})]})};var P=r(68041);let O=e=>{let{hasDisabledTextToVideoCreditConsumptionConsentModal:t,setHasDisabledTextToVideoCreditConsumptionConsentModal:r}=e;return(0,a.jsxs)("div",{className:"flex w-full items-start gap-x-2 rounded-xl bg-surface-primary p-3",children:[(0,a.jsx)(P.X,{id:"dont-show-again",className:"mt-0.5",checked:t,onCheckedChange:e=>{r("indeterminate"!==e&&e)}}),(0,a.jsx)("label",{htmlFor:"dont-show-again",className:"font-medium tracking-[0.16px] text-secondary",children:"Don’t show this again for future requests"})]})};var R=r(93351);let z=()=>{let{formHook:e}=(0,x.G)(),t=(0,R.qo)({control:e.control,name:"model"});return(0,a.jsxs)("div",{className:"flex w-full flex-col items-center gap-y-1",children:[(0,a.jsx)("h2",{className:"text-heading-xs font-bold",children:"High Credits Usage Alert"}),(0,a.jsxs)("p",{className:"text-center text-body-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:t.name})," uses a significant amount of your credits balance. Would you like to proceed or change your model?"]})]})},A=e=>{let{hasDisabledTextToVideoCreditConsumptionConsentModal:t,setHasDisabledTextToVideoCreditConsumptionConsentModal:r}=e;return(0,a.jsxs)("div",{className:"flex w-full flex-col items-center gap-y-8",children:[(0,a.jsx)("div",{className:"w-fit rounded-full bg-surface-warning px-3 pb-[13px] pt-[11px] text-warning",children:(0,a.jsx)(C.lM,{})}),(0,a.jsx)(z,{}),(0,a.jsx)(O,{hasDisabledTextToVideoCreditConsumptionConsentModal:t,setHasDisabledTextToVideoCreditConsumptionConsentModal:r})]})},V=()=>{let{isOpen:e,setIsOpen:t}=(0,o.I)(e=>({isOpen:e.isOpen,setIsOpen:e.setIsOpen})),r=(0,l.T)("hasDisabledTextToVideoCreditConsumptionConsentModal"),c=(0,i.yH)(),[d,u]=(0,s.useState)(r),m=(0,s.useCallback)(()=>{d!==r&&c.mutate({name:"hasDisabledTextToVideoCreditConsumptionConsentModal",status:d})},[d,c,r]);return(0,a.jsx)(n.Vq,{open:e,onOpenChange:e=>{u(r),t(e)},children:(0,a.jsxs)(n.cZ,{className:"flex w-[calc(100vw-32px)] max-w-[459px] flex-col items-center gap-y-8 p-6 pt-8",children:[(0,a.jsx)(n.iK,{btnProps:{size:"icon-sm",className:"absolute right-4 top-4"}}),(0,a.jsx)(A,{hasDisabledTextToVideoCreditConsumptionConsentModal:d,setHasDisabledTextToVideoCreditConsumptionConsentModal:u}),(0,a.jsx)(k,{handleSaveUserPreferenceFlag:m})]})})}},88186:function(e,t,r){r.d(t,{TextToVideoTopbar:function(){return m}});var a=r(27573),s=r(88146),n=r(10665),l=r(7609),i=r(46793),o=r(96836),c=r(42636),d=r(44804),u=r(6337);let m=()=>(0,a.jsxs)(u.$.Navbar.RootWithoutSidebar,{children:[(0,a.jsx)(u.$.Navbar.Start,{children:(0,a.jsx)("div",{className:"flex h-12 items-center justify-between rounded-2xl bg-neutral-white p-2 pr-6 dark:bg-neutral-91",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.zx,{variant:"ghost-secondary",size:"icon-sm",asChild:!0,children:(0,a.jsx)(s.default,{href:c.H7.VIDEO_DASHBOARD,prefetch:!0,children:(0,a.jsx)(n.V4d,{className:"size-[18px] rotate-180 stroke-[1.5]"})})}),(0,a.jsx)(i.i,{orientation:"vertical",className:"h-[18px] w-[1.5px] rounded-full "}),(0,a.jsx)("div",{className:"px-1",children:(0,a.jsx)("h1",{className:"font-semibold",children:"Video Generation"})})]})})}),(0,a.jsx)(u.$.Navbar.End,{children:(0,a.jsx)(d.C,{triggerVariant:o.x.AI_VIDEO})})]})},37250:function(e,t,r){r.d(t,{D:function(){return y},TextToVideoSettingsProvider:function(){return E}});var a=r(27573),s=r(7653),n=r(93351),l=r(72987),i=r(24752),o=r(94904),c=r(14671),d=r(22051),u=r(13697),m=r(59504),p=r(57872),g=r(40323),x=r(32138),f=r(74188),h=r(36962),v=r(43812),b=r(45432);let _=[b.E.GENERATION_PREVIEW,b.E.SELECTED_PREVIEW],j=()=>{let[e,t]=(0,s.useState)(b.E.NO_IMAGE),[r,a]=(0,s.useState)("Generate"),{isEnabled:j}=(0,g.y)("enable_enhance_prompt"),[N,E]=(0,s.useState)(!1),{formHookRef:y,formHook:w}=(0,u.G)(),C=(0,p.w)(),I=(0,o.useUserStoreContext)()(e=>e.user),[S,T,k]=(0,n.qo)({name:["model","image","has_uploaded_custom_image"],control:w.control}),P=e===b.E.SELECTED_PREVIEW,O=(0,f.V)(),{isProcessingImage:R,setIsProcessingImage:z}=(0,v.a)(e=>({isProcessingImage:e.isProcessing,setIsProcessingImage:e.setIsProcessing})),{textToVideo:A}=(0,h.Td)()(e=>e.defaultSettings),V=!!T,D=S.is_image_guidance_disabled,G=!!A.generate_preview,M=_.includes(e),L=(0,h.Td)()(e=>e.textToVideoModels),{userCampaignBasedFlags:U}=(0,m.Y3)(),F=(0,s.useMemo)(()=>L.filter(e=>!e.restricted_campaign_id||U.some(t=>t.status&&t.campaign_id===e.restricted_campaign_id)),[L,U]),W=(0,h.Td)()(e=>e.textToVideoStyles),H=(0,h.Td)()(e=>e.textToVideoCameraEffects),B=(0,h.Td)()(e=>e.textToVideoLightingEffects),X=(0,x.I4)(A.modelListId),q=(0,x.T1)(A.styleListId),K=(0,s.useMemo)(()=>{let e=S.common_supported_aspect_ratios_for_i2v_and_t2v,t=S.supported_aspect_ratios_for_t2v,r=S.supported_aspect_ratios_for_i2v;return V?[...e,...r]:[...e,...t]},[S,V]);return(0,s.useEffect)(()=>{e===b.E.NO_IMAGE&&y.current.setValue("croppedImage",null)},[e,y]),(0,s.useEffect)(()=>{(async()=>{if(!T||P)return;if(!I){C();return}let e=w.getValues("aspect_ratio");if(K.includes(e))try{let{caption:e}=await O.mutateAsync({data:{image:T}});w.setValue("prompt",e);let t=new URLSearchParams(window.location.search);w.setValue("hasHitPromptCaptionApi","true"===t.get(l.u.GENERATE)),w.setValue("should_focus",!0)}catch(e){(0,i.H)(e),c.Am.error("Failed to caption image")}})()},[T]),(0,s.useEffect)(()=>{let e=y.current.getValues("aspect_ratio"),r=K.find(t=>t===e);if(!S||r)return;let a=!!y.current.getValues("image"),s=document.querySelector(d.j.TOAST_BAR);a&&(y.current.setValue("croppedImage",null),y.current.setValue("image",null),t(b.E.NO_IMAGE),s||c.Am.warning("The selected model does not support the aspect ratio in the added image. ".concat(M?"Please generate preview again":"Please reselect the image."))),y.current.setValue("aspect_ratio",K[0])},[y,K,S,M]),(0,s.useEffect)(()=>{D&&(M||V)&&(y.current.setValue("image",""),y.current.setValue("croppedImage",""),y.current.setValue("has_uploaded_custom_image",!1),t(b.E.NO_IMAGE),c.Am.warning("The selected model does not support image guidance. Please select a different model."))},[D,y,M,V]),(0,s.useEffect)(()=>{z(O.isLoading)},[O.isLoading,z]),{defaultModel:X,defaultStyle:q,isEnhancedPromptEnabled:j,isImageGuidanceDisabled:D,isImageSelected:V,styles:W,supportedAspectRatios:K,textToVideoCameraEffects:H,textToVideoLightingEffects:B,textToVideoModels:F,isProcessingImage:R,previewAreaDisplayState:e,setPreviewAreaDisplayState:t,shouldGeneratePreview:G,promptBoxCtaLabel:r,setPromptBoxCtaLabel:a,hasUploadedCustomImage:k,hasGeneratedPreviews:M,hasSelectedPreviewImage:P,showDropzone:N,setShowDropzone:E}},N=(0,s.createContext)(null),E=e=>{let{children:t}=e,r=j();return(0,a.jsx)(N.Provider,{value:r,children:t})},y=()=>{let e=(0,s.useContext)(N);if(null===e)throw Error("useTextToVideoSettingsContext must be used within a TextToVideoSettingsProvider");return e}},43812:function(e,t,r){r.d(t,{a:function(){return a}});let a=(0,r(57582).Ue)(e=>({isProcessing:!1,setIsProcessing:t=>e(()=>({isProcessing:t}))}))},85479:function(e,t,r){r.d(t,{R:function(){return a}});let a=(0,r(8832).h)(()=>!1)},68041:function(e,t,r){r.d(t,{X:function(){return c}});var a=r(27573),s=r(92999),n=r(7653),l=r(90408),i=r(52997);let o=(0,r(49289).j)("",{variants:{size:{sm:"size-4 rounded",md:"size-5 rounded-md",none:""}},defaultVariants:{size:"md"}}),c=n.forwardRef((e,t)=>{let{className:r,size:n,intermediate:c=!1,...d}=e;return(0,a.jsx)(s.fC,{ref:t,className:(0,i.cn)("group peer relative shrink-0 border border-tertiary focus-within:border-tertiary-hover focus-within:ring-offset-primary data-[state=checked]:border-none data-[state=checked]:bg-fill-inverse data-[state=checked]:text-primary hover:border-tertiary-hover data-[state=checked]:hover:bg-fill-inverse-hover focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-inverse-hover focus-visible:ring-offset-2 focus-visible:ring-offset-primary disabled:cursor-not-allowed disabled:border-tertiary-disabled data-[state=checked]:disabled:bg-fill-inverse-disabled",o({size:n}),r),...d,children:(0,a.jsx)(s.z$,{className:(0,i.cn)("absolute inset-0 flex items-center justify-center text-current"),children:c?(0,a.jsx)("div",{className:(0,i.cn)("h-0.5 w-[9px] rounded-full bg-[rgb(var(--content-primary-inverse))] group-disabled:bg-[rgb(var(--content-primary-disabled))]",{"w-2":"sm"===n})}):(0,a.jsx)(l.Y,{className:(0,i.cn)(" text-primary-inverse group-disabled:text-primary-inverse-disabled",{"size-4":"md"===n},{"size-3":"sm"===n})})})})});c.displayName=s.fC.displayName},93950:function(e,t,r){r.d(t,{$N:function(){return f},Be:function(){return h},Vq:function(){return c},a7:function(){return x},cZ:function(){return p},fK:function(){return g},iK:function(){return m}});var a=r(27573),s=r(67905),n=r(7653),l=r(34770),i=r(52997),o=r(41477);let c=s.fC;s.xz;let d=s.h_;s.x8;let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-overlay backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n})});u.displayName=s.aV.displayName;let m=e=>{let{btnProps:t={},iconClassname:r,...n}=e,{className:c,variant:d="ghost",size:u="icon-xs",...m}=t;return(0,a.jsx)(o.z,{type:"button",variant:d,size:u,className:c,asChild:!0,...m,children:(0,a.jsxs)(s.x8,{...n,children:[(0,a.jsx)(l.a,{className:(0,i.cn)("size-4 stroke-[1.5]",r)}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})})};m.displayName=s.x8.displayName;let p=n.forwardRef((e,t)=>{let{className:r,children:n,...l}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{}),(0,a.jsx)(s.VY,{ref:t,className:(0,i.cn)("fixed left-1/2 top-1/2 z-50 grid w-full -translate-x-1/2 -translate-y-1/2 gap-4 rounded-2xl border-none bg-primary outline-none ring-1 ring-primary drop-shadow-sm transition-all duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",r),...l,children:n})]})});p.displayName=s.VY.displayName;let g=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex items-center justify-between self-stretch border-b border-primary p-4 ",t),...r})};g.displayName="DialogHeader";let x=n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex h-full flex-1 flex-col gap-1 self-stretch",r),...s})});x.displayName="GenericModalBody";let f=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-label-lg font-semibold tracking-[0.16px] text-primary",r),...n})});f.displayName=s.Dx.displayName;let h=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-label-md text-secondary",r),...n})});h.displayName=s.dk.displayName},9950:function(e,t,r){r.r(t),r.d(t,{Separator:function(){return i}});var a=r(27573),s=r(20207),n=r(7653),l=r(52997);let i=n.forwardRef((e,t)=>{let{className:r,orientation:n="horizontal",decorative:i=!0,...o}=e;return(0,a.jsx)(s.f,{ref:t,decorative:i,orientation:n,className:(0,l.cn)("h-full w-px shrink-0 bg-surface-secondary",{"h-px w-full":"horizontal"===n},r),...o})});i.displayName=s.f.displayName}}]);