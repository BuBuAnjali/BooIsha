"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6230],{14664:function(e,t,r){r.d(t,{c:function(){return o}});var a=r(27573),n=r(68255),l=r(10665),s=r(7609),i=r(19454);let o=e=>{let{open:t,onOpenChange:r,title:o,description:c,showIcon:u=!0,iconProps:d={},onConfirm:m,onCancel:p=()=>{},cancelButtonText:x="Cancel",confirmButtonText:f="Continue"}=e,{className:h,...g}=d;return(0,a.jsx)(i.$E,{open:t,onOpenChange:r,children:(0,a.jsx)(i.Yk,{className:"size-full max-h-[min(calc(100vh-432px),160px)]  max-w-[min(calc(100vw-490px),460px)]",children:(0,a.jsxs)(i.DQ,{className:"flex flex-1 flex-col items-center justify-between p-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 self-stretch",children:[u&&(0,a.jsx)(l.zMQ,{className:(0,n.cn)("size-12 text-warning-61",h),...g}),(o||c)&&(0,a.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[o&&(0,a.jsx)("h3",{className:"font-semibold text-neutral-101 dark:text-neutral-white",children:o}),c&&(0,a.jsx)("p",{className:"text-sm text-neutral-71 dark:text-neutral-31",children:c})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 self-stretch",children:[(0,a.jsx)(s.zx,{size:"md",variant:"outline-secondary",className:"w-[120px]",onClick:p,children:x}),(0,a.jsx)(s.zx,{size:"md",variant:"primary",className:"w-[120px]",onClick:m,children:f})]})]})})})}},72525:function(e,t,r){r.d(t,{M:function(){return s}});var a=r(27573),n=r(65833),l=r(89343);let s=e=>{let{hasCategories:t=!0}=e;return(0,a.jsx)("div",{className:"flex items-center gap-x-2",children:t&&l.R.map((e,t)=>(0,a.jsx)(n.A,{className:"h-10 w-16 rounded-full"},"category_dashboard_skeleton_".concat(t)))})}},89343:function(e,t,r){r.d(t,{R:function(){return a},z:function(){return n}});let a=Array.from({length:3}),n=Array.from({length:20})},29818:function(e,t,r){r.d(t,{l:function(){return h}});var a=r(27573),n=r(56459),l=r(81695),s=r(7653),i=r(24752),o=r(46329),c=r(36962),u=r(88146),d=r(68255),m=r(7609),p=r(42636);let x={Root:e=>{let{children:t,className:r}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex w-[280px] flex-col items-center rounded-2xl bg-primary-61 p-2 pb-3",r),children:t})},TextWrapper:e=>{let{children:t,className:r}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col items-start gap-2 self-stretch px-1 pb-4 pt-2",r),children:t})},Image:e=>{let{className:t,src:r}=e;return(0,a.jsx)("div",{className:"flex h-[148px] items-center self-stretch rounded-lg",children:(0,a.jsx)("img",{src:r,alt:"Feature Tooltip",className:(0,d.cn)("size-full rounded-lg object-cover object-top",t)})})},Video:e=>{let{className:t,src:r,poster:n}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex h-[148px] items-center self-stretch rounded-lg",t),children:(0,a.jsx)("video",{className:(0,d.cn)("size-full rounded-lg object-cover object-top"),autoPlay:!0,muted:!0,loop:!0,playsInline:!0,poster:n,children:(0,a.jsx)("source",{src:r,type:"video/webm"})})})},Title:e=>{let{title:t,className:r}=e;return(0,a.jsx)("h6",{className:(0,d.cn)("font-semibold text-neutral-white",r),children:t})},Description:e=>{let{description:t,className:r}=e;return(0,a.jsx)("p",{className:(0,d.cn)("text-xs text-neutral-white",r),children:t})},CTAWrapper:e=>{let{children:t,className:r}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex items-center justify-end gap-2 self-stretch px-1",r),children:t})},CTA:e=>{let{children:t,className:r,href:n=p.H7.DASHBOARD,hasLink:l=!0,...s}=e;return(0,a.jsx)(m.zx,{size:"none",variant:"none",className:(0,d.cn)("flex h-[30px] items-center justify-center rounded-lg border border-neutral-white bg-neutral-white px-[13px] py-[6.5px] text-center text-xs font-semibold text-primary-61",r),asChild:l,...s,children:l?(0,a.jsx)(u.default,{href:n,children:t}):t})}},f=e=>{let{imageSrc:t,videoSrc:r,title:n,description:l,ctaText:s,ctaHref:i,rootClassName:o,videoClassName:c,imageClassName:u,textWrapperClassName:d,titleClassName:m,descriptionClassName:p,ctaWrapperClassName:f,ctaClassName:h}=e;return(0,a.jsxs)(x.Root,{className:o,children:[r&&(0,a.jsx)(x.Video,{src:r,poster:t,className:c}),t&&!r&&(0,a.jsx)(x.Image,{src:t,className:u}),(0,a.jsxs)(x.TextWrapper,{className:d,children:[(0,a.jsx)(x.Title,{title:n,className:m}),(0,a.jsx)(x.Description,{description:l,className:p})]}),s&&(0,a.jsx)(x.CTAWrapper,{className:f,children:(0,a.jsx)(x.CTA,{href:i,className:h,children:s})})]})},h=s.forwardRef((e,t)=>{let{children:r,genericTooltipProps:u,genericTooltipContentProps:d,genericTooltipTriggerProps:m,arrowProps:p,...x}=e,h=(0,l.useRouter)(),{delay:g}=(0,c.Td)()(e=>e.featureTooltips);return(0,s.useEffect)(()=>{try{x.imageSrc&&fetch(x.imageSrc),x.videoSrc&&fetch(x.videoSrc)}catch(e){(0,i.H)(e)}},[h,x.imageSrc,x.videoSrc]),(0,a.jsxs)(o.rT,{...u,delayDuration:g,disableHoverableContent:!1,children:[(0,a.jsx)(o._v,{...m,asChild:!0,children:r}),(0,a.jsxs)(o.ML,{...d,className:"rounded-2xl bg-transparent p-0 shadow-none",ref:t,children:[(0,a.jsx)(f,{...x}),(0,a.jsx)(n.Eh,{className:"-mt-px h-[9px] w-3.5 fill-primary-61"})]})]})});h.displayName="FeatureTooltip"},38578:function(e,t,r){r.d(t,{w:function(){return i}});var a=r(27573),n=r(7653),l=r(8699),s=r(68255);let i=e=>{let{src:t,alt:r,imageClassName:i,className:o}=e,[c,u]=(0,n.useState)(!1),d=(0,l.O_)();return(0,a.jsx)("div",{className:(0,s.cn)("relative size-full bg-neutral-11 pb-[100%] dark:bg-neutral-91",o),children:(0,a.jsx)("div",{className:(0,s.cn)("absolute inset-0 size-full transition-opacity duration-500",{"opacity-0":!c}),children:d&&(0,a.jsx)("img",{src:t,alt:r,className:(0,s.cn)("size-full object-cover object-center",i),onLoad:()=>{u(!0)}})})})}},24673:function(e,t,r){r.d(t,{f:function(){return h}});var a=r(27573),n=r(7653),l=r(93351),s=r(68255),i=r(88205),o=r(7609),c=r(46793),u=r(29818),d=r(22922),m=r(36962),p=r(54375),x=r(34297);let f=e=>{let t=e;return t.length>=x.c&&(t=t.slice(0,x.c)),t},h=e=>{let{formHook:t,name:r,textAreaProps:x,generateBtnRef:h,containersProps:g,customRandomPrompts:b,randomPromptClassName:v="",showFeatureTooltip:N=!0}=e,[y,j]=(0,n.useState)(!1),{ref:E,...A}=t.register(r),_=(0,l.qo)({control:t.control,name:r}),{featureTooltips:T,randomPromptLibrary:R}=(0,m.Td)()(e=>({featureTooltips:e.featureTooltips,randomPromptLibrary:e.randomPromptLibrary})),C=b||R;return(0,a.jsxs)("div",{className:"relative h-[76px] w-full rounded-[10px]",...g,children:[(0,a.jsx)(d.K,{size:"xl",darkVariant:"dark-v2",lightVariant:"light-v1",className:"size-full resize-none p-2 pl-3 indent-[38px] text-sm",placeholder:"Try something like “A cat flying in the sky wearing superman suit”",value:_,onScroll:e=>j(e.currentTarget.scrollTop>=10),onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey){var t;e.preventDefault(),null==h||null===(t=h.current)||void 0===t||t.click()}},...A,...x,onChange:e=>{let a=f(e.target.value);t.setValue(r,a,{shouldDirty:!0,shouldValidate:!0})},ref:e=>{E(e),(null==x?void 0:x.ref)&&x.ref(e)}}),!y&&(0,a.jsxs)("div",{className:(0,s.cn)("absolute left-3 top-2 mr-2 flex items-center gap-2 text-neutral-101 dark:text-neutral-white",v),children:[(0,a.jsx)(u.l,{...T.common.random_prompt,genericTooltipProps:{open:!!N&&void 0},children:(0,a.jsx)(o.zx,{size:"none",variant:"none",type:"button",className:"size-5",onClick:()=>{let e=null==C?void 0:C.paragraphs;if(!e)return;let a=(0,p.EN)(e.length),n=e[a];t.setValue(r,n.text,{shouldDirty:!0,shouldValidate:!0}),t.setValue("random_prompt_clicked",!0)},disabled:null==x?void 0:x.disabled,children:(0,a.jsx)(i.k,{className:"size-4"})})}),(0,a.jsx)(c.i,{variant:"v7",orientation:"vertical",className:"h-3.5 w-0.5 shrink-0 rounded-full"})]})]})}},22922:function(e,t,r){r.d(t,{K:function(){return i}});var a=r(27573),n=r(7653),l=r(68255),s=r(28234);let i=n.forwardRef((e,t)=>{let{className:r,lightVariant:n,darkVariant:i,size:o,...c}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("resize-none",(0,s.j)({className:r,lightVariant:n,darkVariant:i,size:o})),ref:t,...c})});i.displayName="TextArea"},16627:function(e,t,r){r.d(t,{L:function(){return a}});let a={UPLOAD:"Upload",GENERATE:"Generate",INSPIRATION:"Inspiration",TEXT_TO_IMAGE:"Text to Image - V2"}},71069:function(e,t,r){r.d(t,{s:function(){return d},$:function(){return m}});var a=r(27573),n=r(18113),l=r(7653),s=r(93351),i=r(32138),o=r(41270),c=r(72075);let u=r(85881).xG.omit({random_prompt_clicked:!0,should_focus:!0,image_guidance:!0,denoising_strength:!0,transparency:!0,enhance_prompt:!0,lighting:!0,camera:!0,activeTab:!0}).extend({intent_prompt:o.z.string().optional()});u.omit({model:!0,style:!0}).extend({modelListId:c.SB.shape.id,styleListId:c.X2.shape.id});let d=e=>{let{children:t,defaultValues:r}=e,l=(0,i.ic)(r.modelListId),o=(0,i.l$)(r.styleListId),c=(0,s.cI)({resolver:(0,n.F)(u),defaultValues:{...r,prompt:"",intent_prompt:r.prompt,model:l,style:o}});return(0,a.jsx)(s.RV,{...c,children:t})},m=()=>{let e=(0,s.Gc)();if(!e)throw Error("useQuickActionToolGenerateImageFormContext must be used within a QuickActionToolGenerateImageFormProvider");return(0,l.useMemo)(()=>({formHook:e}),[e])}},50729:function(e,t,r){r.d(t,{y:function(){return v},H:function(){return N}});var a=r(27573),n=r(7653),l=r(30857),s=r(27688),i=r(30629),o=r(46926),c=r(78293),u=r(67728),d=r(66910),m=r(54375);let p=async(e,t)=>{var r,a,n;let l=(null===(r=e.style)||void 0===r?void 0:r.tag)?"<effect>".concat(null===(a=e.style)||void 0===a?void 0:a.tag,"</effect>"):"",s=(0,d.SN)(e.prompt,null===(n=e.model)||void 0===n?void 0:n.init_prompt,e.intent_prompt),i={prompt:s?s+l:"",style_id:e.model.model_id,enable_hr:e.model.enable_hr,aspect_ratio:e.aspect_ratio,variation:t};return(0,m.wh)(i)},x=new AbortController,f=async(e,t,r)=>{var a;x.signal.aborted&&(x=new AbortController);let n=(0,d.kw)(t);n.append("Style-Id","".concat(e.model.model_id));let l=await p(e,r),{data:s,response:i}=await c.p.post(d.TG.TEXT_TO_IMAGE,{body:l,headers:n,signal:x.signal},{throwOnError:!0});return{src:(0,u.RJ)(s),cost:null!==(a=i.headers.get(o.Iw.X_COST))&&void 0!==a?a:void 0}},h=()=>{x.abort()},g=()=>{let e=(0,i.useMutation)({mutationFn:e=>f(e.data,e.isPremium,e.variation)}),t=(0,n.useCallback)(()=>{h(),e.reset()},[e.reset]);return Object.assign(e,{cancelRequest:t})},b=(0,n.createContext)(void 0),v=e=>{let{children:t}=e,[r,i]=(0,n.useState)(s.gs.UPLOAD),[o,c]=(0,n.useState)(""),[u,d]=(0,n.useState)(null),[m,p]=(0,n.useState)(s.Cs.DRAGGABLE),[x,f]=(0,n.useState)(s.U9.DEFAULT),[h,v]=(0,n.useState)([]),[N,y]=(0,n.useState)({upload:"",generate:""}),[j,E]=(0,n.useState)(!1),A=g(),_=(0,n.useCallback)(e=>{i(e)},[]),T=(0,n.useCallback)(()=>{let e=(0,l.Z)(),t={id:e,src:"",isLoading:!0};return v(e=>[...e,t]),e},[]),R=(0,n.useCallback)((e,t)=>{v(r=>r.map(r=>r.id===e?{...r,src:t,isLoading:!1}:r))},[]),C=(0,n.useCallback)(e=>{v(t=>t.filter(t=>t.id!==e))},[]),I=(0,n.useCallback)(()=>{v([])},[]),D=(0,n.useCallback)(()=>{i(s.gs.UPLOAD),c(""),d(null),p(s.Cs.DRAGGABLE),y({upload:"",generate:""}),v([]),f(s.U9.DEFAULT)},[]),L=(0,n.useMemo)(()=>({selectedTab:r,setSelectedTab:i,selectedImage:o,setSelectedImage:c,uploadedImage:u,setUploadedImage:d,onTabChange:_,uploadTabDisplayState:m,setUploadTabDisplayState:p,tabErrors:N,setTabErrors:y,generatedImages:h,setGeneratedImages:v,addImageWithLoading:T,completeImageGenerationWithLoading:R,deleteLoadingImage:C,resetStates:D,generateTabDisplayState:x,setGenerateTabDisplayState:f,deleteAllImages:I,generateTextToImageMutation:A,isProcessing:j,setIsProcessing:E}),[r,o,u,m,N,_,h,T,R,C,D,x,I,A,j]);return(0,a.jsx)(b.Provider,{value:L,children:t})},N=()=>{let e=(0,n.useContext)(b);if(!e)throw Error("useQuickActionToolState must be used within a QuickActionToolStateProvider");return e}},80149:function(e,t,r){r.d(t,{p:function(){return o}});var a=r(81695),n=r(8699),l=r(72987),s=r(94904),i=r(42636);let o=()=>{let e=(0,a.useSearchParams)(),t=(0,a.usePathname)(),r=(0,n.O_)(),o=(0,s.useUserStoreContext)()(e=>e.user);return r&&!o&&("true"===e.get(l.u.SHOW_AUTH)||i.fi.has(t))}},8940:function(e,t,r){r.d(t,{InspirationFabIcon:function(){return d}});var a=r(27573),n=r(68255),l=r(10665),s=r(7609),i=r(7653),o=r(8699),c=r(22051);let u=()=>{let[e,t]=(0,i.useState)(!1),r=(0,o.O_)();return(0,i.useEffect)(()=>{if(!r)return()=>{};let e=()=>{let e=document.getElementById(c.q.DASHBOARD_SCROLL_AREA);e&&t(e.scrollTop>200)},a=document.getElementById(c.q.DASHBOARD_SCROLL_AREA);return a?(a.addEventListener("scroll",e),()=>{null==a||a.removeEventListener("scroll",e)}):()=>{}},[r]),{isVisible:e,handleScrollToTop:()=>{let e=document.getElementById(c.q.DASHBOARD_SCROLL_AREA);e&&e.scrollTo({top:0,behavior:"smooth"})}}},d=()=>{let{isVisible:e,handleScrollToTop:t}=u();return(0,a.jsx)(s.zx,{variant:"secondary-v3",size:"icon-xl",className:(0,n.cn)("pointer-events-none fixed bottom-6 right-[calc(50%-var(--dashboard-sidebar-width)/2)] z-40 rounded-full border border-neutral-31 opacity-0 !transition-all duration-500 dark:border-neutral-81",{"pointer-events-auto opacity-100":e}),onClick:t,children:(0,a.jsx)(l.HPX,{className:"size-6"})})}},51896:function(e,t,r){r.d(t,{C:function(){return u}});var a=r(27573),n=r(68255),l=r(7609),s=r(27185),i=r(50729),o=r(72403),c=r(27688);let u=e=>{let{handleContinue:t,isLoading:r}=e,{tabErrors:u,selectedTab:d,selectedImage:m,uploadTabDisplayState:p,generateTabDisplayState:x}=(0,i.H)(),f=!!u[d],h=p===c.Cs.DRAGGABLE&&x===c.U9.DEFAULT,g=f||p===c.Cs.LOADING||!m;return(0,a.jsx)(o.m.Footer,{children:(0,a.jsx)(l.zx,{className:(0,n.cn)("w-[120px]",{"pointer-events-none":r}),size:"md",disabled:!h&&g,onClick:t,children:r?(0,a.jsx)(s.Spinner,{className:"size-5"}):"Continue"})})}},96465:function(e,t,r){r.d(t,{E:function(){return o}});var a=r(27573),n=r(68255),l=r(50729),s=r(72403),i=r(27688);let o=()=>{let{uploadTabDisplayState:e,generateTabDisplayState:t}=(0,l.H)();return(0,a.jsx)(s.m.ContentSeparator,{className:(0,n.cn)("transition-opacity duration-300",{"pointer-events-none opacity-30":[i.Cs.LOADING,i.Cs.UPLOADED].includes(e)||t===i.U9.LOADING})})}},87815:function(e,t,r){r.d(t,{E:function(){return m}});var a=r(27573),n=r(68255),l=r(16627),s=r(41225),i=r(65535),o=r(50729),c=r(72403),u=r(65197),d=r(27688);let m=e=>{let{inspirations:t}=e,{setSelectedImage:r,selectedImage:m,uploadTabDisplayState:p,generateTabDisplayState:x,setTabErrors:f,setGenerateTabDisplayState:h,setUploadTabDisplayState:g}=(0,o.H)(),b=e=>{localStorage.setItem(s.F.IMAGE_EDITOR_UPLOAD_TYPE,l.L.INSPIRATION),r(e),f({upload:"",generate:""}),p===d.Cs.ERROR&&g(d.Cs.DRAGGABLE),x===d.U9.ERROR&&h(d.U9.DEFAULT),(0,u.a)(i.l$.MODAL_UPLOAD_TYPE,d.$5.INSPIRATION)};return(0,a.jsxs)(c.m.Section,{className:(0,n.cn)("transition-opacity duration-300",{"pointer-events-none opacity-30":p===d.Cs.LOADING||x===d.U9.LOADING}),children:[(0,a.jsx)(c.m.Section.Header,{children:(0,a.jsx)(c.m.Section.Title,{children:"No picture on hand? Try with one of these"})}),(0,a.jsx)(c.m.Section.Body,{children:(0,a.jsx)("div",{className:"grid w-full grid-cols-3 place-items-center gap-3 rounded-2xl bg-neutral-11 p-4 dark:bg-neutral-91 xl:grid-cols-4",children:t.map((e,t)=>(0,a.jsx)(c.m.ImageCard,{src:e,alt:"Inspiration ".concat(t),isActive:m===e,onClick:()=>{b(e)}},t))})})]})}},27688:function(e,t,r){var a,n,l,s,i,o,c,u;r.d(t,{$5:function(){return s},Cs:function(){return n},Kz:function(){return m},Tb:function(){return p},U9:function(){return l},gs:function(){return a},nC:function(){return d}}),(i=a||(a={})).UPLOAD="upload",i.GENERATE="generate";let d=[{label:"Upload Image",value:"upload"},{label:"Generate Image",value:"generate"}];(o=n||(n={})).DRAGGABLE="draggable",o.DRAGGING="dragging",o.ERROR="error",o.LOADING="loading",o.UPLOADED="uploaded";let m=10,p=10485760;(c=l||(l={})).DEFAULT="default",c.LOADING="loading",c.ERROR="error",c.GENERATED="generated",(u=s||(s={})).INSPIRATION="inspiration",u.UPLOAD="upload",u.GENERATE="generate"},97139:function(e,t,r){r.d(t,{E:function(){return U}});var a=r(27573),n=r(26048),l=r(50729),s=r(33694),i=r(7653),o=r(68255),c=r(94904),u=r(15218),d=r(90244),m=r(16627),p=r(41225),x=r(65535),f=r(71069),h=r(57872),g=r(45902),b=r(72403),v=r(58414),N=r(39016),y=r(65197);let j=e=>{let{show:t,message:r,className:n}=e;return(0,a.jsx)("div",{className:(0,o.cn)("pointer-events-none invisible absolute bottom-9 z-[-1] flex w-full flex-1 items-center justify-start self-stretch rounded-lg bg-transparent p-2 opacity-0 transition-all duration-300",{"visible bottom-0 z-[1] bg-error-61/15 opacity-100":t},n),children:(0,a.jsx)("p",{className:"text-sm font-medium text-error-61",children:r})})};var E=r(27688),A=r(6847),_=r(24673);let T=e=>{let{name:t,formHook:r,isLoading:n,onCancel:s}=e,c=(0,i.useRef)(null),{generateTabDisplayState:u}=(0,l.H)();return(0,a.jsxs)("label",{className:(0,o.cn)("group relative flex h-[144px] flex-1 shrink-0 flex-col items-start justify-between gap-2 self-stretch rounded-[14px] bg-neutral-11 p-3.5 transition-all duration-300 focus-within:ring-1 focus-within:ring-primary-61 hover:bg-neutral-21 dark:bg-neutral-91 dark:focus-within:ring-primary-51 dark:hover:bg-neutral-81",{"ring-1 ring-error-61 dark:ring-error-61":u===E.U9.ERROR}),"aria-label":"Prompt Box",htmlFor:"promptTextArea",children:[(0,a.jsx)(_.f,{formHook:r,name:t,textAreaProps:{id:"promptTextArea",className:"!bg-transparent rounded-none align-top placeholder:duration-300 group-hover:placeholder:text-neutral-101 dark:group-hover:placeholder:text-neutral-white dark:focus:placeholder:!text-neutral-51 focus:placeholder:!text-neutral-61 -mt-0.5 !ring-0 size-full resize-none indent-[38px] p-0 text-base"},containersProps:{className:"size-full rounded-none"},randomPromptClassName:"top-3.5 left-3.5 [&>span]:!h-3",generateBtnRef:c}),(0,a.jsx)("div",{className:"flex items-center justify-end self-stretch",children:(0,a.jsxs)(A.D,{className:"w-[120px]",isLoading:null!=n&&n,children:[(0,a.jsx)(A.D.Button,{size:"md",type:"submit",ref:c}),(0,a.jsx)(A.D.Cancel,{handleCancel:s})]})})]})},R=e=>{let{handlePostProcessImage:t=async()=>{}}=e,{formHook:r}=(0,f.$)(),{vagErrorHandler:n}=(0,g.a)(),A=(0,h.w)(),{addImageWithLoading:_,completeImageGenerationWithLoading:R,deleteLoadingImage:C,generatedImages:I,setSelectedImage:D,deleteAllImages:L,selectedImage:O,tabErrors:w,setTabErrors:S,generateTabDisplayState:z,setGenerateTabDisplayState:k,generateTextToImageMutation:G}=(0,l.H)(),U=(0,c.useUserStoreContext)()(e=>e.user),P=(0,c.useUserStoreContext)()(e=>e.subscription),{isSubscriptionActive:M}=(0,u.L1)(P),{aggregator:F}=(0,v.O)(),B=(0,i.useCallback)(async e=>{let r=_();try{var a,l;localStorage.setItem(p.F.IMAGE_EDITOR_UPLOAD_TYPE,m.L.GENERATE);let n={data:e,isPremium:M,variation:N.j.TEXT_TO_IMAGE},s=await G.mutateAsync(n);F.log(d.H0.sync_generated.withProperties({tokens_consumed:Number(null!==(a=s.cost)&&void 0!==a?a:0),distinct_id:null==U?void 0:U.id,email:null==U?void 0:U.email}));let i=localStorage.getItem(p.F.TOKENS_CONSUMED);return localStorage.setItem(p.F.TOKENS_CONSUMED,String(Number(null!==(l=s.cost)&&void 0!==l?l:0)+Number(i))),await t(s.src),R(r,s.src),{isSuccess:!0}}catch(e){return C(r),n(e),{isSuccess:!1,error:e}}},[null==U?void 0:U.email,null==U?void 0:U.id,F,_,R,C,G,t,M,n]),H=async e=>{if(!e.prompt){S({upload:"",generate:"Please enter a prompt"}),k(E.U9.ERROR);return}if(S({upload:"",generate:""}),L(),D(""),!U){A();return}k(E.U9.LOADING),k((await Promise.all(Array.from({length:e.num_images}).map(()=>B(e)))).every(e=>!e.isSuccess)?E.U9.DEFAULT:E.U9.GENERATED)};return(0,a.jsx)(s.fC,{type:"single",value:[E.U9.LOADING,E.U9.GENERATED,E.U9.ERROR].includes(z)?"open":"",children:(0,a.jsxs)(s.ck,{value:"open",className:"w-full",children:[(0,a.jsx)(s.xz,{className:"w-full",children:(0,a.jsx)("form",{className:"w-full self-stretch",onSubmit:r.handleSubmit(H),children:(0,a.jsx)(T,{formHook:r,name:"prompt",isLoading:G.isLoading,onCancel:()=>{k(E.U9.DEFAULT),G.cancelRequest(),L()}})})}),(0,a.jsxs)(s.VY,{className:"transition-all data-[state=open]:animate-accordion-down",children:[[E.U9.LOADING,E.U9.GENERATED].includes(z)&&(0,a.jsx)("div",{className:(0,o.cn)("mt-4 grid w-full grid-cols-4 place-items-center gap-3 rounded-2xl bg-neutral-11 p-4 dark:bg-neutral-91"),children:I.map(e=>(0,a.jsx)(b.m.ImageCard,{src:e.src,alt:"Generated ".concat(e.id),onClick:()=>{(0,y.a)(x.l$.MODAL_UPLOAD_TYPE,E.$5.GENERATE),D(e.src)},isLoading:e.isLoading,isActive:O===e.src&&!e.isLoading},e.id))}),z===E.U9.ERROR&&(0,a.jsx)(j,{show:!0,message:w.generate,className:"static mt-4"})]})]})})};var C=r(50294),I=r(44687),D=r(164),L=r(10665),O=r(85730),w=r(7609),S=r(27185),z=r(10899),k=r(67728);let G=e=>{let{onUploadImage:t=async()=>{},onCancelUpload:r=()=>{}}=e,{setSelectedImage:n,uploadedImage:s,uploadTabDisplayState:i,generateTabDisplayState:c,setUploadTabDisplayState:u,tabErrors:d,selectedImage:f,setTabErrors:h,setUploadedImage:g,setGenerateTabDisplayState:b}=(0,l.H)(),v=async(e,r)=>{try{if(localStorage.setItem(p.F.IMAGE_EDITOR_UPLOAD_TYPE,m.L.UPLOAD),h({upload:"",generate:""}),c===E.U9.ERROR&&b(E.U9.DEFAULT),u(E.Cs.LOADING),0!==r.length)switch(r[0].errors[0].code){case I.jK.FileInvalidType:throw Error("Invalid file type. Please upload an image file");case I.jK.FileTooLarge:throw Error("File size is too large. Max file size is ".concat(E.Kz,"MB"));case I.jK.TooManyFiles:throw Error("You can only upload one image at a time");default:throw Error("An error occurred while uploading the image")}let a=e[0],l=await (0,k.z0)(a);await t(l),n(l),g(l),u(E.Cs.UPLOADED)}catch(e){if(e&&"object"==typeof e&&"code"in e&&"error"===e.code){if(e.statusCode===D.f.ABORTED){u(E.Cs.DRAGGABLE),g(null);return}}else e instanceof Error?h({upload:e.message,generate:""}):"string"==typeof e&&h({upload:e,generate:""});u(E.Cs.ERROR),g(null)}},{getRootProps:N,getInputProps:A,open:_}=(0,I.uI)({noKeyboard:!0,noClick:!0,accept:z.Po,multiple:!1,maxFiles:1,maxSize:E.Tb,onDragEnter:()=>{u(E.Cs.DRAGGING),h({upload:"",generate:""})},onDragLeave:()=>{u(E.Cs.DRAGGABLE)},onDrop:v,onFileDialogOpen:()=>{u(E.Cs.DRAGGABLE),h({upload:"",generate:""}),c===E.U9.ERROR&&b(E.U9.DEFAULT)},disabled:i===E.Cs.LOADING});return(0,a.jsxs)("div",{className:"flex items-center self-stretch",children:[i!==E.Cs.UPLOADED&&(0,a.jsxs)("div",{className:(0,o.cn)("relative h-[164px] w-full transition-all duration-300",{"h-[208px]":i===E.Cs.ERROR}),children:[(0,a.jsxs)("label",{className:(0,o.cn)("relative flex h-[164px] shrink-0 items-center justify-center self-stretch rounded-xl border-2 border-dashed border-neutral-31 bg-neutral-11 transition-colors duration-300 hover:border-neutral-31 hover:bg-neutral-21 focus:border-neutral-41 focus:bg-neutral-21 dark:border-neutral-71 dark:bg-neutral-91 dark:hover:border-neutral-71 dark:hover:bg-neutral-81 dark:focus:border-neutral-71 dark:focus:bg-neutral-81",{"border-primary-61 bg-primary-51/20 dark:border-primary-51 dark:bg-primary-51/30":i===E.Cs.DRAGGING,"border-error-61":i===E.Cs.ERROR}),htmlFor:"upload-image","aria-label":"Upload Image",...N(),children:[(0,a.jsx)("p",{className:(0,o.cn)("absolute inset-0 left-1/2 top-1/2 size-fit -translate-x-1/2 -translate-y-1/2 text-sm text-neutral-101 opacity-0 transition-opacity duration-300 dark:text-neutral-white",{"opacity-100":i===E.Cs.DRAGGING}),children:"Drag your images here"}),(0,a.jsxs)("div",{className:(0,o.cn)("absolute inset-0 left-1/2 flex w-fit shrink-0 -translate-x-1/2 flex-col items-center justify-center gap-2 px-3 opacity-100 transition-opacity duration-300",{"opacity-0":[E.Cs.DRAGGING,E.Cs.LOADING].includes(i)}),children:[(0,a.jsx)(O.u,{className:"size-[52px]"}),(0,a.jsxs)("div",{className:"flex shrink-0 items-center gap-2",children:[(0,a.jsx)("p",{className:"shrink-0 text-sm",children:"Drag your images here"}),(0,a.jsx)("span",{className:"text-sm",children:"or"}),(0,a.jsx)("button",{className:"shrink-0 select-none text-sm font-semibold text-primary-81 dark:text-primary-31",type:"button",onClick:_,children:"click to upload"})]})]}),(0,a.jsxs)("div",{className:(0,o.cn)("absolute inset-0 left-1/2 top-1/2 flex size-fit -translate-x-1/2  -translate-y-1/2 flex-col items-center justify-center gap-2 px-3 opacity-0 transition-opacity duration-300",{"opacity-100":i===E.Cs.LOADING}),children:[(0,a.jsx)(S.Spinner,{className:"size-6 text-primary-51"}),(0,a.jsx)("p",{className:"text-sm text-neutral-101 dark:text-neutral-white",children:"Uploading..."})]}),(0,a.jsx)("input",{type:"file",id:"upload-image",className:"hidden",...A()}),i===E.Cs.LOADING&&(0,a.jsx)(w.zx,{size:"icon-sm",variant:"ghost-secondary",className:"pointer-events-auto absolute right-2 top-2 z-20",onClick:r,children:(0,a.jsx)(L.aMB,{className:"size-[18px]"})})]}),(0,a.jsx)(j,{show:i===E.Cs.ERROR,message:d.upload})]}),i===E.Cs.UPLOADED&&!!s&&(0,a.jsxs)("div",{className:(0,o.cn)("relative flex h-[264px] flex-1 items-center justify-center self-stretch overflow-hidden rounded-xl bg-neutral-11 dark:bg-neutral-91",{"ring-[1.5px] ring-primary-61 dark:ring-primary-51":f===s}),children:[(0,a.jsx)("button",{type:"button",className:(0,o.cn)("pointer-events-auto absolute inset-0 z-10 bg-[linear-gradient(0deg,_rgba(160,_115,_255,_0.15)_0%,_rgba(160,_115,_255,_0.15)_100%)] opacity-0 transition-opacity duration-300 dark:bg-[linear-gradient(0deg,_rgba(136,_80,_255,_0.15)_0%,_rgba(136,_80,_255,_0.15)_100%)]",{"pointer-events-none opacity-100":f===s}),"aria-label":"Select Image",onClick:()=>{(0,y.a)(x.l$.MODAL_UPLOAD_TYPE,E.$5.UPLOAD),n(s)}}),(0,a.jsx)(C.default,{src:s||"",alt:"Selected Image",fill:!0,className:"z-0 object-contain"}),(0,a.jsx)(w.zx,{size:"icon-sm",variant:"ghost-secondary",className:"absolute right-2 top-2 z-20",onClick:()=>{s===f&&n(""),g(null),u(E.Cs.DRAGGABLE)},children:(0,a.jsx)(L.XHJ,{className:"size-[18px]"})})]})]})},U=e=>{let{handleUploadTabPostProcessImage:t,handleGenerateTabPostProcessImage:r,onCancelUpload:s}=e,{selectedTab:i,onTabChange:o}=(0,l.H)();return(0,a.jsxs)(n.GenericTab,{className:"w-full",value:i,onValueChange:o,children:[(0,a.jsx)(n.GenericTabList,{className:"flex w-fit flex-shrink-0 items-start gap-3",children:E.nC.map(e=>{let{value:t,label:r}=e;return(0,a.jsx)(n.p,{value:t,className:"h-10 rounded-[40px] px-5 py-2.5 text-sm font-medium text-neutral-61 shadow-none data-[state=active]:text-neutral-101 hover:text-neutral-101 dark:text-neutral-31 dark:data-[state=active]:text-neutral-white dark:hover:text-neutral-white",layoutId:"upload-or-generate-tabs",isActive:i===t,activeProps:{className:"w-full bg-neutral-31 shadow-none dark:bg-neutral-81 rounded-[40px]"},children:(0,a.jsx)("div",{className:"relative flex items-center gap-2",children:(0,a.jsx)("span",{className:"capitalize",children:r})})},t)})}),(0,a.jsx)(n.GenericTabContent,{value:E.gs.UPLOAD,className:"pt-4",children:(0,a.jsx)(G,{onUploadImage:t,onCancelUpload:s})}),(0,a.jsx)(n.GenericTabContent,{value:E.gs.GENERATE,className:"pt-4",children:(0,a.jsx)(R,{handlePostProcessImage:r})})]})}},87520:function(e,t,r){r.d(t,{h:function(){return c}});var a=r(7653),n=r(93351),l=r(71069),s=r(50729),i=r(80149),o=r(61504);let c=()=>{let{formHook:e}=(0,l.$)(),t=(0,i.p)(),r=(0,o.d)(),{selectedImage:c,uploadedImage:u,generatedImages:d,generateTextToImageMutation:m}=(0,s.H)(),p=(0,n.qo)({control:e.control,name:"prompt"}),x=(0,a.useRef)(()=>{}),f=(0,a.useMemo)(()=>!!c||!!u||0!==d.length||!!p,[c,u,d,p]);return(0,a.useEffect)(()=>{let e=e=>{f&&!t&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[r,f,t]),{hasPendingChanges:f,controlCloseAction:x,handleConfirm:()=>{x.current(),r.setIsModalOpen(!1),window.history.replaceState(null,"","".concat(window.location.pathname)),m.cancelRequest()},handleCancel:()=>{r.setIsModalOpen(!1)},confirmationModalControl:r,handleParentModalClose:e=>{f?(x.current=e,r.setIsModalOpen(!0)):e()}}}},76496:function(e,t,r){r.d(t,{F:function(){return m}});var a=r(7653),n=r(72987),l=r(94904),s=r(71645),i=r(65535),o=r(50729),c=r(27688),u=r(67728),d=r(57872);let m=e=>{let{tool:t,pathname:r}=e,{tabErrors:m,selectedTab:p,setTabErrors:x,selectedImage:f,setGenerateTabDisplayState:h,setUploadTabDisplayState:g,setIsProcessing:b,isProcessing:v}=(0,o.H)(),N=(0,s.Ty)(),y=(0,l.useUserStoreContext)()(e=>e.user),j=(0,d.w)();return{handleContinue:(0,a.useCallback)(async e=>{try{if(p===c.gs.UPLOAD&&!f){x({...m,[p]:"Upload or select an image to continue"}),g(c.Cs.ERROR);return}if(p===c.gs.GENERATE&&!f){x({...m,[p]:"Generate or select an image to continue"}),h(c.U9.ERROR);return}let a=f;if(!a.startsWith("blob:")){b(!0);let e=await (0,u.NP)(f);a=(0,u.RJ)(e),b(!1)}let l=new URLSearchParams(e);l.set(n.u.IMAGE,a),l.set(i.xb.TOOL,t);let s="".concat(r,"?").concat(l);y?N.push(s):(new URLSearchParams().set(n.u.REDIRECT,s),j())}catch(e){b(!1)}},[y,r,N,f,j,p,h,b,x,g,m,t]),isProcessing:v,setIsProcessing:b}}},39364:function(e,t,r){r.d(t,{T:function(){return l}});var a=r(7653),n=r(74497);let l=(e,t)=>{let[r,l]=(0,a.useState)([]),s=(0,a.useRef)(0);return(0,a.useEffect)(()=>{l([]),s.current=0},[t]),(0,a.useEffect)(()=>{let t=(null==e?void 0:e.pages)||[];if(t.length>s.current){let e=[];for(let r=s.current;r<t.length;r++)e=e.concat((0,n.Sy)(t[r].data));s.current=t.length,l(t=>[...t,...e])}},[e]),r}},72403:function(e,t,r){r.d(t,{m:function(){return p}});var a=r(27573),n=r(68255),l=r(46793),s=r(19454),i=r(38578),o=r(81695),c=r(7653),u=r(65535),d=r(80149),m=r(27185);let p={Root:e=>{let{children:t,param_key:r,param_value:l,modalControls:i,handleOnClose:m,handleOnOpen:p,className:x}=e,{isModalOpen:f,setIsModalOpen:h}=i,g=(0,d.p)(),b=(0,o.useSearchParams)(),v=(0,o.usePathname)();return(0,c.useEffect)(()=>{h(b.get(r)===l&&!g)},[r,l,b,h,g]),(0,c.useEffect)(()=>{f&&p&&p()},[p,f]),(0,a.jsx)(s.$E,{open:f,onOpenChange:e=>{if(e)return;let t=new URLSearchParams(b);t.delete(r),t.delete(u.l$.MODAL_UPLOAD_TYPE);let a=()=>{h(!1),window.history.replaceState(null,"","".concat(v,"?").concat(t))};m?m(a):a()},children:(0,a.jsxs)(s.Yk,{className:(0,n.cn)("size-full max-h-[min(calc(100vh-152px),720px)]  max-w-[min(calc(100vw-220px),1012px)]",x),overlayClassName:"backdrop-blur-[6px]",children:[(0,a.jsx)(s.mp,{className:"sr-only",children:"Query Param Modal"}),(0,a.jsx)(s.eq,{className:"sr-only",children:"Modal to display content based on query params"}),t]})})},Header:e=>{let{title:t}=e;return(0,a.jsxs)(s._w,{className:"shrink-0",children:[(0,a.jsx)(s.mp,{children:t}),(0,a.jsx)(s.Zh,{})]})},Body:e=>{let{children:t,className:r}=e;return(0,a.jsx)(s.DQ,{className:(0,n.cn)("scrollbar-v2 flex flex-1 flex-col items-start gap-8 self-stretch overflow-auto px-6 pb-4 pt-[18px]",r),children:t})},Footer:e=>{let{className:t,children:r}=e;return(0,a.jsx)(s.vb,{className:(0,n.cn)("shrink-0 border-t border-neutral-11 p-4 dark:border-neutral-91",t),children:r})},Section:Object.assign(e=>{let{children:t,className:r}=e;return(0,a.jsx)("section",{className:(0,n.cn)("flex flex-1 flex-col items-start gap-4 self-stretch",r),children:t})},{Header:e=>{let{children:t,className:r}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col items-start gap-1 self-stretch",r),children:t})},Title:e=>{let{children:t,className:r}=e;return(0,a.jsx)("h3",{className:(0,n.cn)("text-xl/[30px] font-semibold text-neutral-101 dark:text-neutral-white",r),children:t})},SubTitle:e=>{let{children:t,className:r}=e;return(0,a.jsx)("p",{className:(0,n.cn)("text-neutral-71 dark:text-neutral-41",r),children:t})},Body:e=>{let{children:t,className:r}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col items-start self-stretch",r),children:t})}}),ContentSeparator:e=>{let{text:t="OR",className:r}=e;return(0,a.jsxs)("div",{className:(0,n.cn)("flex items-center gap-6 self-stretch",r),children:[(0,a.jsx)(l.i,{orientation:"horizontal",className:"flex-1",variant:"v1"}),(0,a.jsx)("p",{className:"text-xs font-medium text-neutral-61 dark:text-neutral-41",children:t}),(0,a.jsx)(l.i,{orientation:"horizontal",className:"flex-1",variant:"v1"})]})},ImageCard:e=>{let{children:t,className:r,onClick:l,isActive:s,src:o,alt:c,isLoading:u,imageClassName:d,...p}=e;return(0,a.jsxs)("button",{className:(0,n.cn)("relative aspect-[224/168] w-full shrink-0 overflow-hidden rounded-lg bg-neutral-21 transition-all duration-300 dark:bg-neutral-81",{"ring-[1.5px] ring-primary-61 dark:ring-primary-51":s,"pointer-events-none":u},r),type:"button",onClick:l,...p,children:[(0,a.jsx)("div",{className:(0,n.cn)("pointer-events-none absolute inset-0 z-[1] bg-[linear-gradient(0deg,_rgba(136,_80,_255,_0.15)_0%,_rgba(136,_80,_255,_0.15)_100%)] opacity-0 transition-opacity duration-300",{"opacity-100":s})}),u?(0,a.jsx)(m.Spinner,{className:"size-8 text-neutral-41"}):(0,a.jsx)(i.w,{src:o,alt:c,imageClassName:d,className:"bg-transparent pb-0 dark:bg-transparent"})]})}}},85881:function(e,t,r){r.d(t,{xG:function(){return f},xi:function(){return s}});var a=r(41270),n=r(72075),l=r(53505);let s={PROMPT:"prompt",NUM_IMAGES:"num_images",ASPECT_RATIO:"aspect_ratio",TRANSPARENCY:"transparency",MODEL_LIST_ID:"modelListId",STYLE_LIST_ID:"styleListId",CONTROL_LIST_ID:"controlListId",MODEL:"model",STYLE:"style",IMAGE_GUIDANCE:"image_guidance",IMAGE:"image",CUSTOM_MODEL_ID:"customModelId",ACTIVE_TAB:"activeTab"},i=a.z.object({low:a.z.number(),medium:a.z.number(),high:a.z.number()}),o=a.z.object({variation:a.z.string(),strength:i}),c=a.z.object({image_caption:a.z.string().optional(),variation:a.z.string(),strength:i}),u=a.z.object({variation:a.z.string(),strength:i,has_detected_face:a.z.boolean().optional()}),d=a.z.object({variation:a.z.string(),strength:i}),m=a.z.object({variation:a.z.string()}),p=a.z.object({image:n.KA,croppedImage:n.KA,mode:a.z.string().nullable(),modeId:a.z.number().nullable(),reimagine:c,structure:o,face:u,style:d,edit:m,strength:a.z.number().optional()}),x=n.SB.extend({enable_hr:a.z.boolean(),inf_time:a.z.number(),enable_layer_diffusion:a.z.boolean().optional().nullable(),enable_adetailer:a.z.boolean().optional().nullable(),sample_results:a.z.string().array().optional().nullable(),effect:a.z.string().optional(),supported_control_modes:a.z.array(a.z.number()).optional(),is_community_model:a.z.boolean().optional().nullable().default(!1)}).partial({is_community_model:!0}),f=a.z.object({model:x,activeTab:a.z.nativeEnum(l.V0).default(l.V0.IMAGINE),prompt:n.Pp,style:n.Ht,lighting:n.c7,camera:n.c7,aspect_ratio:a.z.string(),num_images:a.z.number().min(1).max(8),transparency:a.z.boolean().optional(),isPremium:a.z.boolean().optional(),image_guidance:p,random_prompt_clicked:a.z.boolean().optional().default(!1),denoising_strength:a.z.number().optional(),should_focus:a.z.boolean().optional().default(!1),enhance_prompt:a.z.boolean().optional().default(!1)});p.omit({image:!0,croppedImage:!0,mode:!0,modeId:!0})},53505:function(e,t,r){var a,n,l,s,i,o,c,u;r.d(t,{A0:function(){return l},Aw:function(){return a},D5:function(){return m},V0:function(){return s},WS:function(){return p},pQ:function(){return d},r:function(){return x}}),(i=a||(a={})).CHARACTER="character",i.OBJECT="object",i.STYLE="style",(o=n||(n={})).MALE="male",o.FEMALE="female",(c=l||(l={})).TOP_STYLES="top-styles",c.COMMUNITY="community",c.MY_MODELS="my-models",c.FAVOURITES="favourites";let d=[{text:"Top Styles",tab:"top-styles"},{text:"Community Models",tab:"community"},{text:"My Models",tab:"my-models"},{text:"Favourites",tab:"favourites"}],m="top-styles";(u=s||(s={})).TOP_STYLES="top-styles",u.IMAGINE="imagine",u.COMMUNITY="community",u.MY_MODELS="my-models",u.FAVOURITES="favourites";let p=[{text:"Imagine Models",tab:"imagine"},{text:"Top Styles",tab:"top-styles"},{text:"Community Models",tab:"community"},{text:"My Models",tab:"my-models"},{text:"Favourites",tab:"favourites"}],x="community"},39016:function(e,t,r){var a,n;r.d(t,{j:function(){return a}}),(n=a||(a={})).TEXT_TO_IMAGE="txt2img",n.IMAGE_TO_IMAGE="img2img"},65197:function(e,t,r){r.d(t,{a:function(){return a}});let a=(e,t)=>{let r=new URLSearchParams(window.location.search);r.set(e,t),window.history.replaceState(null,"","".concat(window.location.pathname,"?").concat(r.toString()))}}}]);