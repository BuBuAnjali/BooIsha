(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9586],{338:function(e,t,n){Promise.resolve().then(n.bind(n,21706)),Promise.resolve().then(n.bind(n,30743))},54257:function(e,t,n){"use strict";n.d(t,{GenericCarousel:function(){return u},GenericCarouselContent:function(){return m},GenericCarouselItem:function(){return g},GenericCarouselNext:function(){return f},GenericCarouselPrevious:function(){return p},o:function(){return d}});var a=n(27573),i=n(90324),r=n(7653),o=n(68255),l=n(10665),s=n(7609);let c=r.createContext(null),d=()=>{let e=r.useContext(c);if(!e)throw Error("useGenericCarousel must be used within a <GenericCarousel />");return e},u=r.forwardRef((e,t)=>{let{orientation:n="horizontal",opts:l,setApi:s,plugins:d=[],className:u,children:m,...g}=e,[p,f]=(0,i.Z)({...l,axis:"horizontal"===n?"x":"y"},d),[_,E]=r.useState(!1),[h,I]=r.useState(!1),v=r.useCallback(e=>{e&&(E(e.canScrollPrev()),I(e.canScrollNext()))},[]),S=r.useCallback(()=>{null==f||f.scrollPrev()},[f]),T=r.useCallback(()=>{null==f||f.scrollNext()},[f]),x=r.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),S()):"ArrowRight"===e.key&&(e.preventDefault(),T())},[S,T]);r.useEffect(()=>{f&&s&&s(f)},[f,s]),r.useEffect(()=>{if(f)return v(f),f.on("reInit",v),f.on("select",v),()=>{null==f||f.off("select",v)}},[f,v]);let N=r.useMemo(()=>({carouselRef:p,api:f,opts:l,orientation:n||((null==l?void 0:l.axis)==="y"?"vertical":"horizontal"),scrollPrev:S,scrollNext:T,canScrollPrev:_,canScrollNext:h}),[f,h,_,p,l,n,T,S]);return(0,a.jsx)(c.Provider,{value:N,children:(0,a.jsx)("div",{ref:t,onKeyDownCapture:x,className:(0,o.cn)("relative",u),role:"region","aria-roledescription":"carousel",...g,children:m})})});u.displayName="GenericCarousel";let m=r.forwardRef((e,t)=>{let{className:n,...i}=e,{carouselRef:r,orientation:l}=d();return(0,a.jsx)("div",{ref:r,className:"size-full overflow-hidden",children:(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex","horizontal"===l?"-ml-4":"-mt-4 flex-col",n),...i})})});m.displayName="GenericCarouselContent";let g=r.forwardRef((e,t)=>{let{className:n,...i}=e,{orientation:r}=d();return(0,a.jsx)("div",{ref:t,role:"group","aria-roledescription":"slide",className:(0,o.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===r?"pl-4":"pt-4",n),...i})});g.displayName="GenericCarouselItem";let p=r.forwardRef((e,t)=>{let{className:n,variant:i="ghost-secondary",size:r="icon-md",renderIcon:c,...u}=e,{orientation:m,scrollPrev:g,canScrollPrev:p}=d(),f=c||(0,a.jsx)(l.Y4O,{className:"size-4"});return(0,a.jsxs)(s.zx,{ref:t,variant:i,size:r,className:(0,o.cn)("absolute size-8 rounded-full active:-translate-y-1/2 disabled:pointer-events-none","horizontal"===m?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!p,onClick:g,...u,children:[f,(0,a.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});p.displayName="GenericCarouselPrevious";let f=r.forwardRef((e,t)=>{let{className:n,variant:i="ghost-secondary",size:r="icon-md",renderIcon:c,...u}=e,{orientation:m,scrollNext:g,canScrollNext:p}=d(),f=c||(0,a.jsx)(l.LZ3,{className:"size-4 dark:text-neutral-white"});return(0,a.jsxs)(s.zx,{ref:t,variant:i,size:r,className:(0,o.cn)("absolute size-8 rounded-full active:-translate-y-1/2 disabled:pointer-events-none","horizontal"===m?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!p,onClick:g,...u,children:[f,(0,a.jsx)("span",{className:"sr-only",children:"Next slide"})]})});f.displayName="GenericCarouselNext"},92425:function(e,t,n){"use strict";n.d(t,{Y:function(){return m}});var a=n(27573),i=n(50294),r=n(7653),o=n(68255),l=n(94904);let s=e=>{let{value:t,renderLabel:n,className:i,progressClassName:r,labelClassName:l,showLabel:s,shape:c="round",size:d=100,strokeWidth:u,circleStrokeWidth:m=10,progressStrokeWidth:g=10}=e,p=d/2-10,f=Math.ceil(3.14*p*2),_=Math.ceil((100-t)/100*f),E="-".concat(.125*d," -").concat(.125*d," ").concat(1.25*d," ").concat(1.25*d);return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("svg",{width:d,height:d,viewBox:E,version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},className:"relative",children:[(0,a.jsx)("circle",{r:p,cx:d/2,cy:d/2,fill:"transparent",strokeWidth:null!=u?u:m,strokeDasharray:f,strokeDashoffset:"0",className:(0,o.cn)("stroke-primary/25",i)}),(0,a.jsx)("circle",{r:p,cx:d/2,cy:d/2,strokeWidth:null!=u?u:g,strokeLinecap:c,strokeDashoffset:_,fill:"transparent",strokeDasharray:f,className:(0,o.cn)(r)})]}),s&&(0,a.jsx)("div",{className:(0,o.cn)("text-md absolute inset-0 flex items-center justify-center",l),children:n?n(t):t})]})};var c=n(20260),d=n(64711),u=n(2516);let m=e=>{var t;let{className:n,isDropdownOpen:m=!1}=e,g=(0,l.useUserStoreContext)()(e=>e.user),p=null!==(t=null==g?void 0:g.name)&&void 0!==t?t:"User",f=(0,r.useMemo)(()=>(0,c.fo)(p),[p]),_=!!(null==g?void 0:g.profileImageKey),{shouldHideCreditUsage:E,remainingPercentage:h,isFull:I,isCritical:v,isWarning:S,isHigh:T}=(0,u.G)();return(0,a.jsxs)("div",{className:(0,o.cn)("relative flex size-6 items-center justify-center rounded-full text-xs uppercase","[perspective:1000px]",{"bg-error-61/30":!_},n),"aria-label":p,children:[(0,a.jsx)(s,{value:h,size:60,strokeWidth:3,className:"z-10 stroke-neutral-41 dark:stroke-neutral-71",progressClassName:(0,o.cn)({"stroke-primary-61":I,"stroke-neutral-black dark:stroke-neutral-white":T,"stroke-warning-51":S,"stroke-error-51":v})}),(0,a.jsxs)("div",{className:(0,o.cn)("absolute inset-0 size-full transition-transform duration-1000 [transform-style:preserve-3d]",{"[transform:rotateY(180deg)]":m&&!E,"hover:[transform:rotateY(180deg)]":!m&&!E}),children:[(0,a.jsx)("div",{className:"absolute inset-0 flex size-full items-center justify-center [backface-visibility:hidden] [transform:rotateY(0deg)]",children:_?(0,a.jsx)(i.default,{fill:!0,alt:"profile-img",className:"size-full rounded-full",src:"".concat(d.v.PROFILE_IMAGE_CDN,"/").concat(g.profileImageKey)}):(0,a.jsx)("span",{className:"text-neutral-101 transition-all duration-500 dark:text-neutral-white",children:f})}),!E&&(0,a.jsx)("div",{className:"absolute inset-0 flex size-full items-center justify-center [backface-visibility:hidden] [transform:rotateY(180deg)]",children:(0,a.jsxs)("span",{className:"text-[8px] font-semibold leading-4 text-primary",children:[Math.round(h),"%"]})})]})]})}},65535:function(e,t,n){"use strict";var a,i,r,o,l,s,c;n.d(t,{l$:function(){return a},xb:function(){return i}}),(l=a||(a={})).MODAL_UPLOAD_TYPE="modalUploadType",l.IDEATE_TEMPLATE_ID="templateId",l.IDEATE_PROJECT_ID="projectId",l.MODEL_LIST_ID="modelListId",l.STYLE_LIST_ID="styleListId",l.ASPECT_RATIO="aspect_ratio",l.GENERATE_PREVIEW="generatePreview",l.INSPIRATION_USED="inspirationUsed",l.RANDOM_PROMPT_USED="randomPromptUsed",l.HAS_SHOWN_CROPPER="hasShownCropper",l.LIGHTING_LIST_ID="lightingListId",l.CAMERA_LIST_ID="cameraListId",l.OPEN_AUTO_SHORT_CREATION_MODAL="openAutoShortCreationModal",l.SCRIPT="script",l.LANGUAGE="language",l.CATEGORY_ID="categoryId",l.SELECTED_TAB="selectedTab",l.CATEGORY="category",l.MODEL_ID="modelId",l.ASSET_ID="assetId",l.REDIRECTED_FROM_ASSETS="redirectedFromAssets",l.PROMPT="prompt",l.DISABLE_IMAGE_GUIDANCE="disableImageGuidance",l.ADD_SOUND="addSound",l.VIDEO_ID="videoId",l.INSTRUMENTAL="instrumental",(s=i||(i={})).TOOL="tool",s.HAS_DETECTED_FACE="hasDetectedFace",(c=r||(r={})).PAGE="page",c.PAGE_SIZE="pageSize",c.MONTH="month",c.YEAR="year",(o||(o={})).PROMPT="prompt"},62351:function(e,t,n){"use strict";n.d(t,{o:function(){return a}});let a={HAS_SEEN_DASHBOARD_ANNOUNCEMENT:"hasSeenDashboardAnnouncement",HAS_SEEN_EXPORT_ANNOUNCEMENT:"hasSeenExportAnnouncement",UNREAD_UPDATES_PAGE:"unreadUpdatesPage",HAS_SEEN_UPDATES_MODAL:"hasSeenUpdatesModal",HAS_AUTOSHOTS_BETA_ACCESS:"hasAutoshotsBetaAccess",HAS_SEEN_IMAGINE_BOT_FIRST_TIME_TOOLTIP:"hasSeenImagineBotFirstTimeTooltip",HAS_STORYBOARD_BETA_ACCESS:"hasStoryboardBetaAccess",SHOULD_NOTIFY_REWARD:"shouldNotifyReward",HAS_SEEN_IMAGE_FEEDBACK_MODAL:"hasSeenImageFeedbackModal",HAS_SEEN_VIDEO_FEEDBACK_MODAL:"hasSeenVideoFeedbackModal",HAS_DISABLED_TEXT_TO_VIDEO_CREDIT_CONSUMPTION_CONSENT_MODAL:"hasDisabledTextToVideoCreditConsumptionConsentModal",HAS_SEEN_ONBOARDING_PERSONA_MODAL:"hasSeenOnboardingPersonaModal"}},82721:function(e,t,n){"use strict";n.d(t,{A:function(){return h},R:function(){return I}});var a=n(27573),i=n(7653),r=n(81695),o=n(8699),l=n(72987),s=n(14671),c=n(10899),d=n(27688),u=n(4369),m=n(67728),g=n(97994),p=n(93800),f=n(14935);let _=e=>{let{selectedAspectRatio:t,supportedAspectRatios:n,onUploadImage:a,onCropImage:_,defaultBaseImage:E,supportedFileTypes:h=c.Em,dimensionRestrictions:I=f._,onDeleteImage:v=()=>{},onSearchParamsImageUpload:S=()=>{},...T}=e,[x,N]=(0,i.useState)(),[A,C]=(0,i.useState)(null!=E?E:null),O=null!=t?t:n[0],{aspect:y}=(0,g.i)({selectedAspectRatio:O,selectedFile:A,setCrop:N}),R=!(null==x?void 0:x.width)&&!(null==x?void 0:x.height),b=(0,r.useSearchParams)(),P=(0,o.O_)(),{loadImageAndComputeClosestAspectRatio:D}=(0,p.k)(),w=(0,i.useCallback)(e=>{C(e),a(e)},[a]),M=(0,i.useCallback)(()=>{let e=document.createElement("input");e.type="file",e.accept=h,e.style.display="none";let t=async t=>{var n;if(null===(n=e.files)||void 0===n?void 0:n.length){if(null===t.target)return;let n=e.files[0];if(n.size>d.Tb){s.ZP.error("File size is too large. Max file size is ".concat(d.Tb/1024/1024," MB"));return}let i=await (0,m.z0)(n);C(i),a(i)}else document.body.removeChild(e)};e.addEventListener("change",t),document.body.appendChild(e),e.click(),document.body.removeChild(e)},[a,h]),G=(0,i.useCallback)(async()=>{if(!x||!A)return;let e=await (0,m.cA)(x,A,y);await (0,m.X4)(e,I),_({image:A,croppedImage:e,aspectRatio:O})},[y,O,x,I,_,A]),L=(0,i.useCallback)(async()=>{if(!x||!A)return null;let e=await (0,m.cA)(x,A,y);return await (0,m.X4)(e,I),e},[y,x,I,A]),U=(0,i.useCallback)(()=>{C(null),N(void 0),v()},[v]),j=(0,i.useCallback)(async e=>{let{files:t,onSuccess:n=()=>{},onError:i=()=>{}}=e;if(t&&t.length>0){var r;if(t.length>1){i(Error("Please upload a single image"));return}let e=t[0];if(!e.type.startsWith("image/")){i(Error("Invalid file type. Please upload an image."));return}if(e.size>d.Tb){i(Error("File size is too large. Max file size is ".concat(d.Tb/1024/1024,"MB.")));return}let o=e instanceof DataTransferItem?null===(r=e.webkitGetAsEntry)||void 0===r?void 0:r.call(e):null;if(null==o?void 0:o.isDirectory){i(Error("Please upload an Image file"));return}let l=await (0,m.z0)(e);C(l),a(l),n()}else i(Error("No files provided"))},[a]);return(0,i.useEffect)(()=>{(async()=>{try{if(!A||!T.shouldEstimateClosestAspectRatio)return;let e=await D({image:A,aspectRatios:n.map(u.q)});T.onUpdateAspectRatio(e.value)}catch(e){}})()},[A,T.shouldEstimateClosestAspectRatio]),(0,i.useEffect)(()=>{(async()=>{let e=new URLSearchParams(b);try{let t=e.get(l.u.IMAGE);if(!t)return;let n=await (0,m.WW)(t);C(n),S(n)}catch(t){s.ZP.error("Failed to load image from search params"),e.delete(l.u.IMAGE),window.history.replaceState({},"","".concat(window.location.pathname,"?").concat(e.toString()))}})()},[S,b]),{crop:x,setCrop:N,isClient:P,aspect:y,baseImage:A,handleUploadImage:M,handleAddImageWithValidations:G,handleGetCroppedImageWithValidations:L,handleDeleteImage:U,handleDropImage:j,dimensionRestrictions:I,handleSetSelectedImage:w,hasNoSelection:R}},E=(0,i.createContext)(void 0),h=e=>{let{children:t,...n}=e,r=_({...n}),o=(0,i.useMemo)(()=>r,[r]);return(0,a.jsx)(E.Provider,{value:o,children:t})},I=()=>{let e=(0,i.useContext)(E);if(void 0===e)throw Error("useImageCropperContext must be used within an ImageCropperProvider");return e}},59504:function(e,t,n){"use strict";n.d(t,{R:function(){return s},Y3:function(){return c}});var a=n(27573),i=n(7653),r=n(57582);let o=e=>(0,r.Ue)(t=>({userCampaignBasedFlags:e,updateFlagStatus:(e,n)=>t(t=>({userCampaignBasedFlags:t.userCampaignBasedFlags.map(t=>t.user_flag===e?{...t,status:n}:t)}))})),l=(0,i.createContext)(null),s=e=>{let{initialValues:t,children:n}=e,r=(0,i.useMemo)(()=>o(t),[t]),s=r(e=>e.userCampaignBasedFlags),c=r(e=>e.updateFlagStatus),d=(0,i.useMemo)(()=>({userCampaignBasedFlags:s,updateFlagStatus:c}),[s,c]);return(0,a.jsx)(l.Provider,{value:d,children:n})},c=()=>{let e=(0,i.useContext)(l);if(!e)throw Error("useUserCampaignBasedFlags must be used within a UserCampaignBasedFlagsProvider");return e}},27688:function(e,t,n){"use strict";var a,i,r,o,l,s,c,d;n.d(t,{$5:function(){return o},Cs:function(){return i},Kz:function(){return m},Tb:function(){return g},U9:function(){return r},gs:function(){return a},nC:function(){return u}}),(l=a||(a={})).UPLOAD="upload",l.GENERATE="generate";let u=[{label:"Upload Image",value:"upload"},{label:"Generate Image",value:"generate"}];(s=i||(i={})).DRAGGABLE="draggable",s.DRAGGING="dragging",s.ERROR="error",s.LOADING="loading",s.UPLOADED="uploaded";let m=10,g=10485760;(c=r||(r={})).DEFAULT="default",c.LOADING="loading",c.ERROR="error",c.GENERATED="generated",(d=o||(o={})).INSPIRATION="inspiration",d.UPLOAD="upload",d.GENERATE="generate"},25252:function(e,t,n){"use strict";n.d(t,{w:function(){return l}});var a=n(27573),i=n(7653),r=n(7609),o=n(73501);let l=(0,i.forwardRef)((e,t)=>{let{onClick:n,product:i,...l}=e,s=(0,o.n)(e=>e.open),c=(0,o.n)(e=>e.setProduct);return i!==(0,o.n)(e=>e.product)&&c(i),(0,a.jsx)(r.zx,{type:"button",ref:t,...l,onClick:e=>{null==n||n(e),s()}})});l.displayName="BuyMoreTokensModalCTA"},35117:function(e,t,n){"use strict";n.d(t,{o:function(){return g}});var a=n(7653),i=n(83057),r=n(61504),o=n(73868),l=n(3742),s=n(64932),c=n(47495),d=n(84474),u=n(68887),m=n(82561);let g=()=>{var e;let t=(0,l.wE)({enabled:!0}),n=(0,l.XG)(),g=(0,a.useRef)(!1),p=(0,u.z)(t.data,e=>e.assets),f=(0,d.Nj)(p),{data:_,isFetching:E}=(0,s.I)({refetchInterval:i.mR,enabled:f}),{hasStatusChanged:h}=(0,o.M)({processingAssets:_,isFetching:E}),I=(0,r.d)(!1),[v,S]=(0,a.useState)(-1),{filteredFinishedVideos:T,filteredFinishedVideosIndexMap:x}=(0,a.useMemo)(()=>{let e=p.filter(e=>{let{code:t,settings:n}=e;return t===c._.FINISHED||"true"===n.background_audio&&(t===c._.PROCESSING||t===c._.PENDING)});return{filteredFinishedVideos:e,filteredFinishedVideosIndexMap:e.reduce((e,t,n)=>{let{uuid:a}=t;return e.set(a,n)},new Map)}},[p]);return(0,a.useEffect)(()=>{p&&h&&!g.current&&(g.current=!0,n())},[n,p,h]),{videos:p,filteredFinishedVideos:T,filteredFinishedVideosIndexMap:x,getAllVideosStatusQuery:t,modalHandler:I,currentVideoIndex:v,setCurrentVideoIndex:S,pendingVideosCount:null!==(e=null==_?void 0:_.length)&&void 0!==e?e:0,updateProcessingVideosCache:(e,t)=>{var n;let a=(0,m.bH)(t),i=[...null!==(n=null==e?void 0:e.assets)&&void 0!==n?n:[],a];return{...e,assets:i}}}}},99076:function(e,t,n){"use strict";n.d(t,{q:function(){return E}});var a=n(94904),i=n(90244),r=n(41225),o=n(65535),l=n(57872),s=n(99319),c=n(45902),d=n(60839),u=n(37250),m=n(45432),g=n(58414),p=n(66910),f=n(85479),_=n(39016);let E=()=>{let{mutateAsync:e,isLoading:t}=(0,d.L)(_.j.TEXT_TO_IMAGE),n=(0,s.O)("textToImageVideoGen"),{setPreviewAreaDisplayState:E}=(0,u.D)(),h=(0,l.w)(),I=(0,a.useUserStoreContext)()(e=>e.user),{aggregator:v}=(0,g.O)(),S=(0,f.R)(e=>e.completeImageGenerationLoadingOnGivenCollection),T=(0,f.R)(e=>e.completeImageGenerationWithErrorOnGivenCollection),x=(0,f.R)(e=>e.addImageToGivenCollectionWithLoading),N=(0,f.R)(e=>e.createCollectionWithSettings),A=(0,f.R)(e=>e.resetCollectionStore),C=(0,f.R)(e=>e.setImageLoadingOnGivenCollection),{vagErrorHandler:O}=(0,c.a)(),y=async(t,n)=>{let a=x(n,void 0);try{var o,l;let s=await e({data:t,isPremium:!0});if(!s)throw Error("Processing stopped");v.log(i.H0.sync_generated.withProperties({tokens_consumed:Number(null!==(o=s.cost)&&void 0!==o?o:0),distinct_id:null==I?void 0:I.id,email:null==I?void 0:I.email}));let c=localStorage.getItem(r.F.TOKENS_CONSUMED);localStorage.setItem(r.F.TOKENS_CONSUMED,String(Number(null!==(l=s.cost)&&void 0!==l?l:0)+Number(c))),S({image:s,imageId:a.imageId,collectionId:n})}catch(e){T({imageId:a.imageId,collectionId:n}),O(e)}},R=async(e,t)=>{await Promise.all(Array.from({length:e.num_images}).map(async(n,a)=>{await y(e,t),await new Promise(e=>setTimeout(e,1e4*a))}))};return{handleGeneratePreviewImages:async e=>{if(!I){h({searchParams:{[o.l$.GENERATE_PREVIEW]:"true"}});return}let t=(0,p.SN)(e.prompt,e.style.tag),a={...n,aspect_ratio:e.aspect_ratio,prompt:null!=t?t:e.prompt};A(),localStorage.removeItem(r.F.TEXT_TO_VIDEO_CHOSEN_PREVIEW_INDEX),E(m.E.GENERATION_PREVIEW);let{collectionId:i}=N(a);R(a,i)},isLoadingPreviewImages:t,handleVariatePreviewImages:async e=>{A(),localStorage.removeItem(r.F.TEXT_TO_VIDEO_CHOSEN_PREVIEW_INDEX);let{collectionId:t}=N(e.settings);R(e.settings,t)},handleSingleFailedImageRetry:async(t,a)=>{if(!t.images.find(e=>e.id===a))throw Error("Image not found");let o={...n,aspect_ratio:t.settings.aspect_ratio,prompt:t.settings.prompt};C(a,!0,t.id);try{var l,s;let n=await e({data:o,isPremium:!0});if(!n)throw Error("Processing stopped");v.log(i.H0.sync_generated.withProperties({tokens_consumed:Number(null!==(l=n.cost)&&void 0!==l?l:0),distinct_id:null==I?void 0:I.id,email:null==I?void 0:I.email}));let c=localStorage.getItem(r.F.TOKENS_CONSUMED);localStorage.setItem(r.F.TOKENS_CONSUMED,String(Number(null!==(s=n.cost)&&void 0!==s?s:0)+Number(c))),S({image:n,imageId:a,collectionId:t.id})}catch(e){T({imageId:a,collectionId:t.id}),O(e)}}}}},21706:function(e,t,n){"use strict";n.d(t,{TextToVideo:function(){return eN}});var a=n(27573),i=n(94904),r=n(26048),o=n(35494),l=n(1708),s=n(76223),c=n(94183),d=n(37250),u=n(36962),m=n(50294),g=n(7609),p=n(41225),f=n(43456),_=n(14507);let E=e=>{let{editorUpgradeBannerItem:{analytics_cta_source:t,description:n,img:i,title:r}}=e,{setUpgradeModalParams:o}=(0,_.i)(e=>({setUpgradeModalParams:e.setUpgradeModalParams}));return(0,a.jsxs)("div",{className:"mb-4 flex w-full shrink-0 items-center justify-between gap-8 rounded-2xl bg-neutral-white pr-4 dark:bg-neutral-91",children:[(0,a.jsxs)("div",{className:"flex w-full items-stretch",children:[(0,a.jsx)("div",{className:"pointer-events-none relative w-[108px] shrink-0 select-none overflow-hidden rounded-l-2xl",children:(0,a.jsx)(m.default,{alt:r,src:i,fill:!0,className:"size-full object-cover object-center"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 py-4",children:[(0,a.jsx)("p",{className:"font-semibold text-neutral-101 dark:text-neutral-white",children:r}),(0,a.jsx)("p",{className:"text-sm text-neutral-71 dark:text-neutral-41",children:n})]})]}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)(g.zx,{size:"xl",variant:"outline-secondary",className:"shrink-0",onClick:()=>{localStorage.setItem(p.F.ADD_TO_CART_CTA,t),o({isOpen:!0,upgradeablePlanNames:f.M})},children:"Upgrade now!"})})]})};var h=n(41179),I=n(81695),v=n(7653),S=n(93351),T=n(72987),x=n(50499),N=n(90244),A=n(65535),C=n(82721),O=n(13697),y=n(76820),R=n(35350),b=n(37950),P=n(78851),D=n(68988),w=n(93264),M=n(58414),G=n(77440),L=n(30743),U=n(99076);let j=()=>{let{formHook:e}=(0,O.G)(),{handleTextToVideoGeneration:t}=(0,P.i)(),{handleGeneratePreviewImages:n}=(0,U.q)(),a=(0,I.useSearchParams)(),r=(0,i.useUserStoreContext)()(e=>e.user),o=(0,v.useRef)(!1),l=(0,v.useRef)(!1),{isLoading:s}=(0,y.X4)(),{isLoading:c}=(0,y.jE)(),{handleGetCroppedImageWithValidations:d}=(0,C.R)(),u="true"===a.get(T.u.GENERATE),m="true"===a.get(A.l$.GENERATE_PREVIEW),g="true"===a.get(T.u.RECREATE),f="true"===a.get(A.l$.INSPIRATION_USED),_="true"===a.get(A.l$.RANDOM_PROMPT_USED),E="true"===a.get(A.l$.ADD_SOUND),j=a.get(A.l$.VIDEO_ID),{aggregator:F}=(0,M.O)(),{page:V,source:k,userStatus:H,userPlan:z,userPlanPeriod:B,email:W,tokenRemaining:Y,id:K}=(0,R.T)(),$=(0,h.useQueryClient)(),Z=(0,S.qo)({control:e.control,name:"prompt"}),{mutateAsync:q}=(0,w.E)(),X=(0,S.qo)({control:e.control,name:"image"}),Q=(0,S.qo)({control:e.control,name:"hasHitPromptCaptionApi"}),J=!!a.get(T.u.IMAGE),{videoCost:ee}=(0,b.G)();return(0,v.useEffect)(()=>{m&&!g&&Z&&r&&!J&&!l.current&&(l.current=!0,e.handleSubmit(e=>n(e))())},[J,Z,m,g,r]),(0,v.useEffect)(()=>{let e=async()=>{if(!j)return;await q({videoUuid:j,videoPrompt:Z}),$.invalidateQueries({queryKey:[D.lk.VIDEO_GENERATED]});let e=new URLSearchParams(window.location.search);e.delete(A.l$.ADD_SOUND),e.delete(A.l$.VIDEO_ID),window.history.replaceState({},"","".concat(window.location.pathname,"?").concat(e.toString()))};E&&e()},[E,j,Z,q,$]),(0,v.useEffect)(()=>{u&&!g&&Z&&r&&(J&&X&&Q||!J)&&!o.current&&!s&&!c&&(o.current=!0,e.handleSubmit(async e=>{let n=(0,x.G)(e.prompt),a={ai_bot_used:!1,aspect_ratio:e.aspect_ratio,camera_used:e.camera.title,upload_image:e.has_uploaded_custom_image,email:W,enhance_prompt:e.enhance_prompt,lightning_used:e.lighting.title,model_used:e.model.name,page_name:V,prompt_text:n.promptText1,prompt_text_2:n.promptText2,prompt_text_3:n.promptText3,source:k,style_used:e.style.style_name,user_account_status:H,user_plan:z,user_plan_period:B,tokens_remaining:Y-ee,video_generation_tool:f?"inspiration-recreate":"dashboard-generate-button",recreate:e.recreate,inspiration_used:f,random_prompt_used:_,distinct_id:K};if(e.image&&!e.croppedImage){let t=await d();e.croppedImage=t}return t({data:e,onSuccess:e=>{let t=0;Array.isArray(e)&&(t=e.reduce((e,t)=>{var n;return e+(null!==(n=t.cost)&&void 0!==n?n:0)},0)),F.log(N.H0.video_generated.withProperties({...a,processing_status:"Successful",tokens_consumed:t}));let n=localStorage.getItem(p.F.TOKENS_CONSUMED);localStorage.setItem(p.F.TOKENS_CONSUMED,String(Number(null!=t?t:0)+Number(n)));let i=new URLSearchParams(window.location.search);i.delete(A.l$.MODEL_LIST_ID),i.delete(A.l$.STYLE_LIST_ID),i.delete(A.l$.ASPECT_RATIO),i.delete(T.u.IMAGE),i.delete(T.u.PROMPT),i.delete(T.u.GENERATE),i.delete(A.l$.INSPIRATION_USED),i.delete(A.l$.RANDOM_PROMPT_USED),window.history.replaceState({},"","".concat(window.location.pathname,"?").concat(i.toString()))},onError:e=>{F.log(N.H0.video_generated.withProperties({...a,processing_status:"Failure",processing_error:(0,L.extractVagErrorMessage)(e)}))},onSettled:()=>{var e;o.current=!1;let t=null!==(e=localStorage.getItem(p.F.GEN_TILL_EXPORT))&&void 0!==e?e:0;localStorage.setItem(p.F.GEN_TILL_EXPORT,String(Number(t)+1))}})})(),e.setValue(G.mr.RECREATE,!1),e.setValue(G.mr.RANDOM_PROMPT_CLICKED,!1),e.setValue("hasHitPromptCaptionApi",!1))},[r,Z,J,X,Q,u,g,s,c]),null};var F=n(82561),V=n(8699),k=n(85065),H=n(27185),z=n(22051),B=n(47228),W=n(20282),Y=n(39364),K=n(25094);let $=()=>{let{formHook:e}=(0,O.G)(),t=(0,V.O_)(),n=(0,K.B)();(0,W.M)({containerId:z.q.DASHBOARD_SCROLL_AREA,fetchNextPage:n.fetchNextPage,hasNextPage:!!n.hasNextPage,isFetchingNextPage:n.isFetchingNextPage,threshold:.7});let i=(0,Y.T)(n.data);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.f,{inspirationsContent:i,onPromptClick:t=>{e.setValue("prompt",t.attributes.prompt),e.setValue("should_focus",!0)},isLoading:!t||n.isLoading,fallback:(0,a.jsx)(k.B,{})}),n.isFetchingNextPage&&(0,a.jsx)(H.Spinner,{className:"my-4 size-9"})]})};var Z=n(90883),q=n(10665);let X=()=>(0,a.jsx)("div",{className:"flex size-full flex-col items-center justify-center px-6",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6 pb-32 pt-14",children:[(0,a.jsx)(q.VHk,{className:"h-[136px] w-[120px]"}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)("h3",{className:"text-center font-medium text-neutral-101 dark:text-neutral-white",children:"Create your first project"}),(0,a.jsx)("p",{className:"text-center text-sm text-neutral-71 dark:text-neutral-41",children:"Get started with your first ever project, scroll through our inspirations"})]})]})});var Q=n(78354),J=n(31505),ee=n(86282),et=n(28740),en=n(50360),ea=n(45666),ei=n(70745),er=n(47495),eo=n(84474),el=n(40577),es=n(59141),ec=n(10126),ed=n(68255),eu=n(57126),em=n(11599),eg=n(75649);let ep=e=>{let{video:t,handleCardClick:n,forceAbort:i}=e,{width:r,height:o,videoHasSound:l,isSoundOn:s,toggleSound:c,isLoading:d,setIsLoading:u,isHovering:m,setIsHovering:g,isVideoLoading:p,refCallback:f,handleUsePrompt:_,handleRecreateClick:E,handleAddSound:h,isAddingSound:I,downloadVideo:v,handleDeleteVideo:S}=(0,eg.f)({video:t,forceAbort:i});return(0,a.jsxs)("div",{tabIndex:0,role:"button",onClick:n,onKeyDown:n,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),className:"group relative w-full cursor-pointer overflow-hidden rounded bg-neutral-21 dark:bg-neutral-91",style:{aspectRatio:"".concat(r,"/").concat(o)},children:[l&&(0,a.jsx)(eu.u,{isSoundOn:s,toggleSound:c}),(0,a.jsx)("img",{src:(0,eo.q6)(t.url.thumbnail),alt:"Video thumbnail",loading:"lazy",className:(0,ed.cn)("absolute inset-0 size-full rounded object-cover opacity-0 transition-opacity",{"opacity-100":!d,"opacity-0":d,"animate-pulse":p&&!d}),onLoad:()=>u(!1),onError:()=>u(!1)}),(0,a.jsxs)("video",{loop:!0,muted:!(l&&m&&s),playsInline:!0,ref:f,controlsList:"nodownload",className:(0,ed.cn)("absolute inset-0 size-full rounded object-cover opacity-0 transition-opacity duration-300",{"opacity-100":!d||!p}),children:[(0,a.jsx)("p",{children:"Your browser does not support HTML5 video."}),(0,a.jsx)("track",{kind:"captions"})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex size-full flex-col items-stretch justify-end bg-[linear-gradient(180deg,rgba(0,0,0,0.00)_37.77%,rgba(0,0,0,0.32)_65.93%,rgba(0,0,0,0.48)_78.19%,rgba(0,0,0,0.64)_87.41%,rgba(0,0,0,0.80)_98.87%)] p-3 opacity-0 transition-opacity group-hover:opacity-100",children:(0,a.jsx)(em.V,{handleEditPrompt:_,handleSingleRecreate:E,soundSettings:l?void 0:{isAddingSound:I,handleAddSound:h},handleDownload:v,handleDelete:S})})]})};var ef=n(19454),e_=n(21972),eE=n(27948),eh=n(48812);let eI=e=>{var t,n;let{videos:i,closeModal:r,isModalOpen:o,setIsModalOpen:l,currentVideoIndex:s,setCurrentVideoIndex:c,onDownload:d}=e,u=i[s],{isAddingSound:m,isPopulatingFormData:g,videoProps:p,promptToBeUsed:f,modelUsed:_,isImageGuidanceDisabled:E,handleRecreateClick:h,handleUsePrompt:I,handleUseImage:v,handleAddSound:S}=(0,eE.l)({video:u,modalSettings:{isModalOpen:o,closeModal:r,setCurrentVideoIndex:c}});return(0,a.jsx)(ef.$E,{open:o,onOpenChange:l,children:(0,a.jsxs)(ef.Yk,{className:"size-full max-h-[calc(100vh-16px)] max-w-[calc(100vw-16px)] rounded-[18px] bg-neutral-21",children:[(0,a.jsx)(ef.Zh,{btnProps:{className:"right-4 top-4"}}),(0,a.jsx)(ef.mp,{className:"sr-only",children:"Video Player"}),(0,a.jsx)(ef.eq,{className:"sr-only",children:"Play your selected video and browse through the library"}),(0,a.jsx)(e_.jL,{children:(0,a.jsx)(ef.DQ,{className:"flex-row",children:(0,a.jsx)(eh.q,{hasReferenceImage:!!(p.image&&!E),onDownload:d,promptToBeUsed:f,closeModal:r,videos:i,aspectRatio:null!==(n=null===(t=u.settings.video_params)||void 0===t?void 0:t.aspect_ratio)&&void 0!==n?n:u.settings.aspect_ratio,model:_,handleUsePrompt:I,handleUseImage:v,handleRecreateClick:h,isRecreating:g,currentVideoIndex:s,setCurrentVideoIndex:c,handleAddSound:S,isAddingSound:m,variation:u.settings.variation})})})]})})},ev=e=>{var t,n;let{video:i,handleVideoCardClick:r,isModalOpen:o}=e,{settings:l,uuid:s,code:c,url:d}=i,u=null!==(n=null===(t=l.video_params)||void 0===t?void 0:t.aspect_ratio)&&void 0!==n?n:l.aspect_ratio;return(0,eo.$C)(i)?l.background_audio?(0,a.jsx)(ec.p,{aspectRatio:u},s):(0,a.jsx)(es.S,{aspectRatio:u},s):c===er._.FINISHED?(0,a.jsx)(ep,{video:i,forceAbort:o,handleCardClick:()=>r(s)},s):c===er._.FAILED?(0,a.jsx)(ei.HandleTextToVideoGenerationProvider,{children:(0,a.jsx)(el.G,{uuid:s,settings:l,thumbnail:(0,eo.q6)(d.thumbnail),aspectRatio:u})},s):null},eS=e=>{let{isError:t=!1,handleVideoCardClick:n,videos:i,isModalOpen:r=!1,isFetchingNextPage:o=!1}=e,l=(0,v.useRef)(null),s=(0,J.MG)({count:i.length,estimateSize:()=>300,getScrollElement:()=>document.getElementById(z.q.DASHBOARD_SCROLL_AREA),getItemKey:e=>i[e].uuid,lanes:3,measureElement:e=>e.getBoundingClientRect().height,overscan:15}),{getTotalHeight:c,getItemPosition:d}=(0,ee.s)({items:i.map(e=>{var t,n;return{aspectRatio:null!==(n=null===(t=e.settings.video_params)||void 0===t?void 0:t.aspect_ratio)&&void 0!==n?n:e.settings.aspect_ratio}}),virtualizedContainerRef:l,lanes:3}),u=s.getVirtualItems();return t?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center p-2",children:(0,a.jsx)("code",{children:"Something went wrong while fetching your videos. Please reload the page."})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ea.Y,{virtualizedContainerRef:l,style:{height:c()},children:u.map(e=>{let t=i[e.index];return(0,a.jsx)("div",{style:{position:"absolute",...d(e.index)},ref:s.measureElement,"data-index":e.index,children:(0,a.jsx)(ev,{video:t,handleVideoCardClick:n,isModalOpen:r})},t.uuid)})}),o&&(0,a.jsx)(et.f,{children:(0,a.jsx)(en.Z,{})})]})};var eT=n(35117);let ex=()=>{let e=(0,i.useUserStoreContext)()(e=>e.user),{isLoadingTextToVideoGeneration:t}=(0,P.i)(),n=(0,Z.l)(),r=!!e,{videos:o,filteredFinishedVideos:l,filteredFinishedVideosIndexMap:s,modalHandler:c,getAllVideosStatusQuery:d,currentVideoIndex:u,setCurrentVideoIndex:m}=(0,eT.o)(),g=d.isLoading&&r,p=!t&&g||0===o.length||!r;return((0,W.M)({containerId:z.q.DASHBOARD_SCROLL_AREA,fetchNextPage:d.fetchNextPage,hasNextPage:!!d.hasNextPage,isFetchingNextPage:d.isFetchingNextPage,threshold:.7}),p&&g)?(0,a.jsx)(Q.m,{}):p&&!g?(0,a.jsx)(X,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eS,{videos:o,handleVideoCardClick:e=>{let t=s.get(e);void 0!==t&&(m(t),c.openModal())},isFetchingNextPage:d.isFetchingNextPage}),c.isModalOpen&&(0,a.jsx)(eI,{videos:l,currentVideoIndex:u,setCurrentVideoIndex:m,onDownload:n,...c})]})},eN=e=>{let{doesUserHaveVideos:t}=e,n=(0,i.useUserStoreContext)()(e=>e.user),{isSubscriptionActive:m}=(0,c.y)(),g=(0,s.V)({defaultTab:t?F.QC.MY_CREATIONS:F.QC.INSPIRATIONS,tabsValueSet:F.a1}),{setShowDropzone:p}=(0,d.D)(),{text_to_video:f}=(0,u.Td)()(e=>e.editorUpgradeBannerConfig);return j(),(0,a.jsxs)("div",{onDragEnter:e=>{e.dataTransfer.types.includes("Files")&&p(!0),e.preventDefault(),e.stopPropagation()},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},children:[!m&&!!n&&(0,a.jsx)(E,{editorUpgradeBannerItem:f}),(0,a.jsxs)(l.c,{currentTab:g,className:"size-full",children:[(0,a.jsx)(o.i,{currentTab:g,tabs:F.oV,className:"top-0 pb-4 pt-0"}),(0,a.jsx)(r.GenericTabContent,{className:"size-full pt-4",value:F.QC.MY_CREATIONS,children:(0,a.jsx)(ex,{})}),(0,a.jsx)(r.GenericTabContent,{className:"pt-4",value:F.QC.INSPIRATIONS,children:(0,a.jsx)($,{})})]})]})}},33757:function(e,t,n){"use strict";n.d(t,{X:function(){return m}});var a=n(7653),i=n(94904),r=n(15218),o=n(62351),l=n(82633),s=n(69517),c=n(66266),d=n(36962),u=n(24162);let m=e=>{let{announcementFlag:t,variant:n}=e,m=(0,u.T)(t),g=(0,d.Td)()(e=>e.announcementModal)[n],{mutate:p}=(0,l.yH)(),f=(0,s.u)(e=>e.setIsOpen),_=(0,i.useUserStoreContext)()(e=>e.subscription),{isSubscriptionActive:E}=(0,r.L1)(_);return(0,a.useCallback)(()=>{(null==g?void 0:g.is_enabled)&&(null==g?void 0:g.should_use_trigger)&&!m&&!E&&(f(!0,o.o.HAS_SEEN_EXPORT_ANNOUNCEMENT===t?c.Z.EXPORT:c.Z.DASHBOARD),p({name:t,status:!0}))},[t,null==g?void 0:g.is_enabled,null==g?void 0:g.should_use_trigger,m,E,f,p])}},33339:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});var a=n(7653);let i=e=>{let t=(0,a.useRef)(e);return t.current=e,t}},25094:function(e,t,n){"use strict";n.d(t,{B:function(){return u}});var a=n(64940),i=n(53590),r=n.n(i),o=n(41054),l=n(70179);let s={populate:{category:{fields:["*"]}}},c=async e=>{let{page:t=1,categoryId:n}=e,a={...s,pagination:{page:t,pageSize:50},filters:n?{category:{id:{$eq:n}}}:{}},{data:i}=await l.i.get("".concat("/api/video-feeds","?").concat(r().stringify(a)),{next:{tags:[o.l.VIDEO_DASHBOARD_FEED]}},{throwOnError:!0});return i};var d=n(992);let u=function(){let{categoryId:e,enabled:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!0};return(0,a.useInfiniteQuery)({queryKey:[d.X.VIDEO_DASHBOARD_FEED,e],queryFn:t=>{let{pageParam:n}=t;return c({page:n,categoryId:e})},getNextPageParam:e=>{let{page:t,pageCount:n}=e.meta.pagination;return t<n?t+1:void 0},staleTime:864e5,enabled:t})}},39364:function(e,t,n){"use strict";n.d(t,{T:function(){return r}});var a=n(7653),i=n(74497);let r=(e,t)=>{let[n,r]=(0,a.useState)([]),o=(0,a.useRef)(0);return(0,a.useEffect)(()=>{r([]),o.current=0},[t]),(0,a.useEffect)(()=>{let t=(null==e?void 0:e.pages)||[];if(t.length>o.current){let e=[];for(let n=o.current;n<t.length;n++)e=e.concat((0,i.Sy)(t[n].data));o.current=t.length,r(t=>[...t,...e])}},[e]),n}},21741:function(e,t,n){"use strict";n.d(t,{X:function(){return g}});var a=n(7653),i=n(41225),r=n(62351);let o=(0,n(57582).Ue)()(e=>({open:!1,type:"image",openModal:t=>e({open:!0,type:t}),closeModal:t=>e({open:!1,type:t}),setModalOpen:(t,n)=>e({open:n,type:t})}));var l=n(36962),s=n(24162),c=n(82633);let d=e=>{let t=Number(localStorage.getItem(e));return Number.isNaN(t)?0:t},u=(e,t)=>{localStorage.setItem(e,t.toString())},m={image:{flagName:r.o.HAS_SEEN_IMAGE_FEEDBACK_MODAL,localStorageKey:i.F.NUM_EXPORTS_IMAGE},video:{flagName:r.o.HAS_SEEN_VIDEO_FEEDBACK_MODAL,localStorageKey:i.F.NUM_EXPORTS_VIDEO}},g=()=>{let{type:e,open:t,openModal:n,closeModal:i}=o(),{mutate:r}=(0,c.yH)(),g=(0,s.T)(m.image.flagName),p=(0,s.T)(m.video.flagName),f=(0,l.Td)()(e=>e.imageDashboard.feedback_modal),_=(0,l.Td)()(e=>e.videoDashboard.feedback_modal),E=(0,a.useMemo)(()=>({image:{...f,hasSeenModal:g},video:{..._,hasSeenModal:p}}),[g,p,f,_]);return{title:E[e].title,description:E[e].description,cta:E[e].cta,isOpen:t,closeModal:()=>i(e),incrementExports:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(E[e].hasSeenModal)return;let{flagName:a,localStorageKey:i}=m[e],o=d(i)+t;u(i,o),o>=E[e].threshold&&(r({name:a,status:!0}),n(e),localStorage.removeItem(i))}}}},97994:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});var a=n(7653),i=n(68148);let r=e=>{let{selectedAspectRatio:t,selectedFile:n,setCrop:r}=e,[o,l]=t?t.split(":"):["1","1"],s=Number(o)/Number(l);return(0,a.useEffect)(()=>{if(!n)return;let e=new Image;e.src=n,e.onload=()=>{let{naturalWidth:t,naturalHeight:n}=e;r((0,i._H)((0,i.YG)({unit:"%",height:100,width:100},s,t,n),t,n))}},[s,n,r]),{aspect:s}}},93800:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var a=n(7653);n(10665);let i=e=>{let{aspectRatios:t,height:n,width:a}=e,i=a/n,r=t.map(e=>{let[t,n]=e.value.split(":").map(Number);return{ar:e,diff:Math.abs(t/n-i)}}),{ar:o}=r.reduce((e,t)=>e.diff<t.diff?e:t,r[0]);return o};var r=n(67728);let o=()=>({loadImageAndComputeClosestAspectRatio:(0,a.useCallback)(async e=>{let{image:t,aspectRatios:n}=e,{width:a,height:o}=await (0,r.po)(t);return i({aspectRatios:n,height:o,width:a})},[])})},2516:function(e,t,n){"use strict";n.d(t,{G:function(){return c}});var a=n(7653),i=n(37547);let r={FULL:100,HIGH:50,WARNING:25};var o=n(76820),l=n(94183),s=n(36962);let c=()=>{var e,t,n,c,d,u;let{data:m}=(0,o.jE)(),{isSubscriptionActive:g,assignedTokens:p}=(0,l.y)(),f=(0,s.Td)()(e=>e.freeTierDailyTokens),_=(null==m?void 0:m.tokens)||[],E=_.find(e=>e.plan_id===i.r.FREE),h=_.find(e=>e.plan_id===i.r.SUBSCRIPTION),I=_.find(e=>e.plan_id===i.r.TOPUP),v=0,S=0,T=null!==(e=null==I?void 0:I.balance)&&void 0!==e?e:0;g?(v=null!=p?p:0,S=null!==(t=null==h?void 0:h.balance)&&void 0!==t?t:0):(null==h?void 0:h.balance)?T+=h.balance:(v=f,S=null!==(n=null==E?void 0:E.balance)&&void 0!==n?n:0);let x=v>0?(v-S)/v*100:0,N=v>0?S/v*100:0,A=N>r.HIGH&&N<r.FULL,C=N<=r.HIGH&&N>=r.WARNING,O=N<r.WARNING,y=(0,a.useMemo)(()=>0===S&&T>0,[S,T]);return{isSubscriptionActive:g,remainingTokens:S,totalTokens:null!==(c=null==m?void 0:m.total)&&void 0!==c?c:0,usagePercentage:x,remainingPercentage:N,isFull:100===N,isHigh:A,isWarning:C,isCritical:O,freeBalance:null!==(d=null==E?void 0:E.balance)&&void 0!==d?d:0,subscriptionBalance:null!==(u=null==h?void 0:h.balance)&&void 0!==u?u:0,topupBalance:T,totalCredits:v,shouldHideCreditUsage:y}}},99319:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var a=n(7653),i=n(32138),r=n(36962),o=n(53505),l=n(51997);let s=e=>{let{modelListId:t,styleListId:n,controlListId:s,cameraListId:c,lightingListId:d,...u}=(0,l.m)(e),m=(0,i.ic)(t),g=(0,i.l$)(n),p=(0,i.oP)(c),f=(0,i.yW)(d),_=(0,i.$I)(s),E=(0,r.Td)()(e=>e.textToImageSviImageGuidance);return(0,a.useMemo)(()=>{let e=E[_.parameter];return{...u,model:m,style:g,image_guidance:{...E,mode:_.parameter,modeId:_.id,strength:"strength"in e?e.strength.medium:void 0,image:null,croppedImage:null},should_focus:!1,activeTab:o.V0.IMAGINE,random_prompt_clicked:!1,camera:p,lighting:f}},[p,_.id,E,f,m,g,u,_.parameter])}},24162:function(e,t,n){"use strict";n.d(t,{T:function(){return r}});var a=n(65432);let i=(e,t)=>{var n;return null!==(n=e.get(t))&&void 0!==n&&n},r=e=>{let t=(0,a.UT)()(e=>e.flags);return null!=e&&i(t,e)}},82633:function(e,t,n){"use strict";n.d(t,{Sk:function(){return h},yH:function(){return I}});var a,i,r,o,l,s=n(965),c=n(30629),d=n(94904),u=n(89226),m=n(64711);let g=(0,n(83632).A)();g["Content-Type"]="application/json";let p=new u.h({baseURL:m.v.FLAGS_API_URL,defaultHeadersGenerator:()=>g});(a=r||(r={})).USER_FLAGS="/user/flags",a.ALL_USER_FLAGS="/user/flags/all",(i=o||(o={})).IMAGINE_WEB="IMAGINE_WEB",i.IMAGINE_ANDROID="IMAGINE_ANDROID",i.IMAGINE_IOS="IMAGINE_IOS";let f=async e=>{let{name:t}=e,{data:n}=await p.get(r.USER_FLAGS,{params:{name:t,platform:o.IMAGINE_WEB},cache:"no-cache"},{throwOnError:!0});return n.result},_=async e=>{let{data:t}=await p.post(r.USER_FLAGS,{body:{...e,platform:o.IMAGINE_WEB}},{throwOnError:!0});return t.result};var E=n(65432);(l||(l={})).USER_FLAGS="UserFlags";let h=e=>{let t=(0,d.useUserStoreContext)()(e=>e.user);return(0,s.useQuery)({queryKey:[l.USER_FLAGS,e],queryFn:()=>f({name:e}),enabled:!!t,staleTime:1/0})},I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldUpdateOnSuccess:!0,shouldUpdateOptimistically:!1},{setFlag:t,flagsMap:n}=(0,E.UT)()(e=>({setFlag:e.setFlag,flagsMap:e.flags}));return(0,c.useMutation)({mutationFn:_,onMutate:a=>{let i=n.get(a.name);return e.shouldUpdateOptimistically&&t(a.name,a.status),{prevValue:i}},onSuccess:(n,a)=>{e.shouldUpdateOnSuccess&&!e.shouldUpdateOptimistically&&t(a.name,a.status)},onError:(n,a,i)=>{e.shouldUpdateOptimistically&&(null==i?void 0:i.prevValue)!==void 0&&t(a.name,i.prevValue)}})}},48354:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var a=n(30629),i=n(49925);let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.useMutation)({mutationFn:i.m,...e})}},64932:function(e,t,n){"use strict";n.d(t,{I:function(){return c}});var a=n(965);n(7653);var i=n(83057),r=n(94904),o=n(68988),l=n(47495),s=n(55364);let c=function(){let{enabled:e=!0,refetchInterval:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,r.useUserStoreContext)()(e=>e.user);return(0,a.useQuery)({queryKey:[o.lk.VIDEO_PROCESSING],queryFn:async()=>(await (0,s.Z)({status:l.l.PROCESSING})).data,select:e=>e.assets,enabled:!!n&&e,refetchInterval:t,staleTime:i.dV})}},33305:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(27573);let i=(0,n(7653).memo)(e=>{let t,n,{aspectRatio:i="1:1",baseSize:r=18,stroke:o=1.5,padding:l=1}=e,[s,c]=i.split(":").map(Number),d=r-o,u=o/2+l;return s>c?(t=d,n=c/s*d):(n=d,t=s/c*d),(0,a.jsx)("div",{className:"flex shrink-0 grow-0 items-center justify-center",style:{width:"".concat(r,"px"),height:"".concat(r,"px"),padding:"".concat(u,"px")},children:(0,a.jsx)("div",{style:{width:"".concat(t-u,"px"),boxShadow:"0 0 0 ".concat(o,"px currentColor"),height:"".concat(n-u,"px"),borderRadius:"".concat(u,"px")}})})});i.displayName="AspectRatioVisual"},4369:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});var a=n(27573),i=n(33305);let r=e=>({value:e,Icon:()=>(0,a.jsx)(i.Z,{aspectRatio:e}),eventId:"".concat(e,"_bttn-GA"),isPremium:!1})},21784:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});let a=(e,t)=>!e||0===e.length||t&&e.includes(t)},97336:function(e,t,n){"use strict";var a,i;n.d(t,{e:function(){return a},v:function(){return r}}),(i=a||(a={})).REIMAGINE="reimagine",i.STRUCTURE="structure",i.FACE="face",i.STYLE="style",i.EDIT="edit";let r=["face","style"]},45432:function(e,t,n){"use strict";n.d(t,{E:function(){return a}});let a={IMAGE_CROPPER:"image-cropper",GENERATION_PREVIEW:"generation-preview",SELECTED_PREVIEW:"selected-preview",NO_IMAGE:"no-image"}},37250:function(e,t,n){"use strict";n.d(t,{D:function(){return N},TextToVideoSettingsProvider:function(){return x}});var a=n(27573),i=n(7653),r=n(93351),o=n(72987),l=n(24752),s=n(94904),c=n(14671),d=n(22051),u=n(13697),m=n(59504),g=n(57872),p=n(40323),f=n(32138),_=n(74188),E=n(36962),h=n(43812),I=n(45432);let v=[I.E.GENERATION_PREVIEW,I.E.SELECTED_PREVIEW],S=()=>{let[e,t]=(0,i.useState)(I.E.NO_IMAGE),[n,a]=(0,i.useState)("Generate"),{isEnabled:S}=(0,p.y)("enable_enhance_prompt"),[T,x]=(0,i.useState)(!1),{formHookRef:N,formHook:A}=(0,u.G)(),C=(0,g.w)(),O=(0,s.useUserStoreContext)()(e=>e.user),[y,R,b]=(0,r.qo)({name:["model","image","has_uploaded_custom_image"],control:A.control}),P=e===I.E.SELECTED_PREVIEW,D=(0,_.V)(),{isProcessingImage:w,setIsProcessingImage:M}=(0,h.a)(e=>({isProcessingImage:e.isProcessing,setIsProcessingImage:e.setIsProcessing})),{textToVideo:G}=(0,E.Td)()(e=>e.defaultSettings),L=!!R,U=y.is_image_guidance_disabled,j=!!G.generate_preview,F=v.includes(e),V=(0,E.Td)()(e=>e.textToVideoModels),{userCampaignBasedFlags:k}=(0,m.Y3)(),H=(0,i.useMemo)(()=>V.filter(e=>!e.restricted_campaign_id||k.some(t=>t.status&&t.campaign_id===e.restricted_campaign_id)),[V,k]),z=(0,E.Td)()(e=>e.textToVideoStyles),B=(0,E.Td)()(e=>e.textToVideoCameraEffects),W=(0,E.Td)()(e=>e.textToVideoLightingEffects),Y=(0,f.I4)(G.modelListId),K=(0,f.T1)(G.styleListId),$=(0,i.useMemo)(()=>{let e=y.common_supported_aspect_ratios_for_i2v_and_t2v,t=y.supported_aspect_ratios_for_t2v,n=y.supported_aspect_ratios_for_i2v;return L?[...e,...n]:[...e,...t]},[y,L]);return(0,i.useEffect)(()=>{e===I.E.NO_IMAGE&&N.current.setValue("croppedImage",null)},[e,N]),(0,i.useEffect)(()=>{(async()=>{if(!R||P)return;if(!O){C();return}let e=A.getValues("aspect_ratio");if($.includes(e))try{let{caption:e}=await D.mutateAsync({data:{image:R}});A.setValue("prompt",e);let t=new URLSearchParams(window.location.search);A.setValue("hasHitPromptCaptionApi","true"===t.get(o.u.GENERATE)),A.setValue("should_focus",!0)}catch(e){(0,l.H)(e),c.Am.error("Failed to caption image")}})()},[R]),(0,i.useEffect)(()=>{let e=N.current.getValues("aspect_ratio"),n=$.find(t=>t===e);if(!y||n)return;let a=!!N.current.getValues("image"),i=document.querySelector(d.j.TOAST_BAR);a&&(N.current.setValue("croppedImage",null),N.current.setValue("image",null),t(I.E.NO_IMAGE),i||c.Am.warning("The selected model does not support the aspect ratio in the added image. ".concat(F?"Please generate preview again":"Please reselect the image."))),N.current.setValue("aspect_ratio",$[0])},[N,$,y,F]),(0,i.useEffect)(()=>{U&&(F||L)&&(N.current.setValue("image",""),N.current.setValue("croppedImage",""),N.current.setValue("has_uploaded_custom_image",!1),t(I.E.NO_IMAGE),c.Am.warning("The selected model does not support image guidance. Please select a different model."))},[U,N,F,L]),(0,i.useEffect)(()=>{M(D.isLoading)},[D.isLoading,M]),{defaultModel:Y,defaultStyle:K,isEnhancedPromptEnabled:S,isImageGuidanceDisabled:U,isImageSelected:L,styles:z,supportedAspectRatios:$,textToVideoCameraEffects:B,textToVideoLightingEffects:W,textToVideoModels:H,isProcessingImage:w,previewAreaDisplayState:e,setPreviewAreaDisplayState:t,shouldGeneratePreview:j,promptBoxCtaLabel:n,setPromptBoxCtaLabel:a,hasUploadedCustomImage:b,hasGeneratedPreviews:F,hasSelectedPreviewImage:P,showDropzone:T,setShowDropzone:x}},T=(0,i.createContext)(null),x=e=>{let{children:t}=e,n=S();return(0,a.jsx)(T.Provider,{value:n,children:t})},N=()=>{let e=(0,i.useContext)(T);if(null===e)throw Error("useTextToVideoSettingsContext must be used within a TextToVideoSettingsProvider");return e}},77440:function(e,t,n){"use strict";n.d(t,{c4:function(){return o},iR:function(){return l},mr:function(){return r}});var a=n(41270),i=n(72075);let r={PROMPT:"prompt",ASPECT_RATIO:"aspect_ratio",MODEL_LIST_ID:"modelListId",STYLE_LIST_ID:"styleListId",CAMERA_LIST_ID:"cameraListId",LIGHTING_LIST_ID:"lightingListId",ENHANCE_PROMPT:"enhance_prompt",MODEL:"model",STYLE:"style",IMAGE:"image",CROPPED_IMAGE:"croppedImage",SHOULD_FOCUS:"should_focus",RECREATE:"recreate",RANDOM_PROMPT_CLICKED:"random_prompt_clicked"},o=i.SB.omit({supported_aspect_ratios:!0}).extend({is_image_guidance_disabled:a.z.boolean().optional(),inf_time:a.z.number(),effect:a.z.string().optional(),common_supported_aspect_ratios_for_i2v_and_t2v:a.z.string().array(),supported_aspect_ratios_for_t2v:a.z.string().array(),supported_aspect_ratios_for_i2v:a.z.string().array(),should_generate_image_first:a.z.boolean().optional(),image_key:a.z.string().optional(),default_payload:a.z.any().optional(),analytic_name:a.z.string().optional(),default_audio_support:a.z.boolean().optional(),restricted_campaign_id:a.z.number().optional(),analytic_color:a.z.string().optional(),model_type:a.z.string().optional()}),l=a.z.object({model:o,prompt:i.Pp,style:i.Ht,lighting:i.c7,camera:i.c7,aspect_ratio:a.z.string(),enhance_prompt:a.z.boolean().optional().default(!1),image:i.KA.optional(),croppedImage:i.KA.optional(),should_focus:a.z.boolean().optional().default(!1),recreate:a.z.boolean().optional().default(!1),generate_preview:a.z.boolean().optional(),hasHitPromptCaptionApi:a.z.boolean().optional(),random_prompt_clicked:a.z.boolean().optional(),has_uploaded_custom_image:a.z.boolean().optional().default(!1),has_used_image_variation:a.z.boolean().optional().default(!1)})},49925:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});var a=n(78293),i=n(66910);let r=async e=>await a.p.delete("".concat(i.TG.ASSETS,"/").concat(e),{headers:{"Content-Type":"multipart/form-data"}},{throwOnError:!0})},26327:function(e,t,n){"use strict";n.d(t,{HB:function(){return g},HS:function(){return m},V7:function(){return f},XF:function(){return p},Yi:function(){return E},hu:function(){return _}});var a=n(51790),i=n.n(a),r=n(75127),o=n.n(r),l=n(24752),s=n(78293),c=n(66910),d=n(30743);let u=e=>{if(e)return new URLSearchParams(o()(e,i()))},m=async e=>{let{requestOptions:t,params:n}=e,a=await s.p.get("".concat(c.TG.ASSETS_STATUS),{...t,params:u(n)},{throwOnError:!0});try{a.data.assets.forEach(e=>{"metadata"in e.settings&&(e.settings.metadata="string"==typeof e.settings.metadata?JSON.parse(e.settings.metadata):e.settings.metadata)})}catch(e){(0,l.H)(e)}return a},g=async e=>{let{assetId:t,params:n}=e;return s.p.get("".concat(c.TG.ASSETS,"/").concat(t).concat(c.TG.STATUS),{params:u(n)},{throwOnError:!0})},p=async e=>{let{requestOptions:t,params:n}=e,a=await s.p.get("".concat(c.TG.ASSETS_STATUS),{...t,params:u({...n,service:c.qb.USER})},{throwOnError:!0});try{a.data.assets.forEach(e=>{"metadata"in e.settings&&(e.settings.metadata="string"==typeof e.settings.metadata?JSON.parse(e.settings.metadata):e.settings.metadata)})}catch(e){(0,l.H)(e)}return a},f=async e=>{let{requestOptions:t,params:n}=e;return s.p.get("".concat(c.TG.PUBLIC_UNAUTH_ASSETS),{...t,params:u(n),headers:{...null==t?void 0:t.headers,...(0,d.getShouldSkipVagAuthInterceptorHeader)(!0)}},{throwOnError:!0})},_=async e=>{let{requestOptions:t,params:n}=e;return s.p.get("".concat(c.TG.PUBLIC_ASSETS),{...t,params:u(n)},{throwOnError:!0})},E=async e=>{let{requestOptions:t,params:n}=e;return s.p.get("".concat(c.TG.FAVORITE_ASSETS),{...t,params:u(n)},{throwOnError:!0})}},47495:function(e,t,n){"use strict";var a,i,r,o;n.d(t,{_:function(){return a},l:function(){return i}}),(r=a||(a={}))[r.PENDING=0]="PENDING",r[r.PROCESSING=1]="PROCESSING",r[r.FINISHED=2]="FINISHED",r[r.FAILED=-1]="FAILED",(o=i||(i={})).PROCESSING="processing",o.FINISHED="finished",o.ERROR="error"},58016:function(e,t,n){"use strict";n.d(t,{i_:function(){return u}});var a=n(97336),i=n(39016),r=n(54375),o=n(67728),l=n(66910);let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.4;return e?"(".concat(e.trim(),":").concat(t,")"):""},c=(e,t)=>{let n=t.match(/^\w+\s+\w+/),a=t.match(/(\w+\s+\w+)\W*$/);if(!n||!a||!n.length||!a.length)return e;let i=n[0].replace(/^\W+|\W+$/gm,""),r=a[0].replace(/^\W+|\W+$/gm,""),o=e.indexOf(i),l=e.lastIndexOf(r);if(-1===o||-1===l)return e;let c=e.substring(o,l+r.length),d=e.substring(0,o),u=e.substring(l+r.length).replace(/\.$/g,"");return"".concat(s(d),' "').concat(c,'" ').concat(s(u)).trim()},d=async e=>{let t=e.image_guidance.croppedImage,n=e.image_guidance,i=e.image_guidance.mode,r=e.image_guidance.strength,l={};if(!t)return l;if(!i||null==r)throw Error("Invalid control mode or strength mode");switch(i){case a.e.STRUCTURE:{let e=n[i];l.image=await (0,o.K$)(t),l.control_weight=r,l.variation=e.variation;break}case a.e.REIMAGINE:{let e=n[i];l.image=await (0,o.K$)(t),l.variation=e.variation,l.strength=r;break}case a.e.FACE:{let e=n[i];l.image=await (0,o.K$)(t),l.variation=e.variation,l.control_weight=r;break}case a.e.STYLE:{let e=n[i];l.image=await (0,o.K$)(t),l.variation=e.variation,l.control_weight=r;break}case a.e.EDIT:{let e=n[i];l.image=await (0,o.K$)(t),l.variation=e.variation}}return l},u=async(e,t,n)=>{var a,s,u;let m=e.image_guidance.reimagine.image_caption||"",g=c(e.prompt,m),p=(0,l.SN)(g,null===(a=e.model)||void 0===a?void 0:a.init_prompt,null===(s=e.style)||void 0===s?void 0:s.init_prompt),f={prompt:null!=p?p:"",style_id:e.model.model_id,enable_hr:e.model.enable_hr,aspect_ratio:e.aspect_ratio,variation:t,enable_layer_diffusion:!!e.model.enable_layer_diffusion,enable_adetailer:!!e.model.enable_adetailer,is_enhance:e.enhance_prompt?1:0};if(e.style.tag&&(f.enhance_style=e.style.tag),e.lighting.value&&(f.enhance_lighting=e.lighting.value),e.camera.value&&(f.enhance_camera_angle=e.camera.value),e.model.effect&&(f.effect=e.model.effect),t===i.j.IMAGE_TO_IMAGE&&n){let t=await (0,o.K$)(n);return f.denoising_strength=null!==(u=e.denoising_strength)&&void 0!==u?u:.6,f.image=t,(0,r.wh)(f)}let _=await d(e),E={...f,..._};return(0,r.wh)(E)}},66266:function(e,t,n){"use strict";var a,i;n.d(t,{Z:function(){return a}}),(i=a||(a={})).DASHBOARD="dashboard",i.EXPORT="export"},69517:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});var a=n(57582),i=n(66266);let r=(0,a.Ue)()(e=>({isOpen:!1,variant:i.Z.DASHBOARD,setIsOpen:(t,n)=>e(()=>({isOpen:t,variant:null!=n?n:i.Z.DASHBOARD}))}))},73501:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});var a=n(57582),i=n(23611);let r=(0,a.Ue)()(e=>({isOpen:!1,product:i.pK.IMAGINE,setProduct:t=>e({product:t}),setIsOpen:t=>e({isOpen:t}),open:()=>e({isOpen:!0})}))},8832:function(e,t,n){"use strict";n.d(t,{h:function(){return u}});var a=n(42190),i=n(30857),r=n(57582),o=n(64452),l=n(11145),s=n(20260),c=n(64711);let d=e=>{let{collections:t,selectedCollectionId:n}=e;return n?t.findIndex(e=>e.id===n):-1},u=e=>(0,r.Ue)()((0,o.mW)((0,l.n)((t,n)=>({collections:[],selectedImageId:void 0,selectedCollectionId:void 0,setSelectedCollection:e=>{t(t=>{let n=t.collections.find(t=>t.id===(null==e?void 0:e.id));n&&(t.selectedCollectionId=n.id,t.selectedImageId=n.images[0].id)})},setSelectedImage:e=>{t(t=>{let n=t.collections.find(e=>e.id===t.selectedCollectionId);n&&n.images.find(t=>t.id===e)&&(t.selectedImageId=e)})},addImagesToCollection:(r,o,l)=>{t(t=>{let s=d(n()),c=(0,a.cA)(o),u=r.map(e=>({id:(0,i.Z)(),...e,...l?{originalSrc:l.src,originalImageId:l.id,isVariation:!!l}:{}}));if(-1===s||!t.collections[s]){let e=(0,a.cA)({id:(0,i.Z)(),images:u,settings:o});t.collections.unshift(e),t.selectedCollectionId=e.id,t.selectedImageId=e.images[0].id;return}let m=t.collections.findIndex(t=>e(t.settings,c));if(-1!==m)t.collections[m].images.unshift(...u);else{let e=(0,a.P2)({id:(0,i.Z)(),images:u,settings:o});t.collections.unshift(e),t.selectedCollectionId=e.id,t.selectedImageId=e.images[0].id}})},addImageToCollectionWithLoading:(r,o)=>{let l=(0,i.Z)();return t(t=>{let s=d(n()),c=(0,a.cA)(r),u={id:l,src:"",...o?{originalSrc:o.src,originalImageId:o.id,isVariation:!!o}:{},isLoading:!0};if(-1===s||!t.collections[s]){let e=(0,a.cA)({id:(0,i.Z)(),images:[u],settings:r});t.collections.unshift(e),t.selectedCollectionId=e.id,t.selectedImageId=e.images[0].id;return}let m=t.collections.findIndex(t=>e(t.settings,c));if(-1!==m)t.collections[m].images.unshift(u);else{let e=(0,a.P2)({id:(0,i.Z)(),images:[u],settings:r});t.collections.unshift(e),t.selectedCollectionId=e.id,t.selectedImageId=e.images[0].id}}),{imageId:l,collectionId:""}},createCollectionWithSettings:e=>{let n=(0,i.Z)();return t(t=>{let i=(0,a.P2)({id:n,images:[],settings:e});t.collections.unshift(i)}),{collectionId:n}},addImageToGivenCollectionWithLoading:(e,n)=>{let a=(0,i.Z)();return t(t=>{let i={id:a,src:"",...n?{originalSrc:n.src,originalImageId:n.id,isVariation:!!n}:{},isLoading:!0},r=d({collections:t.collections,selectedCollectionId:e});-1!==r&&t.collections[r]&&t.collections[r].images.unshift(i)}),{imageId:a,collectionId:""}},deleteGivenCollection(e){t(t=>{let n=d({collections:t.collections,selectedCollectionId:e});-1!==n&&t.collections[n]&&t.collections.splice(n,1)})},completeImageGenerationLoadingOnGivenCollection(e){let{image:n,imageId:a,collectionId:i}=e;t(e=>{let t=d({collections:e.collections,selectedCollectionId:i});if(-1===t||!e.collections[t])return;let r=e.collections[t].images.find(e=>e.id===a);r&&(r.isLoading=!1,r.src=n.src,r.enhancedPrompt=n.enhancedPrompt,r.watermarkSrc=n.watermarkSrc)})},deleteLoadingImageFromGivenCollection:e=>{let{imageId:n,collectionId:a}=e;t(e=>{let t=d({collections:e.collections,selectedCollectionId:a});-1!==t&&e.collections[t]&&(e.collections[t].images=e.collections[t].images.filter(e=>e.id!==n),e.collections[t].images.length>0||e.collections.splice(t,1))})},setImageLoadingOnGivenCollection:(e,n,a)=>{t(t=>{let i=d({collections:t.collections,selectedCollectionId:a});if(-1===i||!t.collections[i])return;let r=t.collections[i].images.find(t=>t.id===e);r&&(r.isLoading=n,r.isFailed=!1)})},setImageUpscaleOnGivenCollection:(e,n,a,i)=>{t(t=>{let r=d({collections:t.collections,selectedCollectionId:i});if(-1===r||!t.collections[r])return;let o=t.collections[r].images.find(t=>t.id===e);o&&(o.upscaleSrc=n,o.isUpscaled=a)})},deleteImageFromGivenCollection:e=>{let{imageId:n,collectionId:a}=e;t(e=>{let t=d({collections:e.collections,selectedCollectionId:a});-1!==t&&e.collections[t]&&(e.collections[t].images=e.collections[t].images.filter(e=>e.id!==n),e.collections[t].images.length>0||(e.collections=e.collections.filter(n=>{var a;return n.id!==(null===(a=e.collections[t])||void 0===a?void 0:a.id)})))})},setFocusOfOriginalImageOnGivenCollection:(e,n,a)=>{t(t=>{let i=d({collections:t.collections,selectedCollectionId:a});if(-1===i||!t.collections[i])return;let r=t.collections[i].images.find(t=>t.id===e);r&&(r.isFocused=n)})},completeImageGenerationLoading(e){let{image:a,imageId:i}=e;t(e=>{e.collections.forEach(e=>{let t=e.images.find(e=>e.id===i);t&&(t.isLoading=!1,t.src=a.src,a.randomSeed&&(t.randomSeed=a.randomSeed))});let t=d(n());if(-1===t)return;let r=e.collections[t].images.find(e=>e.id===i);r&&(r.src=a.src,r.enhancedPrompt=a.enhancedPrompt,r.isLoading=!1,a.randomSeed&&(r.randomSeed=a.randomSeed))})},deleteLoadingImage(e){t(t=>{var a;let i=d(n());-1!==i&&(t.collections[i].images=t.collections[i].images.filter(t=>t.id!==e),t.collections[i].images.length>0||(t.collections.splice(i,1),t.selectedCollectionId=null===(a=t.collections[0])||void 0===a?void 0:a.id))})},resetCollectionStore:()=>{t(e=>{e.collections=[],e.selectedCollectionId=void 0,e.selectedImageId=void 0})},setImageLoading:(e,a)=>{t(t=>{t.collections.forEach(t=>{let n=t.images.find(t=>t.id===e);n&&(n.isLoading=a)});let i=d(n());if(-1===i)return;let r=t.collections[i].images.find(t=>t.id===e);r&&(r.isLoading=a)})},setImagesUpscale:(e,a,i)=>{t(t=>{t.collections.forEach(t=>{t.images.forEach(t=>{e===t.id&&(t.upscaleSrc=a,t.isUpscaled=i)})});let r=d(n());-1!==r&&t.collections[r].images.forEach(t=>{e===t.id&&(t.upscaleSrc=a,t.isUpscaled=i)})})},deleteImage:e=>{t(t=>{var a;t.collections.forEach(t=>{t.images=t.images.filter(t=>t.id!==e)}),e===t.selectedImageId&&(t.selectedImageId=void 0);let i=d(n());-1!==i&&(t.collections[i].images=t.collections[i].images.filter(t=>t.id!==e),t.collections[i].images.length>0||(t.collections=t.collections.filter(e=>{var n;return e.id!==(null===(n=t.collections[i])||void 0===n?void 0:n.id)}),t.selectedCollectionId=null===(a=t.collections[0])||void 0===a?void 0:a.id))})},setFocusOfOriginalImage:(e,a)=>{t(t=>{let i=d(n());if(-1===i)return;let r=t.collections[i].images.find(t=>t.id===e);r&&(r.isFocused=a)})},completeImageGenerationWithErrorOnGivenCollection:e=>{let{imageId:n,collectionId:a}=e;t(e=>{let t=d({collections:e.collections,selectedCollectionId:a});if(-1===t||!e.collections[t])return;let i=e.collections[t].images.find(e=>e.id===n);i&&(i.isLoading=!1,i.isFailed=!0,i.src="")})}})),{enabled:!c.v.IS_PRODUCTION_DEPLOYMENT&&(0,s.Ep)().isBrowser}))},61780:function(e,t,n){"use strict";n.d(t,{eX:function(){return u},ZO:function(){return d}});var a=n(27573),i=n(7653),r=n(57582),o=n(64452);let l=e=>({...e,image:null,croppedImage:null}),s=e=>{let{version:t}=e;return(0,r.Ue)()((0,o.tJ)(e=>({persistedTextToImageSetting:null,persistedTextToVideoSetting:null,persistedTextToSongSetting:null,persistedTextToSpeechSetting:null,persistedVoiceCloningSetting:null,persistTextToImageSetting:t=>{var n;return e({persistedTextToImageSetting:{...t,image_guidance:{...t.image_guidance,...l(t.image_guidance),reimagine:{...(null===(n=t.image_guidance)||void 0===n?void 0:n.reimagine)||{},image_caption:""}}}})},persistTextToVideoSetting:t=>{let{image:n,croppedImage:a,hasHitPromptCaptionApi:i,...r}=t;return e({persistedTextToVideoSetting:r})},persistTextToSongSetting:t=>e({persistedTextToSongSetting:t}),persistTextToSpeechSetting:t=>e({persistedTextToSpeechSetting:t}),persistVoiceCloningSetting:t=>e({persistedVoiceCloningSetting:t}),resetPersistToolSettingStore:()=>e({persistedTextToImageSetting:null,persistedTextToVideoSetting:null})}),{name:"persist-tool-setting",version:t}))},c=(0,i.createContext)(null),d=()=>{let e=(0,i.useContext)(c);if(!e)throw Error("usePersistToolSettingStoreContext must be used within a PersistToolSettingStoreProvider");return e},u=e=>{let{children:t,version:n}=e,[r]=(0,i.useState)(()=>s({version:n}));return(0,a.jsx)(c.Provider,{value:r,children:t})}},43812:function(e,t,n){"use strict";n.d(t,{a:function(){return a}});let a=(0,n(57582).Ue)(e=>({isProcessing:!1,setIsProcessing:t=>e(()=>({isProcessing:t}))}))},85479:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});let a=(0,n(8832).h)(()=>!1)},65432:function(e,t,n){"use strict";n.d(t,{Ni:function(){return c},UT:function(){return s}});var a=n(27573),i=n(7653),r=n(57582);let o=e=>{let{flags:t}=e,n=t.reduce((e,t)=>(e.set(t.name,t.status),e),new Map);return(0,r.Ue)(e=>({flags:n,setFlag:(t,n)=>{e(e=>{let a=new Map(e.flags);return a.set(t,n),{flags:a}})}}))},l=(0,i.createContext)(null),s=()=>{if(!l)throw Error("useUserBasedFlagsStoreContext must be used within a UserBasedFlagsStoreProvider");return(0,i.useContext)(l)},c=e=>{let{initialState:t,children:n}=e,[r]=(0,i.useState)(()=>o(t));return(0,a.jsx)(l.Provider,{value:r,children:n})}},53505:function(e,t,n){"use strict";var a,i,r,o,l,s,c,d;n.d(t,{A0:function(){return r},Aw:function(){return a},D5:function(){return m},V0:function(){return o},WS:function(){return g},pQ:function(){return u},r:function(){return p}}),(l=a||(a={})).CHARACTER="character",l.OBJECT="object",l.STYLE="style",(s=i||(i={})).MALE="male",s.FEMALE="female",(c=r||(r={})).TOP_STYLES="top-styles",c.COMMUNITY="community",c.MY_MODELS="my-models",c.FAVOURITES="favourites";let u=[{text:"Top Styles",tab:"top-styles"},{text:"Community Models",tab:"community"},{text:"My Models",tab:"my-models"},{text:"Favourites",tab:"favourites"}],m="top-styles";(d=o||(o={})).TOP_STYLES="top-styles",d.IMAGINE="imagine",d.COMMUNITY="community",d.MY_MODELS="my-models",d.FAVOURITES="favourites";let g=[{text:"Imagine Models",tab:"imagine"},{text:"Top Styles",tab:"top-styles"},{text:"Community Models",tab:"community"},{text:"My Models",tab:"my-models"},{text:"Favourites",tab:"favourites"}],p="community"},39016:function(e,t,n){"use strict";var a,i;n.d(t,{j:function(){return a}}),(i=a||(a={})).TEXT_TO_IMAGE="txt2img",i.IMAGE_TO_IMAGE="img2img"},19591:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});var a=n(47495);let i=new Set([a._.PENDING,a._.PROCESSING])},84474:function(e,t,n){"use strict";n.d(t,{$C:function(){return o},Nj:function(){return l},QJ:function(){return m},Vn:function(){return r},fZ:function(){return u},q6:function(){return d},xN:function(){return c}});var a=n(47495),i=n(19591);let r=e=>e.code===a._.FAILED,o=e=>i.E.has(e.code),l=e=>e.some(e=>o(e)),s=(e,t)=>{if(e.length!==t.length)return;let n=t.reduce((e,t)=>(e.set(t.id,t),e),new Map);return e.find(e=>{var t;let i=e.code,r=null===(t=n.get(e.id))||void 0===t?void 0:t.code;return i!==r&&r===a._.FINISHED})},c=(e,t)=>void 0!==s(e,t),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null!=e&&e.length>t?e[t]:""},u=e=>[e],m=(e,t)=>e&&0!==e.length?Array(t).fill("").map((t,n)=>d(e,n)):Array(t).fill("")},20260:function(e,t,n){"use strict";n.d(t,{Ep:function(){return l},fo:function(){return s},lV:function(){return c}});var a,i,r=n(26066),o=n(23903);(a=i||(i={})).USER_ID="userId",a.X_VERCEL_IP_COUNTRY="X-Vercel-IP-Country",a.TOKEN="token";let l=()=>({isBrowser:!0,isServer:!1}),s=e=>null==e?void 0:e.split(" ").map(e=>e[0]).splice(0,2).join(""),c=e=>{var t,n;let{existingCountry:a,isDevDeployment:i,isStagingDeployment:l}=e,s=null!==(t=r.Z.get(o.y.COUNTRY_CODE))&&void 0!==t?t:"US",c=r.Z.get(o.y.COUNTRY_OVERRIDE);return i||l?null!==(n=null!=c?c:a)&&void 0!==n?n:s:null!=a?a:s}}},function(e){e.O(0,[9881,6340,6292,8610,8252,8570,178,1665,5981,2821,3098,3950,7220,6808,8160,4116,566,4093,9545,1530,1790,3215,6746,3246,4204,3590,6569,1773,665,4414,7516,3173,3001,4031,7128,9957,4191,4309,4347,1293,1528,1744],function(){return e(e.s=338)}),_N_E=e.O()}]);