<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BooIsha - Textiles & Fabrics</title>
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="fabrics.css" />
  </head>
  <body>
    <div class="menu-overlay" onclick="closeSideMenu()"></div>

    <!-- Side Menu -->
    <div class="side-menu">
      <div class="menu-header">
        <h2>Fabric Categories</h2>
        <button class="menu-close" onclick="closeSideMenu()">X</button>
      </div>
      <div class="menu-content">
        <!-- Silk Fabrics -->
        <div class="fabric-category">
          <div class="category-header" onclick="toggleCategory(this)">
            <h3>Silk Fabrics</h3>
            <span class="category-arrow">▼</span>
          </div>
          <div class="fabric-list">
            <div class="fabric-item" onclick="filterByFabric('Mulberry Silk')">
              <span>Mulberry Silk</span>
              <span class="fabric-count">8</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Tussar Silk')">
              <span>Tussar Silk</span>
              <span class="fabric-count">6</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Chanderi Silk')">
              <span>Chanderi Silk</span>
              <span class="fabric-count">4</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Banarasi Silk')">
              <span>Banarasi Silk</span>
              <span class="fabric-count">5</span>
            </div>
            <div
              class="fabric-item"
              onclick="filterByFabric('Kanjivaram Silk')"
            >
              <span>Kanjivaram Silk</span>
              <span class="fabric-count">3</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Mysore Silk')">
              <span>Mysore Silk</span>
              <span class="fabric-count">4</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Eri Silk')">
              <span>Eri Silk</span>
              <span class="fabric-count">2</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Muga Silk')">
              <span>Muga Silk</span>
              <span class="fabric-count">2</span>
            </div>
          </div>
        </div>

        <!-- Cotton Fabrics -->
        <div class="fabric-category">
          <div class="category-header" onclick="toggleCategory(this)">
            <h3>Cotton Fabrics</h3>
            <span class="category-arrow">▼</span>
          </div>
          <div class="fabric-list">
            <div class="fabric-item" onclick="filterByFabric('Khadi Cotton')">
              <span>Khadi Cotton</span>
              <span class="fabric-count">12</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Organic Cotton')">
              <span>Organic Cotton</span>
              <span class="fabric-count">15</span>
            </div>
            <div
              class="fabric-item"
              onclick="filterByFabric('Handloom Cotton')"
            >
              <span>Handloom Cotton</span>
              <span class="fabric-count">8</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Cotton Canvas')">
              <span>Cotton Canvas</span>
              <span class="fabric-count">6</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Cotton Voile')">
              <span>Cotton Voile</span>
              <span class="fabric-count">4</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Cotton Lawn')">
              <span>Cotton Lawn</span>
              <span class="fabric-count">5</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Cotton Poplin')">
              <span>Cotton Poplin</span>
              <span class="fabric-count">7</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Cotton Twill')">
              <span>Cotton Twill</span>
              <span class="fabric-count">6</span>
            </div>
          </div>
        </div>

        <!-- Linen Fabrics -->
        <div class="fabric-category">
          <div class="category-header" onclick="toggleCategory(this)">
            <h3>Linen & Natural Fibers</h3>
            <span class="category-arrow">▼</span>
          </div>
          <div class="fabric-list">
            <div class="fabric-item" onclick="filterByFabric('Pure Linen')">
              <span>Pure Linen</span>
              <span class="fabric-count">8</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Hemp Fabric')">
              <span>Hemp Fabric</span>
              <span class="fabric-count">5</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Jute Fabric')">
              <span>Jute Fabric</span>
              <span class="fabric-count">6</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Ramie Fabric')">
              <span>Ramie Fabric</span>
              <span class="fabric-count">3</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Bamboo Fabric')">
              <span>Bamboo Fabric</span>
              <span class="fabric-count">4</span>
            </div>
          </div>
        </div>

        <!-- Wool Fabrics -->
        <div class="fabric-category">
          <div class="category-header" onclick="toggleCategory(this)">
            <h3>Wool Fabrics</h3>
            <span class="category-arrow">▼</span>
          </div>
          <div class="fabric-list">
            <div class="fabric-item" onclick="filterByFabric('Pashmina Wool')">
              <span>Pashmina Wool</span>
              <span class="fabric-count">4</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Merino Wool')">
              <span>Merino Wool</span>
              <span class="fabric-count">6</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Cashmere')">
              <span>Cashmere</span>
              <span class="fabric-count">3</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Yak Wool')">
              <span>Yak Wool</span>
              <span class="fabric-count">2</span>
            </div>
          </div>
        </div>

        <!-- Blended Fabrics -->
        <div class="fabric-category">
          <div class="category-header" onclick="toggleCategory(this)">
            <h3>Blended Fabrics</h3>
            <span class="category-arrow">▼</span>
          </div>
          <div class="fabric-list">
            <div
              class="fabric-item"
              onclick="filterByFabric('Cotton-Silk Blend')"
            >
              <span>Cotton-Silk Blend</span>
              <span class="fabric-count">10</span>
            </div>
            <div
              class="fabric-item"
              onclick="filterByFabric('Cotton-Linen Blend')"
            >
              <span>Cotton-Linen Blend</span>
              <span class="fabric-count">8</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Modal Blend')">
              <span>Modal Blend</span>
              <span class="fabric-count">6</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Tencel Blend')">
              <span>Tencel Blend</span>
              <span class="fabric-count">5</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Bamboo Cotton')">
              <span>Bamboo Cotton</span>
              <span class="fabric-count">7</span>
            </div>
          </div>
        </div>

        <!-- Specialty Fabrics -->
        <div class="fabric-category">
          <div class="category-header" onclick="toggleCategory(this)">
            <h3>Specialty & Traditional</h3>
            <span class="category-arrow">▼</span>
          </div>
          <div class="fabric-list">
            <div class="fabric-item" onclick="filterByFabric('Ikat Weave')">
              <span>Ikat Weave</span>
              <span class="fabric-count">6</span>
            </div>
            <div
              class="fabric-item"
              onclick="filterByFabric('Block Print Cotton')"
            >
              <span>Block Print Cotton</span>
              <span class="fabric-count">12</span>
            </div>
            <div
              class="fabric-item"
              onclick="filterByFabric('Kalamkari Fabric')"
            >
              <span>Kalamkari Fabric</span>
              <span class="fabric-count">4</span>
            </div>
            <div
              class="fabric-item"
              onclick="filterByFabric('Bandhani Fabric')"
            >
              <span>Bandhani Fabric</span>
              <span class="fabric-count">5</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Ajrakh Print')">
              <span>Ajrakh Print</span>
              <span class="fabric-count">3</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Brocade')">
              <span>Brocade</span>
              <span class="fabric-count">8</span>
            </div>
            <div class="fabric-item" onclick="filterByFabric('Velvet')">
              <span>Velvet</span>
              <span class="fabric-count">6</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Contact Bar -->
    <div class="contact-bar">
      <div class="contact-bar-content">
        <div class="contact-left">
          Contact us <a href="tel:0478257409">0478 257 409</a>
        </div>
        <div class="theme-toggle-container">
          <button class="arrow-toggle" onclick="toggleThemeMenu()">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div class="theme-menu" id="themeMenu">
            <button
              class="theme-btn"
              onclick="toggleTheme()"
              data-tooltip="Switch to Dark Mode"
            >
              <span class="theme-icon-light"></span>
              <span class="theme-icon-dark"></span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Navigation -->
    <nav>
      <div class="nav-container">
        <div class="logo-container">
          <a href="index.html" class="logo-link">
            <img src="/Images/BooIshaLogo.png" alt="BooIsha Logo" class="logo-img" />
            <div class="logo">BooIsha</div>
          </a>
        </div>
        <div class="breadcrumb">
          <a href="index.html"><span>Home / </span></a>
          <span>Textiles & Fabrics</span>
        </div>
      </div>
    </nav>

    <!-- Header blur is handled by translucent sticky header; no extra strip needed -->

    <!-- Hero Section -->
    <div class="main-content">
      <section class="textiles-hero">
        <div class="textiles-hero-bg"></div>

        <div class="container">
          <div class="container hero-text-container">
            <h1>Premium Textiles & Fabrics</h1>
            <p>
              Exquisite silk, cotton, and artisanal weaves directly from finest
              mills
            </p>
          </div>
        </div>
      </section>

      <!-- Marquee Section -->
      <section class="marquee-section">
        <div class="marquee-content">
          <div class="marquee-item">
            <span class="marquee-icon">✨</span>
            <span>Exclusive 5% Discount on First Bulk Purchase Orders</span>
          </div>
          <div class="marquee-item">
            <span class="marquee-icon">📦</span>
            <span>Premium Quality Guaranteed on All Fabric Collections</span>
          </div>
          <div class="marquee-item">
            <span class="marquee-icon">🚚</span>
            <span>Direct Import from Finest Mills and Artisans</span>
          </div>
        </div>
      </section>

      <!-- Update your existing filter section to include sort options -->
      <section class="filter-section">
        <div class="container">
          <!-- Keep your existing menu toggle -->
          <div class="menu-toggle" onclick="toggleSideMenu()">
            <div class="hamburger">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>

          <!-- Search Row -->
          <div class="search-row">
            <div class="search-input-wrapper">
              <input
                type="text"
                id="fabric-search-input"
                placeholder="Search fabrics... (e.g., silk, cotton, organic, premium)"
                autocomplete="off"
              />
              <button class="search-button" onclick="performFabricSearch()">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path
                    d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                  />
                </svg>
              </button>
              <div id="search-suggestions"></div>
            </div>
          </div>

          <!-- Filter Row -->
          <div class="filter-bar">
            <div class="filter-bar-content">
              <div class="filter-group">
                <label>Category:</label>
                <select
                  class="filter-select"
                  onchange="filterProductsByCategory()"
                >
                  <option>All Categories</option>
                  <option>Silk</option>
                  <option>Cotton</option>
                  <option>Linen</option>
                  <option>Wool</option>
                  <option>Blended Fabrics</option>
                  <option>Specialty</option>
                  <option value="100% Silk">100% Silk</option>
                  <option value="100% Cotton">100% Cotton</option>
                  <option value="100% Linen">100% Linen</option>
                  <option value="Organic">Organic</option>
                  <option value="Handloom">Handloom</option>
                  <option value="Blend">Blended</option>
                </select>
              </div>

              <div class="filter-group">
                <label>Sort by:</label>
                <select
                  class="filter-select"
                  onchange="sortSearchResults(this.value)"
                >
                  <option value="relevance">Relevance</option>
                  <option value="name-asc">Name A-Z</option>
                  <option value="name-desc">Name Z-A</option>
                  <option value="newest">Newest First</option>
                  <option value="category">Category</option>
                </select>
              </div>

              <div class="filter-group">
                <button
                  class="clear-all-filters"
                  onclick="clearAllSearchFilters()"
                >
                  Clear All
                </button>
              </div>

              <!-- Single results count -->
              <div class="results-count">
                <span id="unified-results-display"
                  >Showing 12 of 192 products</span
                >
              </div>
            </div>
          </div>

          <!-- Active Filters Display -->
          <div id="active-search-filters"></div>
        </div>
      </section>
      <!-- Fabric Categories Toggle -->
      <section class="fabric-view-toggle">
        <div class="container">
          <div class="view-toggle-buttons">
            <button class="toggle-btn active" id="categoryViewBtn" onclick="switchToCategories()">Category View</button>
            <button class="toggle-btn" id="allFabricsBtn" onclick="switchToAllFabrics()">All Fabrics</button>
          </div>
        </div>
      </section>

      <!-- Fabric Categories Grid -->
      <section class="fabric-categories-section" id="categoriesView">
        <div class="container">
          <div class="section-header">
            <h2>Our Premium Fabric Collections</h2>
            <p>Discover our curated selection of luxury fabrics, each collection representing the finest quality and craftsmanship from renowned mills worldwide.</p>
          </div>

          <div class="fabric-categories-grid">
            <!-- Premium Silk Collection -->
            <div class="fabric-category-card" onclick="openFabricCategory('silk')">
              <div class="category-image">
                <div class="category-overlay">
                  <h3>Premium Silk Collection</h3>
                  <p>Luxurious silk varieties from heritage weaves to contemporary finishes</p>
                  <div class="fabric-count">34 Fabrics</div>
                  <button class="explore-btn">Explore Collection →</button>
                </div>
              </div>
            </div>

            <!-- Organic Cotton Range -->
            <div class="fabric-category-card" onclick="openFabricCategory('cotton')">
              <div class="category-image cotton-bg">
                <div class="category-overlay">
                  <h3>Organic Cotton Range</h3>
                  <p>Sustainable and ethically sourced cotton fabrics in premium weights</p>
                  <div class="fabric-count">63 Fabrics</div>
                  <button class="explore-btn">Explore Collection →</button>
                </div>
              </div>
            </div>

            <!-- Natural Linen & Fibers -->
            <div class="fabric-category-card" onclick="openFabricCategory('linen')">
              <div class="category-image linen-bg">
                <div class="category-overlay">
                  <h3>Natural Linen & Fibers</h3>
                  <p>Pure linen and natural fiber blends for refined applications</p>
                  <div class="fabric-count">26 Fabrics</div>
                  <button class="explore-btn">Explore Collection →</button>
                </div>
              </div>
            </div>

            <!-- Luxury Wool & Cashmere -->
            <div class="fabric-category-card" onclick="openFabricCategory('wool')">
              <div class="category-image wool-bg">
                <div class="category-overlay">
                  <h3>Luxury Wool & Cashmere</h3>
                  <p>Premium wool varieties including cashmere, merino, and specialty fibers</p>
                  <div class="fabric-count">15 Fabrics</div>
                  <button class="explore-btn">Explore Collection →</button>
                </div>
              </div>
            </div>

            <!-- Designer Blends -->
            <div class="fabric-category-card" onclick="openFabricCategory('blends')">
              <div class="category-image blend-bg">
                <div class="category-overlay">
                  <h3>Designer Blends</h3>
                  <p>Innovative fabric combinations offering unique properties and aesthetics</p>
                  <div class="fabric-count">36 Fabrics</div>
                  <button class="explore-btn">Explore Collection →</button>
                </div>
              </div>
            </div>

            <!-- Heritage & Traditional -->
            <div class="fabric-category-card" onclick="openFabricCategory('heritage')">
              <div class="category-image heritage-bg">
                <div class="category-overlay">
                  <h3>Heritage & Traditional</h3>
                  <p>Time-honored weaves and traditional techniques from master artisans</p>
                  <div class="fabric-count">48 Fabrics</div>
                  <button class="explore-btn">Explore Collection →</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Original Products Grid -->
      <section class="products-listing" id="allFabricsView" style="display: none;">
        <div class="container">
          <div class="products-grid"></div>
        </div>
      </section>

      <!-- Category Modal -->
      <div class="fabric-category-modal" id="fabricCategoryModal">
        <div class="modal-overlay" onclick="closeFabricCategory()"></div>
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="modalCategoryTitle">Premium Silk Collection</h2>
            <button class="modal-close" onclick="closeFabricCategory()">×</button>
          </div>

          <div class="modal-body">
            <div class="category-description">
              <p id="modalCategoryDescription">Discover our exquisite selection of premium silk fabrics...</p>
            </div>

            <div class="modal-search-bar">
              <input type="text" id="modalSearchInput" placeholder="Search within this collection..." />
              <button class="modal-search-btn">🔍</button>
            </div>

            <div class="modal-filters">
              <select id="modalSortFilter">
                <option value="name">Sort by Name</option>
                <option value="newest">Newest First</option>
                <option value="price">Price</option>
              </select>
            </div>

            <div class="modal-products-grid" id="modalProductsGrid">
              <!-- Dynamic products will be loaded here -->
            </div>

            <div class="modal-pagination">
              <button class="modal-prev-btn" onclick="modalPrevPage()">← Previous</button>
              <span class="modal-page-info">Page 1 of 3</span>
              <button class="modal-next-btn" onclick="modalNextPage()">Next →</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Fabric Enquiry Form Modal -->
      <div class="fabric-enquiry-modal" id="fabricEnquiryModal">
        <div class="modal-overlay" onclick="closeFabricEnquiry()"></div>
        <div class="enquiry-modal-content">
          <div class="enquiry-modal-header">
            <h2>Fabric Enquiry</h2>
            <button class="modal-close" onclick="closeFabricEnquiry()">×</button>
          </div>

          <div class="enquiry-modal-body">
            <div class="fabric-enquiry-info">
              <p>You're enquiring about: <strong id="enquiryFabricName">Mulberry Silk</strong></p>
              <p>Our team will provide you with detailed information including specifications, availability, and pricing.</p>
            </div>

            <form id="fabricEnquiryForm" class="elegant-form">
              <div class="form-group">
                <label for="enquiry-name">Full Name</label>
                <input type="text" id="enquiry-name" name="name" required />
              </div>

              <div class="form-group">
                <label for="enquiry-email">Email Address</label>
                <input type="email" id="enquiry-email" name="email" required />
              </div>

              <div class="form-group">
                <label for="enquiry-phone">Phone Number</label>
                <input type="tel" id="enquiry-phone" name="phone" placeholder="+61 1234567890" />
              </div>

              <div class="form-group">
                <label for="enquiry-company">Company/Business (Optional)</label>
                <input type="text" id="enquiry-company" name="company" placeholder="Your business name" />
              </div>

              <div class="form-group">
                <label for="enquiry-quantity">Estimated Quantity</label>
                <select id="enquiry-quantity" name="quantity">
                  <option value="">Select quantity range</option>
                  <option value="1-10">1-10 yards</option>
                  <option value="10-50">10-50 yards</option>
                  <option value="50-100">50-100 yards</option>
                  <option value="100+">100+ yards</option>
                  <option value="bulk">Bulk order (500+ yards)</option>
                </select>
              </div>

              <div class="form-group">
                <label for="enquiry-message">Your Message</label>
                <textarea id="enquiry-message" name="message" rows="4" placeholder="Please describe your requirements, project details, or any specific questions..." required></textarea>
              </div>

              <div class="form-actions">
                <button type="button" class="form-cancel-btn" onclick="closeFabricEnquiry()">Cancel</button>
                <button type="submit" class="form-submit-btn">Send Enquiry</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <section class="combined-section">
        <div class="container">
          <div class="combined-content">
            <!-- CTA Content (Left Side) -->
            <div class="cta-content">
              <h2>Looking for Custom Fabric Solutions?</h2>
              <p>
                We specialize in sourcing specific fabrics for your business
                needs. Contact us for custom orders, bulk pricing, and exclusive
                designs.
              </p>
              <div class="cta-buttons">
                <a href="#enquiry-form" class="cta-btn primary">Send Enquiry</a>
                <a href="tel:0478257409" class="cta-btn secondary">Call Us</a>
              </div>
            </div>

            <!-- Footer Content (Right Side) -->
            <div class="footer-content">
              <div class="footer-logo">BooIsha</div>
              <p class="footer-text">
                Bridging India and Australia through authentic trade and
                commerce
              </p>
              <p class="footer-copyright">
                © 2024 BooIsha. All rights reserved. | ABN: 11 762 603 033
              </p>
            </div>
          </div>
        </div>
      </section>
    </div>
    <div class="chat-widget">
      <button class="chat-toggle" onclick="toggleChat()">
        <div class="chat-avatar">
          <img src="/Images/BooIshaLogo.png" alt="BooIsha Logo" />
        </div>
        <div class="chat-toggle-content">
          <div class="chat-toggle-title">BooIsha Assistant</div>
          <div class="chat-toggle-subtitle">
            Hi, I'm here to help if you have any questions.
          </div>
        </div>
        <div class="close-button" onclick="toggleChat(event)">×</div>
        <div class="notification-badge" id="notification-badge">1</div>
      </button>

      <div class="chat-window welcome-mode" id="chat-window">
        <!-- Welcome Screen - NAB Style -->
        <div class="welcome-screen">
          <div class="welcome-header">
            <h3>BooIsha Messaging</h3>
            <button class="welcome-close" onclick="toggleChat()">×</button>
          </div>

          <div class="welcome-content">
            <div class="welcome-illustration">
              <img src="/Images/BooIshaLogo.png" alt="BooIsha Assistant" />
            </div>

            <h2 class="welcome-title">Message us</h2>

            <ul class="welcome-features">
              <li>Expert textile and spice guidance</li>
              <li>Your messages are safe and secure</li>
              <li>Get instant quotes and bulk pricing</li>
              <li>Connect via WhatsApp for faster response</li>
            </ul>

            <button
              class="start-conversation-btn"
              onclick="startConversation()"
            >
              Start conversation
            </button>
          </div>
        </div>

        <!-- Chat Interface -->
        <div class="chat-interface">
          <div class="chat-header">
            <div>
              <h3>BooIsha Support</h3>
              <div class="chat-status">
                <div class="status-dot"></div>
                <span>Online - Chat or WhatsApp!</span>
              </div>
            </div>
            <div class="header-actions">
              <button
                class="whatsapp-btn"
                onclick="openWhatsApp()"
                title="Chat on WhatsApp"
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path
                    d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.488"
                  />
                </svg>
              </button>
              <button class="chat-close" onclick="toggleChat()">×</button>
            </div>
          </div>

          <div class="chat-messages" id="chat-messages">
            <div class="message bot">
              <div class="message-content">
                Welcome to BooIsha! How can we help you with our premium
                textiles and spices today?
              </div>
            </div>
          </div>

          <div class="quick-actions">
            <div
              class="quick-action"
              onclick="sendQuickMessage('Product Inquiry')"
            >
              Product Inquiry
            </div>
            <div class="quick-action" onclick="sendQuickMessage('Bulk Orders')">
              Bulk Orders
            </div>
            <div class="quick-action" onclick="sendQuickMessage('Pricing')">
              Pricing
            </div>
            <div class="quick-action" onclick="openWhatsApp()">
              WhatsApp Chat
            </div>
          </div>

          <div class="chat-input-area">
            <div class="chat-input-container">
              <input
                type="text"
                class="chat-input"
                id="chat-input"
                placeholder="Type your message..."
                onkeypress="handleKeyPress(event)"
              />
              <button class="send-button" onclick="sendMessage()">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path d="M2,21L23,12L2,3V10L17,12L2,14V21Z" />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="index.js" defer></script>
    <script src="fabrics.js" defer></script>

    <!-- Add this script to enhance your existing fabrics.js functionality -->
    <script>
      // Fabric Category Modal Functionality
      let currentCategory = '';
      let currentModalPage = 1;
      let modalItemsPerPage = 12;

      const categoryData = {
        silk: {
          title: 'Premium Silk Collection',
          description: 'Discover our exquisite selection of premium silk fabrics, featuring luxurious textures from heritage weaves to contemporary finishes. Each piece represents the pinnacle of silk craftsmanship.',
          fabrics: [
            { name: 'Mulberry Silk', category: 'silk', image: '/images/silk1.jpg' },
            { name: 'Tussar Silk', category: 'silk', image: '/images/silk2.jpg' },
            { name: 'Chanderi Silk', category: 'silk', image: '/images/silk3.jpg' },
            { name: 'Banarasi Silk', category: 'silk', image: '/images/silk4.jpg' },
            // Add more silk fabrics here
          ]
        },
        cotton: {
          title: 'Organic Cotton Range',
          description: 'Our organic cotton collection features sustainably sourced, ethically produced fabrics in premium weights. Perfect for conscious fashion and luxury applications.',
          fabrics: [
            { name: 'Organic Cotton Canvas', category: 'cotton', image: '/images/cotton1.jpg' },
            { name: 'Khadi Cotton', category: 'cotton', image: '/images/cotton2.jpg' },
            { name: 'Handloom Cotton', category: 'cotton', image: '/images/cotton3.jpg' },
            // Add more cotton fabrics here
          ]
        },
        linen: {
          title: 'Natural Linen & Fibers',
          description: 'Pure linen and natural fiber blends sourced from premium mills. Our collection offers exceptional drape and durability for refined applications.',
          fabrics: [
            { name: 'Pure Belgian Linen', category: 'linen', image: '/images/linen1.jpg' },
            { name: 'Hemp Fabric', category: 'linen', image: '/images/linen2.jpg' },
            { name: 'Ramie Blend', category: 'linen', image: '/images/linen3.jpg' },
            // Add more linen fabrics here
          ]
        },
        wool: {
          title: 'Luxury Wool & Cashmere',
          description: 'Premium wool varieties including cashmere, merino, and specialty fibers. Each fabric represents the finest quality available from renowned mills.',
          fabrics: [
            { name: 'Cashmere Wool', category: 'wool', image: '/images/wool1.jpg' },
            { name: 'Merino Wool', category: 'wool', image: '/images/wool2.jpg' },
            { name: 'Pashmina Wool', category: 'wool', image: '/images/wool3.jpg' },
            // Add more wool fabrics here
          ]
        },
        blends: {
          title: 'Designer Blends',
          description: 'Innovative fabric combinations offering unique properties and aesthetics. Our designer blends push the boundaries of traditional textile design.',
          fabrics: [
            { name: 'Cotton-Silk Blend', category: 'blends', image: '/images/blend1.jpg' },
            { name: 'Modal Blend', category: 'blends', image: '/images/blend2.jpg' },
            { name: 'Tencel Blend', category: 'blends', image: '/images/blend3.jpg' },
            // Add more blend fabrics here
          ]
        },
        heritage: {
          title: 'Heritage & Traditional',
          description: 'Time-honored weaves and traditional techniques from master artisans. Each piece carries the legacy of generations of textile craftsmanship.',
          fabrics: [
            { name: 'Ikat Weave', category: 'heritage', image: '/images/heritage1.jpg' },
            { name: 'Block Print Cotton', category: 'heritage', image: '/images/heritage2.jpg' },
            { name: 'Ajrakh Print', category: 'heritage', image: '/images/heritage3.jpg' },
            // Add more heritage fabrics here
          ]
        }
      };

      function openFabricCategory(category) {
        currentCategory = category;
        currentModalPage = 1;

        const modal = document.getElementById('fabricCategoryModal');
        const title = document.getElementById('modalCategoryTitle');
        const description = document.getElementById('modalCategoryDescription');

        const data = categoryData[category];
        if (data) {
          title.textContent = data.title;
          description.textContent = data.description;

          loadModalProducts();
          modal.classList.add('active');

          // Prevent body scroll
          document.body.style.overflow = 'hidden';
        }
      }

      function closeFabricCategory() {
        const modal = document.getElementById('fabricCategoryModal');
        modal.classList.remove('active');

        // Re-enable body scroll
        document.body.style.overflow = '';
      }

      function loadModalProducts() {
        const data = categoryData[currentCategory];
        if (!data) return;

        const productsGrid = document.getElementById('modalProductsGrid');
        const searchTerm = document.getElementById('modalSearchInput').value.toLowerCase();

        let filteredFabrics = data.fabrics.filter(fabric =>
          fabric.name.toLowerCase().includes(searchTerm)
        );

        const totalPages = Math.ceil(filteredFabrics.length / modalItemsPerPage);
        const startIndex = (currentModalPage - 1) * modalItemsPerPage;
        const endIndex = startIndex + modalItemsPerPage;
        const currentFabrics = filteredFabrics.slice(startIndex, endIndex);

        productsGrid.innerHTML = currentFabrics.map(fabric => `
          <div class="modal-product-card">
            <div class="modal-product-image" style="background: linear-gradient(135deg, #6d9d8c 0%, #558fcb 100%); height: 200px; border-radius: 10px; margin-bottom: 1rem; position: relative; overflow: hidden;">
              <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.7)); color: white; padding: 1rem;">
                <div style="font-size: 0.8rem; opacity: 0.8;">${fabric.category.toUpperCase()}</div>
              </div>
            </div>
            <h4 style="margin: 0 0 0.5rem 0; color: #2c3e50;">${fabric.name}</h4>
            <p style="color: #6c757d; margin: 0 0 1.5rem 0; font-size: 0.9rem;">Premium quality fabric</p>
            <div style="display: flex; justify-content: center;">
              <button class="enquire-btn" onclick="enquireAboutFabric('${fabric.name}')" style="width: 100%; padding: 10px 20px;">Enquire</button>
            </div>
          </div>
        `).join('');

        // Update pagination
        document.querySelector('.modal-page-info').textContent = `Page ${currentModalPage} of ${totalPages}`;

        // Update button states
        document.querySelector('.modal-prev-btn').disabled = currentModalPage === 1;
        document.querySelector('.modal-next-btn').disabled = currentModalPage === totalPages;
      }

      function modalPrevPage() {
        if (currentModalPage > 1) {
          currentModalPage--;
          loadModalProducts();
        }
      }

      function modalNextPage() {
        const data = categoryData[currentCategory];
        if (!data) return;

        const totalPages = Math.ceil(data.fabrics.length / modalItemsPerPage);
        if (currentModalPage < totalPages) {
          currentModalPage++;
          loadModalProducts();
        }
      }

      function enquireAboutFabric(fabricName) {
        // Close the category modal first
        closeFabricCategory();

        // Set the fabric name in the enquiry form
        document.getElementById('enquiryFabricName').textContent = fabricName;

        // Open the enquiry modal
        const enquiryModal = document.getElementById('fabricEnquiryModal');
        enquiryModal.classList.add('active');

        // Prevent body scroll
        document.body.style.overflow = 'hidden';
      }

      function closeFabricEnquiry() {
        const enquiryModal = document.getElementById('fabricEnquiryModal');
        enquiryModal.classList.remove('active');

        // Re-enable body scroll
        document.body.style.overflow = '';

        // Reset form
        document.getElementById('fabricEnquiryForm').reset();
      }

      // Add event listener for modal search
      document.addEventListener('DOMContentLoaded', function() {
        const modalSearchInput = document.getElementById('modalSearchInput');
        const modalSearchBtn = document.querySelector('.modal-search-btn');

        if (modalSearchInput) {
          modalSearchInput.addEventListener('input', function() {
            currentModalPage = 1;
            loadModalProducts();
          });
        }

        if (modalSearchBtn) {
          modalSearchBtn.addEventListener('click', function() {
            currentModalPage = 1;
            loadModalProducts();
          });
        }

        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') {
            closeFabricCategory();
            closeFabricEnquiry();
          }
        });

        // Handle fabric enquiry form submission
        const fabricEnquiryForm = document.getElementById('fabricEnquiryForm');
        if (fabricEnquiryForm) {
          fabricEnquiryForm.addEventListener('submit', function(e) {
            e.preventDefault();

            // Get form data
            const formData = new FormData(this);
            const fabricName = document.getElementById('enquiryFabricName').textContent;

            // Here you would normally send the data to your backend
            // For now, we'll show a success message
            alert(`Thank you for your enquiry about ${fabricName}! We'll contact you within 24 hours.`);

            // Close the modal and reset form
            closeFabricEnquiry();
          });
        }
      });

      // View Switching Functions
      function switchToCategories() {
        document.getElementById('categoriesView').style.display = 'block';
        document.getElementById('allFabricsView').style.display = 'none';

        document.getElementById('categoryViewBtn').classList.add('active');
        document.getElementById('allFabricsBtn').classList.remove('active');
      }

      function switchToAllFabrics() {
        document.getElementById('categoriesView').style.display = 'none';
        document.getElementById('allFabricsView').style.display = 'block';

        document.getElementById('categoryViewBtn').classList.remove('active');
        document.getElementById('allFabricsBtn').classList.add('active');

        // Load the original fabric functionality
        if (typeof renderCurrentPage === 'function') {
          renderCurrentPage();
        }
      }

      // Integration functions to connect with existing code
      function updateExistingResultsCount(count) {
        // Update both old and new result counters
        const resultsCount = document.querySelector(".results-count strong");
        const searchCount = document.getElementById("search-count");

        if (resultsCount) resultsCount.textContent = count;
        if (searchCount) searchCount.textContent = count;
      }

      // Override the existing filterProductsByCategory to work with search
      function filterProductsByCategoryEnhanced(category = null) {
        const categorySelect = document.querySelector(".filter-select");
        const selectedCategory =
          category ||
          (categorySelect ? categorySelect.value : "All Categories");

        // Get current search results or all products
        let products =
          searchResults.length > 0 ? searchResults : fabricProducts;

        if (selectedCategory === "All Categories") {
          filteredProducts = [...products];
        } else {
          filteredProducts = products.filter((product) => {
            return (
              product.category === selectedCategory ||
              product.name
                .toLowerCase()
                .includes(selectedCategory.toLowerCase())
            );
          });
        }

        // Apply search filters
        applySearchFilters();

        // Update display
        currentPage = 1;
        renderCurrentPage();
        updateExistingResultsCount(filteredProducts.length);
        updatePagination(Math.ceil(filteredProducts.length / itemsPerPage));
        updatePaginationButtons();
      }

      // Quick search function for popular terms
      function quickSearch(term) {
        document.getElementById("fabric-search-input").value = term;
        performFabricSearch(term);
      }

      // Add popular searches based on your products
      function createPopularSearches() {
        const popularTerms = [
          "silk",
          "cotton",
          "organic",
          "premium",
          "handloom",
          "linen",
        ];
        return `
    <div class="search-analytics">
      <div style="font-weight: 500; margin-bottom: 8px;">Popular searches:</div>
      <div class="popular-searches">
        ${popularTerms
          .map(
            (term) => `
          <span class="popular-search-tag" onclick="quickSearch('${term}')">${term}</span>
        `
          )
          .join("")}
      </div>
    </div>
  `;
      }

      // Enhanced no results display
      function showNoResults(query) {
        const resultsGrid = document.querySelector(".products-grid");
        if (!resultsGrid) return;

        resultsGrid.innerHTML = `
    <div class="no-search-results" style="grid-column: 1 / -1;">
      <div class="no-results-icon">🔍</div>
      <div class="no-results-title">No fabrics found${
        query ? ` for "${query}"` : ""
      }</div>
      <div class="no-results-text">
        Try adjusting your search terms or browse our categories.<br>
        Our collection includes premium silk, organic cotton, natural linen, and specialty fabrics.
      </div>
      ${createPopularSearches()}
    </div>
  `;
      }

      // Override existing renderCurrentPage to handle search results
      const originalRenderCurrentPage = renderCurrentPage;
      renderCurrentPage = function () {
        const productsGrid = document.querySelector(".products-grid");
        if (!productsGrid) return;

        if (filteredProducts.length === 0) {
          const searchInput = document.getElementById("fabric-search-input");
          const query = searchInput ? searchInput.value : "";
          showNoResults(query);
          return;
        }

        // Call original function
        originalRenderCurrentPage();
      };

      // Initialize search integration
      document.addEventListener("DOMContentLoaded", function () {
        // Override the existing filter function
        window.filterProductsByCategory = filterProductsByCategoryEnhanced;

        // Add search input to existing navigation if it doesn't exist
        const existingNav = document.querySelector("nav");
        if (existingNav && !document.getElementById("fabric-search-input")) {
          // This is handled by the HTML section above
        }
      });
    </script>
  </body>
</html>
